function getData(a,b,c){$.ajax({url:b.url,data:{id:b.id,idHabitacion:b.idHabitacion,idEstablecimiento:b.idEstablecimiento},dataType:"json",success:function(b){$(a).html(""),c(a,b)}})}function CurrencySettings(a,b,c,d){this.defaultCurrency=a,this.currentCurrency=b,this.conversionRate=c,this.rates=d}function getAgent(){var a,b=navigator.userAgent,c=b.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(c[1])?(a=/\brv[ :]+(\d+)/g.exec(b)||[],["IE",a[1]||""]):"Chrome"===c[1]&&(a=b.match(/\bOPR\/(\d+)/),null!==a)?["Opera",a[1]]:(c=c[2]?[c[1],c[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(a=b.match(/version\/(\d+(\.\d{1,2}))/i))&&c.splice(1,1,a[1]),c)}function addEvent(a,b,c,d){d=d||a;var e;a.addEventListener?(e=function(a){c.call(d,a)},a.addEventListener(b,e,!1)):a.attachEvent&&(e=function(){var a=window.event;a.preventDefault=function(){window.event.returnValue=!1},c.call(d,a)},a.attachEvent("on"+b,e)),eventCache.push([a,b,c,e])}function removeEvent(a,b,c){var d,e,f;for(f=0;f<eventCache.length;f++)e=eventCache[f],e[0]==a&&e[1]==b&&e[2]==c&&(d=e[3],d&&(a.removeEventListener?a.removeEventListener(b,d,!1):a.detachEvent&&a.detachEvent("on"+b,d)))}!function(a,b,c){"use strict";function d(a,c,d){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(e,f,g,h,i){function j(){l&&(l.$destroy(),l=null),m&&(d.leave(m),m=null)}function k(){var g=a.current&&a.current.locals;if(b.isDefined(g&&g.$template)){var g=e.$new(),h=a.current;m=i(g,function(a){d.enter(a,null,m||f,function(){!b.isDefined(n)||n&&!e.$eval(n)||c()}),j()}),l=h.scope=g,l.$emit("$viewContentLoaded"),l.$eval(o)}else j()}var l,m,n=g.autoscroll,o=g.onload||"";e.$on("$routeChangeSuccess",k),k()}}}function e(a,b,c){return{restrict:"ECA",priority:-400,link:function(d,e){var f=c.current,g=f.locals;e.html(g.$template);var h=a(e.contents());f.controller&&(g.$scope=d,g=b(f.controller,g),f.controllerAs&&(d[f.controllerAs]=g),e.data("$ngControllerController",g),e.children().data("$ngControllerController",g)),h(d)}}}a=b.module("ngRoute",["ng"]).provider("$route",function(){function a(a,c){return b.extend(new(b.extend(function(){},{prototype:a})),c)}function c(a,b){var c=b.caseInsensitiveMatch,d={originalPath:a,regexp:a},e=d.keys=[];return a=a.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(a,b,c,d){return a="?"===d?d:null,d="*"===d?d:null,e.push({name:c,optional:!!a}),b=b||"",""+(a?"":b)+"(?:"+(a?b:"")+(d&&"(.+?)"||"([^/]+)")+(a||"")+")"+(a||"")}).replace(/([\/$\*])/g,"\\$1"),d.regexp=RegExp("^"+a+"$",c?"i":""),d}var d={};this.when=function(a,e){if(d[a]=b.extend({reloadOnSearch:!0},e,a&&c(a,e)),a){var f="/"==a[a.length-1]?a.substr(0,a.length-1):a+"/";d[f]=b.extend({redirectTo:a},c(f,e))}return this},this.otherwise=function(a){return this.when(null,a),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$http","$templateCache","$sce",function(c,e,f,g,h,i,j,k){function l(){var a=m(),d=p.current;a&&d&&a.$$route===d.$$route&&b.equals(a.pathParams,d.pathParams)&&!a.reloadOnSearch&&!o?(d.params=a.params,b.copy(d.params,f),c.$broadcast("$routeUpdate",d)):(a||d)&&(o=!1,c.$broadcast("$routeChangeStart",a,d),(p.current=a)&&a.redirectTo&&(b.isString(a.redirectTo)?e.path(n(a.redirectTo,a.params)).search(a.params).replace():e.url(a.redirectTo(a.pathParams,e.path(),e.search())).replace()),g.when(a).then(function(){if(a){var c,d,e=b.extend({},a.resolve);return b.forEach(e,function(a,c){e[c]=b.isString(a)?h.get(a):h.invoke(a)}),b.isDefined(c=a.template)?b.isFunction(c)&&(c=c(a.params)):b.isDefined(d=a.templateUrl)&&(b.isFunction(d)&&(d=d(a.params)),d=k.getTrustedResourceUrl(d),b.isDefined(d)&&(a.loadedTemplateUrl=d,c=i.get(d,{cache:j}).then(function(a){return a.data}))),b.isDefined(c)&&(e.$template=c),g.all(e)}}).then(function(e){a==p.current&&(a&&(a.locals=e,b.copy(a.params,f)),c.$broadcast("$routeChangeSuccess",a,d))},function(b){a==p.current&&c.$broadcast("$routeChangeError",a,d,b)}))}function m(){var c,f;return b.forEach(d,function(d,g){var h;if(h=!f){var i=e.path();h=d.keys;var j={};if(d.regexp)if(i=d.regexp.exec(i)){for(var k=1,l=i.length;l>k;++k){var m=h[k-1],n="string"==typeof i[k]?decodeURIComponent(i[k]):i[k];m&&n&&(j[m.name]=n)}h=j}else h=null;else h=null;h=c=h}h&&(f=a(d,{params:b.extend({},e.search(),c),pathParams:c}),f.$$route=d)}),f||d[null]&&a(d[null],{params:{},pathParams:{}})}function n(a,c){var d=[];return b.forEach((a||"").split(":"),function(a,b){if(0===b)d.push(a);else{var e=a.match(/(\w+)(.*)/),f=e[1];d.push(c[f]),d.push(e[2]||""),delete c[f]}}),d.join("")}var o=!1,p={routes:d,reload:function(){o=!0,c.$evalAsync(l)}};return c.$on("$locationChangeSuccess",l),p}]}),a.provider("$routeParams",function(){this.$get=function(){return{}}}),a.directive("ngView",d),a.directive("ngView",e),d.$inject=["$route","$anchorScroll","$animate"],e.$inject=["$compile","$controller","$route"]}(window,window.angular),function(a,b,c){"use strict";function d(a,c){c=c||{},b.forEach(c,function(a,b){delete c[b]});for(var d in a)!a.hasOwnProperty(d)||"$"===d.charAt(0)&&"$"===d.charAt(1)||(c[d]=a[d]);return c}var e=b.$$minErr("$resource"),f=/^(\.[a-zA-Z_$][0-9a-zA-Z_$]*)+$/;b.module("ngResource",["ng"]).factory("$resource",["$http","$q",function(a,g){function h(a,b){this.template=a,this.defaults=b||{},this.urlParams={}}function i(p,q,r){function s(a,b){var d={};return b=m({},q,b),l(b,function(b,g){o(b)&&(b=b());var h;if(b&&b.charAt&&"@"==b.charAt(0)){h=a;var i=b.substr(1);if(null==i||""===i||"hasOwnProperty"===i||!f.test("."+i))throw e("badmember",i);for(var i=i.split("."),j=0,k=i.length;k>j&&h!==c;j++){var l=i[j];h=null!==h?h[l]:c}}else h=b;d[g]=h}),d}function t(a){return a.resource}function u(a){d(a||{},this)}var v=new h(p);return r=m({},j,r),l(r,function(f,h){var i=/^(POST|PUT|PATCH)$/i.test(f.method);u[h]=function(h,j,p,q){var r,w,x,y={};switch(arguments.length){case 4:x=q,w=p;case 3:case 2:if(!o(j)){y=h,r=j,w=p;break}if(o(h)){w=h,x=j;break}w=j,x=p;case 1:o(h)?w=h:i?r=h:y=h;break;case 0:break;default:throw e("badargs",arguments.length)}var z=this instanceof u,A=z?r:f.isArray?[]:new u(r),B={},C=f.interceptor&&f.interceptor.response||t,D=f.interceptor&&f.interceptor.responseError||c;return l(f,function(a,b){"params"!=b&&"isArray"!=b&&"interceptor"!=b&&(B[b]=n(a))}),i&&(B.data=r),v.setUrlParams(B,m({},s(r,f.params||{}),y),f.url),y=a(B).then(function(a){var c=a.data,g=A.$promise;if(c){if(b.isArray(c)!==!!f.isArray)throw e("badcfg",f.isArray?"array":"object",b.isArray(c)?"array":"object");f.isArray?(A.length=0,l(c,function(a){A.push(new u(a))})):(d(c,A),A.$promise=g)}return A.$resolved=!0,a.resource=A,a},function(a){return A.$resolved=!0,(x||k)(a),g.reject(a)}),y=y.then(function(a){var b=C(a);return(w||k)(b,a.headers),b},D),z?y:(A.$promise=y,A.$resolved=!1,A)},u.prototype["$"+h]=function(a,b,c){return o(a)&&(c=b,b=a,a={}),a=u[h].call(this,a,this,b,c),a.$promise||a}}),u.bind=function(a){return i(p,m({},q,a),r)},u}var j={get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}},k=b.noop,l=b.forEach,m=b.extend,n=b.copy,o=b.isFunction;return h.prototype={setUrlParams:function(a,c,d){var f,g,h=this,i=d||h.template,j=h.urlParams={};l(i.split(/\W/),function(a){if("hasOwnProperty"===a)throw e("badname");!/^\d+$/.test(a)&&a&&RegExp("(^|[^\\\\]):"+a+"(\\W|$)").test(i)&&(j[a]=!0)}),i=i.replace(/\\:/g,":"),c=c||{},l(h.urlParams,function(a,d){f=c.hasOwnProperty(d)?c[d]:h.defaults[d],b.isDefined(f)&&null!==f?(g=encodeURIComponent(f).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"%20").replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+"),i=i.replace(RegExp(":"+d+"(\\W|$)","g"),function(a,b){return g+b})):i=i.replace(RegExp("(/?):"+d+"(\\W|$)","g"),function(a,b,c){return"/"==c.charAt(0)?c:b+c})}),i=i.replace(/\/+$/,"")||"/",i=i.replace(/\/\.(?=\w+($|\?))/,"."),a.url=i.replace(/\/\\\./,"/."),l(c,function(b,c){h.urlParams[c]||(a.params=a.params||{},a.params[c]=b)})}},i}])}(window,window.angular),function(a,b,c){"use strict";function d(a){var c=[];return i(c,b.noop).chars(a),c.join("")}function e(a){var b={};a=a.split(",");var c;for(c=0;c<a.length;c++)b[a[c]]=!0;return b}function f(a,c){function d(a,d,f,h){if(d=b.lowercase(d),v[d])for(;i.last()&&w[i.last()];)e("",i.last());u[d]&&i.last()==d&&e("",d),(h=t[d]||!!h)||i.push(d);var j={};f.replace(m,function(a,b,c,d,e){j[b]=g(c||d||e||"")}),c.start&&c.start(d,j,h)}function e(a,d){var e,f=0;if(d=b.lowercase(d))for(f=i.length-1;f>=0&&i[f]!=d;f--);if(f>=0){for(e=i.length-1;e>=f;e--)c.end&&c.end(i[e]);i.length=f}}var f,h,i=[],s=a;for(i.last=function(){return i[i.length-1]};a;){if(h=!0,i.last()&&x[i.last()]?(a=a.replace(RegExp("(.*)<\\s*\\/\\s*"+i.last()+"[^>]*>","i"),function(a,b){return b=b.replace(p,"$1").replace(r,"$1"),c.chars&&c.chars(g(b)),""}),e("",i.last())):(0===a.indexOf("<!--")?(f=a.indexOf("--",4),f>=0&&a.lastIndexOf("-->",f)===f&&(c.comment&&c.comment(a.substring(4,f)),a=a.substring(f+3),h=!1)):q.test(a)?(f=a.match(q))&&(a=a.replace(f[0],""),h=!1):o.test(a)?(f=a.match(l))&&(a=a.substring(f[0].length),f[0].replace(l,e),h=!1):n.test(a)&&(f=a.match(k))&&(a=a.substring(f[0].length),f[0].replace(k,d),h=!1),h&&(f=a.indexOf("<"),h=0>f?a:a.substring(0,f),a=0>f?"":a.substring(f),c.chars&&c.chars(g(h)))),a==s)throw j("badparse",a);s=a}e()}function g(a){if(!a)return"";var b=C.exec(a);a=b[1];var c=b[3];return(b=b[2])&&(B.innerHTML=b.replace(/</g,"&lt;"),b="textContent"in B?B.textContent:B.innerText),a+b+c}function h(a){return a.replace(/&/g,"&amp;").replace(s,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function i(a,c){var d=!1,e=b.bind(a,a.push);return{start:function(a,f,g){a=b.lowercase(a),!d&&x[a]&&(d=a),d||!0!==y[a]||(e("<"),e(a),b.forEach(f,function(d,f){var g=b.lowercase(f),i="img"===a&&"src"===g||"background"===g;!0!==A[g]||!0===z[g]&&!c(d,i)||(e(" "),e(f),e('="'),e(h(d)),e('"'))}),e(g?"/>":">"))},end:function(a){a=b.lowercase(a),d||!0!==y[a]||(e("</"),e(a),e(">")),a==d&&(d=!1)},chars:function(a){d||e(h(a))}}}var j=b.$$minErr("$sanitize"),k=/^<\s*([\w:-]+)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*>/,l=/^<\s*\/\s*([\w:-]+)[^>]*>/,m=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,n=/^</,o=/^<\s*\//,p=/\x3c!--(.*?)--\x3e/g,q=/<!DOCTYPE([^>]*?)>/i,r=/<!\[CDATA\[(.*?)]]\x3e/g,s=/([^\#-~| |!])/g,t=e("area,br,col,hr,img,wbr");a=e("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),c=e("rp,rt");var u=b.extend({},c,a),v=b.extend({},a,e("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),w=b.extend({},c,e("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),x=e("script,style"),y=b.extend({},t,v,w,u),z=e("background,cite,href,longdesc,src,usemap"),A=b.extend({},z,e("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width")),B=document.createElement("pre"),C=/^(\s*)([\s\S]*?)(\s*)$/;b.module("ngSanitize",[]).provider("$sanitize",function(){this.$get=["$$sanitizeUri",function(a){return function(b){var c=[];return f(b,i(c,function(b,c){return!/^unsafe/.test(a(b,c))})),c.join("")}}]}),b.module("ngSanitize").filter("linky",["$sanitize",function(a){var c=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>]/,e=/^mailto:/;return function(f,g){function h(a){a&&n.push(d(a))}function i(a,c){n.push("<a "),b.isDefined(g)&&(n.push('target="'),n.push(g),n.push('" ')),n.push('href="'),n.push(a),n.push('">'),h(c),n.push("</a>")}if(!f)return f;for(var j,k,l,m=f,n=[];j=m.match(c);)k=j[0],j[2]==j[3]&&(k="mailto:"+k),l=j.index,h(m.substr(0,l)),i(k,j[0].replace(e,"")),m=m.substring(l+j[0].length);return h(m),a(n.join(""))}}])}(window,window.angular),function(a,b){function c(b,c){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,b.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap=#"+f+"]")[0],!!g&&d(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&d(b)}function d(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var e=0,f=/^ui-id-\d+$/;a.ui=a.ui||{},a.extend(a.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),scrollParent:function(){var b;return b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var d,e,f=a(this[0]);f.length&&f[0]!==document;){if(d=f.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(e=parseInt(f.css("zIndex"),10),!isNaN(e)&&0!==e))return e;f=f.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),e&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.support.selectstart="onselectstart"in document.createElement("div"),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c){var d,e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(d=0;e.length>d;d++)a.options[e[d][0]]&&e[d][1].apply(a.element,c)}},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)}})}(jQuery),function(a,b){function c(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},a.extend(this._defaults,this.regional[""]),this.dpDiv=d(a("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function d(b){var c="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return b.delegate(c,"mouseout",function(){a(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).removeClass("ui-datepicker-next-hover")}).delegate(c,"mouseover",function(){a.datepicker._isDisabledDatepicker(f.inline?b.parent()[0]:f.input[0])||(a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),a(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).addClass("ui-datepicker-next-hover"))})}function e(b,c){a.extend(b,c);for(var d in c)null==c[d]&&(b[d]=c[d]);return b}a.extend(a.ui,{datepicker:{version:"1.10.4"}});var f,g="datepicker";a.extend(c.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return e(this._defaults,a||{}),this},_attachDatepicker:function(b,c){var d,e,f;d=b.nodeName.toLowerCase(),e="div"===d||"span"===d,b.id||(this.uuid+=1,b.id="dp"+this.uuid),f=this._newInst(a(b),e),f.settings=a.extend({},c||{}),"input"===d?this._connectDatepicker(b,f):e&&this._inlineDatepicker(b,f)},_newInst:function(b,c){var e=b[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:e,input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:c,dpDiv:c?d(a("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(b,c){var d=a(b);c.append=a([]),c.trigger=a([]),d.hasClass(this.markerClassName)||(this._attachments(d,c),d.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(c),a.data(b,g,c),c.settings.disabled&&this._disableDatepicker(b))},_attachments:function(b,c){var d,e,f,g=this._get(c,"appendText"),h=this._get(c,"isRTL");c.append&&c.append.remove(),g&&(c.append=a("<span class='"+this._appendClass+"'>"+g+"</span>"),b[h?"before":"after"](c.append)),b.unbind("focus",this._showDatepicker),c.trigger&&c.trigger.remove(),d=this._get(c,"showOn"),("focus"===d||"both"===d)&&b.focus(this._showDatepicker),("button"===d||"both"===d)&&(e=this._get(c,"buttonText"),f=this._get(c,"buttonImage"),c.trigger=a(this._get(c,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:f,alt:e,title:e}):a("<button type='button'></button>").addClass(this._triggerClass).html(f?a("<img/>").attr({src:f,alt:e,title:e}):e)),b[h?"before":"after"](c.trigger),c.trigger.click(function(){return a.datepicker._datepickerShowing&&a.datepicker._lastInput===b[0]?a.datepicker._hideDatepicker():a.datepicker._datepickerShowing&&a.datepicker._lastInput!==b[0]?(a.datepicker._hideDatepicker(),a.datepicker._showDatepicker(b[0])):a.datepicker._showDatepicker(b[0]),!1}))},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b,c,d,e,f=new Date(2009,11,20),g=this._get(a,"dateFormat");g.match(/[DM]/)&&(b=function(a){for(c=0,d=0,e=0;a.length>e;e++)a[e].length>c&&(c=a[e].length,d=e);return d},f.setMonth(b(this._get(a,g.match(/MM/)?"monthNames":"monthNamesShort"))),f.setDate(b(this._get(a,g.match(/DD/)?"dayNames":"dayNamesShort"))+20-f.getDay())),a.input.attr("size",this._formatDate(a,f).length)}},_inlineDatepicker:function(b,c){var d=a(b);d.hasClass(this.markerClassName)||(d.addClass(this.markerClassName).append(c.dpDiv),a.data(b,g,c),this._setDate(c,this._getDefaultDate(c),!0),this._updateDatepicker(c),this._updateAlternate(c),c.settings.disabled&&this._disableDatepicker(b),c.dpDiv.css("display","block"))},_dialogDatepicker:function(b,c,d,f,h){var i,j,k,l,m,n=this._dialogInst;return n||(this.uuid+=1,i="dp"+this.uuid,this._dialogInput=a("<input type='text' id='"+i+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),a("body").append(this._dialogInput),n=this._dialogInst=this._newInst(this._dialogInput,!1),n.settings={},a.data(this._dialogInput[0],g,n)),e(n.settings,f||{}),c=c&&c.constructor===Date?this._formatDate(n,c):c,this._dialogInput.val(c),this._pos=h?h.length?h:[h.pageX,h.pageY]:null,this._pos||(j=document.documentElement.clientWidth,k=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,m=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[j/2-100+l,k/2-150+m]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),n.settings.onSelect=d,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),a.blockUI&&a.blockUI(this.dpDiv),a.data(this._dialogInput[0],g,n),this},_destroyDatepicker:function(b){var c,d=a(b),e=a.data(b,g);d.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),a.removeData(b,g),"input"===c?(e.append.remove(),e.trigger.remove(),d.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===c||"span"===c)&&d.removeClass(this.markerClassName).empty())},_enableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,g);e.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!1,f.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===c||"span"===c)&&(d=e.children("."+this._inlineClass),d.children().removeClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}))},_disableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,g);e.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!0,f.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===c||"span"===c)&&(d=e.children("."+this._inlineClass),d.children().addClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}),this._disabledInputs[this._disabledInputs.length]=b)},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;this._disabledInputs.length>b;b++)if(this._disabledInputs[b]===a)return!0;return!1},_getInst:function(b){try{return a.data(b,g)}catch(c){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(c,d,f){var g,h,i,j,k=this._getInst(c);return 2===arguments.length&&"string"==typeof d?"defaults"===d?a.extend({},a.datepicker._defaults):k?"all"===d?a.extend({},k.settings):this._get(k,d):null:(g=d||{},"string"==typeof d&&(g={},g[d]=f),k&&(this._curInst===k&&this._hideDatepicker(),h=this._getDateDatepicker(c,!0),i=this._getMinMaxDate(k,"min"),j=this._getMinMaxDate(k,"max"),e(k.settings,g),null!==i&&g.dateFormat!==b&&g.minDate===b&&(k.settings.minDate=this._formatDate(k,i)),null!==j&&g.dateFormat!==b&&g.maxDate===b&&(k.settings.maxDate=this._formatDate(k,j)),"disabled"in g&&(g.disabled?this._disableDatepicker(c):this._enableDatepicker(c)),this._attachments(a(c),k),this._autoSize(k),this._setDate(k,h),this._updateAlternate(k),this._updateDatepicker(k)),b)},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(b){var c,d,e,f=a.datepicker._getInst(b.target),g=!0,h=f.dpDiv.is(".ui-datepicker-rtl");if(f._keyEvent=!0,a.datepicker._datepickerShowing)switch(b.keyCode){case 9:a.datepicker._hideDatepicker(),g=!1;break;case 13:return e=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",f.dpDiv),e[0]&&a.datepicker._selectDay(b.target,f.selectedMonth,f.selectedYear,e[0]),c=a.datepicker._get(f,"onSelect"),c?(d=a.datepicker._formatDate(f),c.apply(f.input?f.input[0]:null,[d,f])):a.datepicker._hideDatepicker(),!1;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 35:(b.ctrlKey||b.metaKey)&&a.datepicker._clearDate(b.target),g=b.ctrlKey||b.metaKey;break;case 36:(b.ctrlKey||b.metaKey)&&a.datepicker._gotoToday(b.target),g=b.ctrlKey||b.metaKey;break;case 37:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?1:-1,"D"),g=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 38:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,-7,"D"),g=b.ctrlKey||b.metaKey;break;case 39:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?-1:1,"D"),g=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 40:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,7,"D"),g=b.ctrlKey||b.metaKey;break;default:g=!1}else 36===b.keyCode&&b.ctrlKey?a.datepicker._showDatepicker(this):g=!1;g&&(b.preventDefault(),b.stopPropagation())},_doKeyPress:function(c){var d,e,f=a.datepicker._getInst(c.target);return a.datepicker._get(f,"constrainInput")?(d=a.datepicker._possibleChars(a.datepicker._get(f,"dateFormat")),e=String.fromCharCode(null==c.charCode?c.keyCode:c.charCode),c.ctrlKey||c.metaKey||" ">e||!d||d.indexOf(e)>-1):b},_doKeyUp:function(b){var c,d=a.datepicker._getInst(b.target);if(d.input.val()!==d.lastVal)try{c=a.datepicker.parseDate(a.datepicker._get(d,"dateFormat"),d.input?d.input.val():null,a.datepicker._getFormatConfig(d)),c&&(a.datepicker._setDateFromField(d),a.datepicker._updateAlternate(d),a.datepicker._updateDatepicker(d))}catch(e){}return!0},_showDatepicker:function(b){if(b=b.target||b,"input"!==b.nodeName.toLowerCase()&&(b=a("input",b.parentNode)[0]),!a.datepicker._isDisabledDatepicker(b)&&a.datepicker._lastInput!==b){var c,d,f,g,h,i,j;c=a.datepicker._getInst(b),a.datepicker._curInst&&a.datepicker._curInst!==c&&(a.datepicker._curInst.dpDiv.stop(!0,!0),c&&a.datepicker._datepickerShowing&&a.datepicker._hideDatepicker(a.datepicker._curInst.input[0])),d=a.datepicker._get(c,"beforeShow"),f=d?d.apply(b,[b,c]):{},f!==!1&&(e(c.settings,f),c.lastVal=null,a.datepicker._lastInput=b,a.datepicker._setDateFromField(c),a.datepicker._inDialog&&(b.value=""),a.datepicker._pos||(a.datepicker._pos=a.datepicker._findPos(b),a.datepicker._pos[1]+=b.offsetHeight),g=!1,a(b).parents().each(function(){return g|="fixed"===a(this).css("position"),!g}),h={left:a.datepicker._pos[0],top:a.datepicker._pos[1]},a.datepicker._pos=null,c.dpDiv.empty(),c.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),a.datepicker._updateDatepicker(c),h=a.datepicker._checkOffset(c,h,g),c.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":g?"fixed":"absolute",display:"none",left:h.left+"px",top:h.top+"px"}),c.inline||(i=a.datepicker._get(c,"showAnim"),j=a.datepicker._get(c,"duration"),c.dpDiv.zIndex(a(b).zIndex()+1),a.datepicker._datepickerShowing=!0,a.effects&&a.effects.effect[i]?c.dpDiv.show(i,a.datepicker._get(c,"showOptions"),j):c.dpDiv[i||"show"](i?j:null),a.datepicker._shouldFocusInput(c)&&c.input.focus(),a.datepicker._curInst=c))}},_updateDatepicker:function(b){this.maxRows=4,f=b,b.dpDiv.empty().append(this._generateHTML(b)),this._attachHandlers(b),b.dpDiv.find("."+this._dayOverClass+" a").mouseover();var c,d=this._getNumberOfMonths(b),e=d[1],g=17;b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),e>1&&b.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",g*e+"em"),b.dpDiv[(1!==d[0]||1!==d[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),b===a.datepicker._curInst&&a.datepicker._datepickerShowing&&a.datepicker._shouldFocusInput(b)&&b.input.focus(),b.yearshtml&&(c=b.yearshtml,setTimeout(function(){c===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml),c=b.yearshtml=null},0))},_shouldFocusInput:function(a){return a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&!a.input.is(":focus")},_checkOffset:function(b,c,d){var e=b.dpDiv.outerWidth(),f=b.dpDiv.outerHeight(),g=b.input?b.input.outerWidth():0,h=b.input?b.input.outerHeight():0,i=document.documentElement.clientWidth+(d?0:a(document).scrollLeft()),j=document.documentElement.clientHeight+(d?0:a(document).scrollTop());return c.left-=this._get(b,"isRTL")?e-g:0,c.left-=d&&c.left===b.input.offset().left?a(document).scrollLeft():0,c.top-=d&&c.top===b.input.offset().top+h?a(document).scrollTop():0,c.left-=Math.min(c.left,c.left+e>i&&i>e?Math.abs(c.left+e-i):0),c.top-=Math.min(c.top,c.top+f>j&&j>f?Math.abs(f+h):0),c},_findPos:function(b){for(var c,d=this._getInst(b),e=this._get(d,"isRTL");b&&("hidden"===b.type||1!==b.nodeType||a.expr.filters.hidden(b));)b=b[e?"previousSibling":"nextSibling"];return c=a(b).offset(),[c.left,c.top]},_hideDatepicker:function(b){
var c,d,e,f,h=this._curInst;!h||b&&h!==a.data(b,g)||this._datepickerShowing&&(c=this._get(h,"showAnim"),d=this._get(h,"duration"),e=function(){a.datepicker._tidyDialog(h)},a.effects&&(a.effects.effect[c]||a.effects[c])?h.dpDiv.hide(c,a.datepicker._get(h,"showOptions"),d,e):h.dpDiv["slideDown"===c?"slideUp":"fadeIn"===c?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1,f=this._get(h,"onClose"),f&&f.apply(h.input?h.input[0]:null,[h.input?h.input.val():"",h]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),a.blockUI&&(a.unblockUI(),a("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(b){if(a.datepicker._curInst){var c=a(b.target),d=a.datepicker._getInst(c[0]);(c[0].id!==a.datepicker._mainDivId&&0===c.parents("#"+a.datepicker._mainDivId).length&&!c.hasClass(a.datepicker.markerClassName)&&!c.closest("."+a.datepicker._triggerClass).length&&a.datepicker._datepickerShowing&&(!a.datepicker._inDialog||!a.blockUI)||c.hasClass(a.datepicker.markerClassName)&&a.datepicker._curInst!==d)&&a.datepicker._hideDatepicker()}},_adjustDate:function(b,c,d){var e=a(b),f=this._getInst(e[0]);this._isDisabledDatepicker(e[0])||(this._adjustInstDate(f,c+("M"===d?this._get(f,"showCurrentAtPos"):0),d),this._updateDatepicker(f))},_gotoToday:function(b){var c,d=a(b),e=this._getInst(d[0]);this._get(e,"gotoCurrent")&&e.currentDay?(e.selectedDay=e.currentDay,e.drawMonth=e.selectedMonth=e.currentMonth,e.drawYear=e.selectedYear=e.currentYear):(c=new Date,e.selectedDay=c.getDate(),e.drawMonth=e.selectedMonth=c.getMonth(),e.drawYear=e.selectedYear=c.getFullYear()),this._notifyChange(e),this._adjustDate(d)},_selectMonthYear:function(b,c,d){var e=a(b),f=this._getInst(e[0]);f["selected"+("M"===d?"Month":"Year")]=f["draw"+("M"===d?"Month":"Year")]=parseInt(c.options[c.selectedIndex].value,10),this._notifyChange(f),this._adjustDate(e)},_selectDay:function(b,c,d,e){var f,g=a(b);a(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(g[0])||(f=this._getInst(g[0]),f.selectedDay=f.currentDay=a("a",e).html(),f.selectedMonth=f.currentMonth=c,f.selectedYear=f.currentYear=d,this._selectDate(b,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(b){var c=a(b);this._selectDate(c,"")},_selectDate:function(b,c){var d,e=a(b),f=this._getInst(e[0]);c=null!=c?c:this._formatDate(f),f.input&&f.input.val(c),this._updateAlternate(f),d=this._get(f,"onSelect"),d?d.apply(f.input?f.input[0]:null,[c,f]):f.input&&f.input.trigger("change"),f.inline?this._updateDatepicker(f):(this._hideDatepicker(),this._lastInput=f.input[0],"object"!=typeof f.input[0]&&f.input.focus(),this._lastInput=null)},_updateAlternate:function(b){var c,d,e,f=this._get(b,"altField");f&&(c=this._get(b,"altFormat")||this._get(b,"dateFormat"),d=this._getDate(b),e=this.formatDate(c,d,this._getFormatConfig(b)),a(f).each(function(){a(this).val(e)}))},noWeekends:function(a){var b=a.getDay();return[b>0&&6>b,""]},iso8601Week:function(a){var b,c=new Date(a.getTime());return c.setDate(c.getDate()+4-(c.getDay()||7)),b=c.getTime(),c.setMonth(0),c.setDate(1),Math.floor(Math.round((b-c)/864e5)/7)+1},parseDate:function(c,d,e){if(null==c||null==d)throw"Invalid arguments";if(d="object"==typeof d?""+d:d+"",""===d)return null;var f,g,h,i,j=0,k=(e?e.shortYearCutoff:null)||this._defaults.shortYearCutoff,l="string"!=typeof k?k:(new Date).getFullYear()%100+parseInt(k,10),m=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,n=(e?e.dayNames:null)||this._defaults.dayNames,o=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,p=(e?e.monthNames:null)||this._defaults.monthNames,q=-1,r=-1,s=-1,t=-1,u=!1,v=function(a){var b=c.length>f+1&&c.charAt(f+1)===a;return b&&f++,b},w=function(a){var b=v(a),c="@"===a?14:"!"===a?20:"y"===a&&b?4:"o"===a?3:2,e=RegExp("^\\d{1,"+c+"}"),f=d.substring(j).match(e);if(!f)throw"Missing number at position "+j;return j+=f[0].length,parseInt(f[0],10)},x=function(c,e,f){var g=-1,h=a.map(v(c)?f:e,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});if(a.each(h,function(a,c){var e=c[1];return d.substr(j,e.length).toLowerCase()===e.toLowerCase()?(g=c[0],j+=e.length,!1):b}),-1!==g)return g+1;throw"Unknown name at position "+j},y=function(){if(d.charAt(j)!==c.charAt(f))throw"Unexpected literal at position "+j;j++};for(f=0;c.length>f;f++)if(u)"'"!==c.charAt(f)||v("'")?y():u=!1;else switch(c.charAt(f)){case"d":s=w("d");break;case"D":x("D",m,n);break;case"o":t=w("o");break;case"m":r=w("m");break;case"M":r=x("M",o,p);break;case"y":q=w("y");break;case"@":i=new Date(w("@")),q=i.getFullYear(),r=i.getMonth()+1,s=i.getDate();break;case"!":i=new Date((w("!")-this._ticksTo1970)/1e4),q=i.getFullYear(),r=i.getMonth()+1,s=i.getDate();break;case"'":v("'")?y():u=!0;break;default:y()}if(d.length>j&&(h=d.substr(j),!/^\s+/.test(h)))throw"Extra/unparsed characters found in date: "+h;if(-1===q?q=(new Date).getFullYear():100>q&&(q+=(new Date).getFullYear()-(new Date).getFullYear()%100+(l>=q?0:-100)),t>-1)for(r=1,s=t;g=this._getDaysInMonth(q,r-1),!(g>=s);)r++,s-=g;if(i=this._daylightSavingAdjust(new Date(q,r-1,s)),i.getFullYear()!==q||i.getMonth()+1!==r||i.getDate()!==s)throw"Invalid date";return i},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(a,b,c){if(!b)return"";var d,e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=function(b){var c=a.length>d+1&&a.charAt(d+1)===b;return c&&d++,c},j=function(a,b,c){var d=""+b;if(i(a))for(;c>d.length;)d="0"+d;return d},k=function(a,b,c,d){return i(a)?d[b]:c[b]},l="",m=!1;if(b)for(d=0;a.length>d;d++)if(m)"'"!==a.charAt(d)||i("'")?l+=a.charAt(d):m=!1;else switch(a.charAt(d)){case"d":l+=j("d",b.getDate(),2);break;case"D":l+=k("D",b.getDay(),e,f);break;case"o":l+=j("o",Math.round((new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime()-new Date(b.getFullYear(),0,0).getTime())/864e5),3);break;case"m":l+=j("m",b.getMonth()+1,2);break;case"M":l+=k("M",b.getMonth(),g,h);break;case"y":l+=i("y")?b.getFullYear():(10>b.getYear()%100?"0":"")+b.getYear()%100;break;case"@":l+=b.getTime();break;case"!":l+=1e4*b.getTime()+this._ticksTo1970;break;case"'":i("'")?l+="'":m=!0;break;default:l+=a.charAt(d)}return l},_possibleChars:function(a){var b,c="",d=!1,e=function(c){var d=a.length>b+1&&a.charAt(b+1)===c;return d&&b++,d};for(b=0;a.length>b;b++)if(d)"'"!==a.charAt(b)||e("'")?c+=a.charAt(b):d=!1;else switch(a.charAt(b)){case"d":case"m":case"y":case"@":c+="0123456789";break;case"D":case"M":return null;case"'":e("'")?c+="'":d=!0;break;default:c+=a.charAt(b)}return c},_get:function(a,c){return a.settings[c]!==b?a.settings[c]:this._defaults[c]},_setDateFromField:function(a,b){if(a.input.val()!==a.lastVal){var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e=this._getDefaultDate(a),f=e,g=this._getFormatConfig(a);try{f=this.parseDate(c,d,g)||e}catch(h){d=b?"":d}a.selectedDay=f.getDate(),a.drawMonth=a.selectedMonth=f.getMonth(),a.drawYear=a.selectedYear=f.getFullYear(),a.currentDay=d?f.getDate():0,a.currentMonth=d?f.getMonth():0,a.currentYear=d?f.getFullYear():0,this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(b,c,d){var e=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},f=function(c){try{return a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),c,a.datepicker._getFormatConfig(b))}catch(d){}for(var e=(c.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||new Date,f=e.getFullYear(),g=e.getMonth(),h=e.getDate(),i=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,j=i.exec(c);j;){switch(j[2]||"d"){case"d":case"D":h+=parseInt(j[1],10);break;case"w":case"W":h+=7*parseInt(j[1],10);break;case"m":case"M":g+=parseInt(j[1],10),h=Math.min(h,a.datepicker._getDaysInMonth(f,g));break;case"y":case"Y":f+=parseInt(j[1],10),h=Math.min(h,a.datepicker._getDaysInMonth(f,g))}j=i.exec(c)}return new Date(f,g,h)},g=null==c||""===c?d:"string"==typeof c?f(c):"number"==typeof c?isNaN(c)?d:e(c):new Date(c.getTime());return g=g&&"Invalid Date"==""+g?d:g,g&&(g.setHours(0),g.setMinutes(0),g.setSeconds(0),g.setMilliseconds(0)),this._daylightSavingAdjust(g)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),e===a.selectedMonth&&f===a.selectedYear||c||this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){var b=!a.currentYear||a.input&&""===a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_attachHandlers:function(b){var c=this._get(b,"stepMonths"),d="#"+b.id.replace(/\\\\/g,"\\");b.dpDiv.find("[data-handler]").map(function(){var b={prev:function(){a.datepicker._adjustDate(d,-c,"M")},next:function(){a.datepicker._adjustDate(d,+c,"M")},hide:function(){a.datepicker._hideDatepicker()},today:function(){a.datepicker._gotoToday(d)},selectDay:function(){return a.datepicker._selectDay(d,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return a.datepicker._selectMonthYear(d,this,"M"),!1},selectYear:function(){return a.datepicker._selectMonthYear(d,this,"Y"),!1}};a(this).bind(this.getAttribute("data-event"),b[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O=new Date,P=this._daylightSavingAdjust(new Date(O.getFullYear(),O.getMonth(),O.getDate())),Q=this._get(a,"isRTL"),R=this._get(a,"showButtonPanel"),S=this._get(a,"hideIfNoPrevNext"),T=this._get(a,"navigationAsDateFormat"),U=this._getNumberOfMonths(a),V=this._get(a,"showCurrentAtPos"),W=this._get(a,"stepMonths"),X=1!==U[0]||1!==U[1],Y=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),Z=this._getMinMaxDate(a,"min"),$=this._getMinMaxDate(a,"max"),_=a.drawMonth-V,aa=a.drawYear;if(0>_&&(_+=12,aa--),$)for(b=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-U[0]*U[1]+1,$.getDate())),b=Z&&Z>b?Z:b;this._daylightSavingAdjust(new Date(aa,_,1))>b;)_--,0>_&&(_=11,aa--);for(a.drawMonth=_,a.drawYear=aa,c=this._get(a,"prevText"),c=T?this.formatDate(c,this._daylightSavingAdjust(new Date(aa,_-W,1)),this._getFormatConfig(a)):c,d=this._canAdjustMonth(a,-1,aa,_)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")+"'>"+c+"</span></a>":S?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")+"'>"+c+"</span></a>",e=this._get(a,"nextText"),e=T?this.formatDate(e,this._daylightSavingAdjust(new Date(aa,_+W,1)),this._getFormatConfig(a)):e,f=this._canAdjustMonth(a,1,aa,_)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")+"'>"+e+"</span></a>":S?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")+"'>"+e+"</span></a>",g=this._get(a,"currentText"),h=this._get(a,"gotoCurrent")&&a.currentDay?Y:P,g=T?this.formatDate(g,h,this._getFormatConfig(a)):g,i=a.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(a,"closeText")+"</button>",j=R?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Q?i:"")+(this._isInRange(a,h)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+g+"</button>":"")+(Q?"":i)+"</div>":"",k=parseInt(this._get(a,"firstDay"),10),k=isNaN(k)?0:k,l=this._get(a,"showWeek"),m=this._get(a,"dayNames"),n=this._get(a,"dayNamesMin"),o=this._get(a,"monthNames"),p=this._get(a,"monthNamesShort"),q=this._get(a,"beforeShowDay"),r=this._get(a,"showOtherMonths"),s=this._get(a,"selectOtherMonths"),t=this._getDefaultDate(a),u="",w=0;U[0]>w;w++){for(x="",this.maxRows=4,y=0;U[1]>y;y++){if(z=this._daylightSavingAdjust(new Date(aa,_,a.selectedDay)),A=" ui-corner-all",B="",X){if(B+="<div class='ui-datepicker-group",U[1]>1)switch(y){case 0:B+=" ui-datepicker-group-first",A=" ui-corner-"+(Q?"right":"left");break;case U[1]-1:B+=" ui-datepicker-group-last",A=" ui-corner-"+(Q?"left":"right");break;default:B+=" ui-datepicker-group-middle",A=""}B+="'>"}for(B+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+A+"'>"+(/all|left/.test(A)&&0===w?Q?f:d:"")+(/all|right/.test(A)&&0===w?Q?d:f:"")+this._generateMonthYearHeader(a,_,aa,Z,$,w>0||y>0,o,p)+"</div><table class='ui-datepicker-calendar'><thead><tr>",C=l?"<th class='ui-datepicker-week-col'>"+this._get(a,"weekHeader")+"</th>":"",v=0;7>v;v++)D=(v+k)%7,C+="<th"+((v+k+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+m[D]+"'>"+n[D]+"</span></th>";for(B+=C+"</tr></thead><tbody>",E=this._getDaysInMonth(aa,_),aa===a.selectedYear&&_===a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,E)),F=(this._getFirstDayOfMonth(aa,_)-k+7)%7,G=Math.ceil((F+E)/7),H=X&&this.maxRows>G?this.maxRows:G,this.maxRows=H,I=this._daylightSavingAdjust(new Date(aa,_,1-F)),J=0;H>J;J++){for(B+="<tr>",K=l?"<td class='ui-datepicker-week-col'>"+this._get(a,"calculateWeek")(I)+"</td>":"",v=0;7>v;v++)L=q?q.apply(a.input?a.input[0]:null,[I]):[!0,""],M=I.getMonth()!==_,N=M&&!s||!L[0]||Z&&Z>I||$&&I>$,K+="<td class='"+((v+k+6)%7>=5?" ui-datepicker-week-end":"")+(M?" ui-datepicker-other-month":"")+(I.getTime()===z.getTime()&&_===a.selectedMonth&&a._keyEvent||t.getTime()===I.getTime()&&t.getTime()===z.getTime()?" "+this._dayOverClass:"")+(N?" "+this._unselectableClass+" ui-state-disabled":"")+(M&&!r?"":" "+L[1]+(I.getTime()===Y.getTime()?" "+this._currentClass:"")+(I.getTime()===P.getTime()?" ui-datepicker-today":""))+"'"+(M&&!r||!L[2]?"":" title='"+L[2].replace(/'/g,"&#39;")+"'")+(N?"":" data-handler='selectDay' data-event='click' data-month='"+I.getMonth()+"' data-year='"+I.getFullYear()+"'")+">"+(M&&!r?"&#xa0;":N?"<span class='ui-state-default'>"+I.getDate()+"</span>":"<a class='ui-state-default"+(I.getTime()===P.getTime()?" ui-state-highlight":"")+(I.getTime()===Y.getTime()?" ui-state-active":"")+(M?" ui-priority-secondary":"")+"' href='#'>"+I.getDate()+"</a>")+"</td>",I.setDate(I.getDate()+1),I=this._daylightSavingAdjust(I);B+=K+"</tr>"}_++,_>11&&(_=0,aa++),B+="</tbody></table>"+(X?"</div>"+(U[0]>0&&y===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=B}u+=x}return u+=j,a._keyEvent=!1,u},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o,p,q=this._get(a,"changeMonth"),r=this._get(a,"changeYear"),s=this._get(a,"showMonthAfterYear"),t="<div class='ui-datepicker-title'>",u="";if(f||!q)u+="<span class='ui-datepicker-month'>"+g[b]+"</span>";else{for(i=d&&d.getFullYear()===c,j=e&&e.getFullYear()===c,u+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",k=0;12>k;k++)(!i||k>=d.getMonth())&&(!j||e.getMonth()>=k)&&(u+="<option value='"+k+"'"+(k===b?" selected='selected'":"")+">"+h[k]+"</option>");u+="</select>"}if(s||(t+=u+(!f&&q&&r?"":"&#xa0;")),!a.yearshtml)if(a.yearshtml="",f||!r)t+="<span class='ui-datepicker-year'>"+c+"</span>";else{for(l=this._get(a,"yearRange").split(":"),m=(new Date).getFullYear(),n=function(a){var b=a.match(/c[+\-].*/)?c+parseInt(a.substring(1),10):a.match(/[+\-].*/)?m+parseInt(a,10):parseInt(a,10);return isNaN(b)?m:b},o=n(l[0]),p=Math.max(o,n(l[1]||"")),o=d?Math.max(o,d.getFullYear()):o,p=e?Math.min(p,e.getFullYear()):p,a.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";p>=o;o++)a.yearshtml+="<option value='"+o+"'"+(o===c?" selected='selected'":"")+">"+o+"</option>";a.yearshtml+="</select>",t+=a.yearshtml,a.yearshtml=null}return t+=this._get(a,"yearSuffix"),s&&(t+=(!f&&q&&r?"":"&#xa0;")+u),t+="</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"===c?b:0),e=a.drawMonth+("M"===c?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+("D"===c?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),("M"===c||"Y"===c)&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&c>b?c:b;return d&&e>d?d:e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return null==b?[1,1]:"number"==typeof b?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return new Date(a,b,1).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(0>b?b:e[0]*e[1]),1));return 0>b&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c,d,e=this._getMinMaxDate(a,"min"),f=this._getMinMaxDate(a,"max"),g=null,h=null,i=this._get(a,"yearRange");return i&&(c=i.split(":"),d=(new Date).getFullYear(),g=parseInt(c[0],10),h=parseInt(c[1],10),c[0].match(/[+\-].*/)&&(g+=d),c[1].match(/[+\-].*/)&&(h+=d)),(!e||b.getTime()>=e.getTime())&&(!f||b.getTime()<=f.getTime())&&(!g||b.getFullYear()>=g)&&(!h||h>=b.getFullYear())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),a.fn.datepicker=function(b){if(!this.length)return this;a.datepicker.initialized||(a(document).mousedown(a.datepicker._checkExternalClick),a.datepicker.initialized=!0),0===a("#"+a.datepicker._mainDivId).length&&a("body").append(a.datepicker.dpDiv);var c=Array.prototype.slice.call(arguments,1);return"string"!=typeof b||"isDisabled"!==b&&"getDate"!==b&&"widget"!==b?"option"===b&&2===arguments.length&&"string"==typeof arguments[1]?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c)):this.each(function(){"string"==typeof b?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this].concat(c)):a.datepicker._attachDatepicker(this,b)}):a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c))},a.datepicker=new c,a.datepicker.initialized=!1,a.datepicker.uuid=(new Date).getTime(),a.datepicker.version="1.10.4"}(jQuery),angular.module("pascalprecht.translate",["ng"]).run(["$translate",function(a){var b=a.storageKey(),c=a.storage();c?c.get(b)?a.use(c.get(b)):angular.isString(a.preferredLanguage())?a.use(a.preferredLanguage()):c.set(b,a.use()):angular.isString(a.preferredLanguage())&&a.use(a.preferredLanguage())}]),angular.module("pascalprecht.translate").provider("$translate",["$STORAGE_KEY",function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p={},q=[],r=a,s=[],t=!1,u="translate-cloak",v=!1,w=".",x=function(){var a=window.navigator;return(a.language||a.browserLanguage||a.systemLanguage||a.userLanguage||"").split("-").join("_")},y=function(a){for(var b=[],d=angular.lowercase(a),e=0,f=q.length;f>e;e++)b.push(angular.lowercase(q[e]));if(b.indexOf(d)>-1)return d;if(c){var g;for(var h in c)if(c.hasOwnProperty(h)&&angular.lowercase(h)===angular.lowercase(a)&&(g=c[h],b.indexOf(angular.lowercase(g))>-1))return g}var i=a.split("_");return i.length>1&&b.indexOf(angular.lowercase(i[0]))>-1?i[0]:void 0},z=function(a,b){if(!a&&!b)return p;if(a&&!b){if(angular.isString(a))return p[a]}else angular.isObject(p[a])||(p[a]={}),angular.extend(p[a],A(b));return this};this.translations=z,this.cloakClassName=function(a){return a?(u=a,this):u};var A=function(a,b,c,d){var e,f,g,h;b||(b=[]),c||(c={});for(e in a)a.hasOwnProperty(e)&&(h=a[e],angular.isObject(h)?A(h,b.concat(e),c,e):(f=b.length?""+b.join(w)+w+e:e,b.length&&e===d&&(g=""+b.join(w),c[g]="@:"+f),c[f]=h));return c};this.addInterpolation=function(a){return s.push(a),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(a){return k=a,this},this.useSanitizeValueStrategy=function(a){return t=a,this},this.preferredLanguage=function(a){return a?(b=a,this):b},this.translationNotFoundIndicator=function(a){return this.translationNotFoundIndicatorLeft(a),this.translationNotFoundIndicatorRight(a),this},this.translationNotFoundIndicatorLeft=function(a){return a?(n=a,this):n},this.translationNotFoundIndicatorRight=function(a){return a?(o=a,this):o},this.fallbackLanguage=function(a){return B(a),this};var B=function(a){return a?(angular.isString(a)?(e=!0,d=[a]):angular.isArray(a)&&(e=!1,d=a),angular.isString(b)&&d.push(b),this):e?d[0]:d};this.use=function(a){if(a){if(!p[a]&&!l)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+a+"'");return f=a,this}return f};var C=function(a){return a?void(r=a):i?i+r:r};this.storageKey=C,this.useUrlLoader=function(a){return this.useLoader("$translateUrlLoader",{url:a})},this.useStaticFilesLoader=function(a){return this.useLoader("$translateStaticFilesLoader",a)},this.useLoader=function(a,b){return l=a,m=b||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(a){return h=a,this},this.storagePrefix=function(a){return a?(i=a,this):a},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(a){return j=a,this},this.usePostCompiling=function(a){return v=!!a,this},this.determinePreferredLanguage=function(a){var c=a&&angular.isFunction(a)?a():x();return q.length?void(b=y(c)):(b=c,this)},this.registerAvailableLanguageKeys=function(a,b){return a?(q=a,b&&(c=b),this):q},this.$get=["$log","$injector","$rootScope","$q",function(a,c,i,q){var w,x,y,D=c.get(k||"$translateDefaultInterpolation"),E=!1,F={},G={},H=function(a,c,e){if(angular.isArray(a)){var g=function(a){for(var b={},d=[],f=function(a){var d=q.defer(),f=function(c){b[a]=c,d.resolve([a,c])};return H(a,c,e).then(f,f),d.promise},g=0,h=a.length;h>g;g++)d.push(f(a[g]));return q.all(d).then(function(){return b})};return g(a)}var i=q.defer();a=a.trim();var j=function(){var a=b?G[b]:G[f];if(x=0,h&&!a){var c=w.get(r);if(a=G[c],d&&d.length){var e=I(d,c);x=e>-1?e+=1:0,d.push(b)}}return a}();return j?j.then(function(){T(a,c,e).then(i.resolve,i.reject)},i.reject):T(a,c,e).then(i.resolve,i.reject),i.promise},I=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},J=function(a){return n&&(a=[n,a].join(" ")),o&&(a=[a,o].join(" ")),a},K=function(a){f=a,i.$emit("$translateChangeSuccess"),h&&w.set(H.storageKey(),f),D.setLocale(f),angular.forEach(F,function(a,b){F[b].setLocale(f)}),i.$emit("$translateChangeEnd")},L=function(a){if(!a)throw"No language key specified for loading.";var b=q.defer();return i.$emit("$translateLoadingStart"),E=!0,c.get(l)(angular.extend(m,{key:a})).then(function(c){var d={};i.$emit("$translateLoadingSuccess"),angular.isArray(c)?angular.forEach(c,function(a){angular.extend(d,A(a))}):angular.extend(d,A(c)),E=!1,b.resolve({key:a,table:d}),i.$emit("$translateLoadingEnd")},function(a){i.$emit("$translateLoadingError"),b.reject(a),i.$emit("$translateLoadingEnd")}),b.promise};if(h&&(w=c.get(h),!w.get||!w.set))throw new Error("Couldn't use storage '"+h+"', missing get() or set() method!");angular.isFunction(D.useSanitizeValueStrategy)&&D.useSanitizeValueStrategy(t),s.length&&angular.forEach(s,function(a){var d=c.get(a);d.setLocale(b||f),angular.isFunction(d.useSanitizeValueStrategy)&&d.useSanitizeValueStrategy(t),F[d.getInterpolationIdentifier()]=d});var M=function(a){var b=q.defer();return p.hasOwnProperty(a)?(b.resolve(p[a]),b.promise):(G[a].then(function(a){z(a.key,a.table),b.resolve(a.table)},b.reject),b.promise)},N=function(a,b,c,d){var e=q.defer();return M(a).then(function(g){g.hasOwnProperty(b)?(d.setLocale(a),e.resolve(d.interpolate(g[b],c)),d.setLocale(f)):e.reject()},e.reject),e.promise},O=function(a,b,c,d){var e,g=p[a];return g.hasOwnProperty(b)&&(d.setLocale(a),e=d.interpolate(g[b],c),d.setLocale(f)),e},P=function(a,b,c,e){var f=q.defer();if(a<d.length){var g=d[a];N(g,b,c,e).then(function(a){f.resolve(a)},function(){var d=P(a+1,b,c,e);f.resolve(d)})}else f.resolve(b);return f.promise},Q=function(a,b,c,e){var f;if(a<d.length){var g=d[a];f=O(g,b,c,e),f||(f=Q(a+1,b,c,e))}return f},R=function(a,b,c){return P(y>0?y:x,a,b,c)},S=function(a,b,c){return Q(y>0?y:x,a,b,c)},T=function(a,b,e){var g=q.defer(),h=f?p[f]:p,i=e?F[e]:D;if(h&&h.hasOwnProperty(a)){var k=h[a];"@:"===k.substr(0,2)?H(k.substr(2),b,e).then(g.resolve,g.reject):g.resolve(i.interpolate(k,b))}else j&&!E&&c.get(j)(a,f),f&&d&&d.length?R(a,b,i).then(function(a){g.resolve(a)},function(a){g.reject(J(a))}):g.reject(J(a));return g.promise},U=function(a,b,e){var g,h=f?p[f]:p,i=e?F[e]:D;if(h&&h.hasOwnProperty(a)){var k=h[a];g="@:"===k.substr(0,2)?U(k.substr(2),b,e):i.interpolate(k,b)}else j&&!E&&c.get(j)(a,f),f&&d&&d.length?(x=0,g=S(a,b,i)):g=J(a);return g};if(H.preferredLanguage=function(){return b},H.cloakClassName=function(){return u},H.fallbackLanguage=function(a){if(void 0!==a&&null!==a){if(B(a),l&&d&&d.length)for(var b=0,c=d.length;c>b;b++)G[d[b]]||(G[d[b]]=L(d[b]));H.use(H.use())}return e?d[0]:d},H.useFallbackLanguage=function(a){if(void 0!==a&&null!==a)if(a){var b=I(d,a);b>-1&&(y=b)}else y=0},H.proposedLanguage=function(){return g},H.storage=function(){return w},H.use=function(a){if(!a)return f;var b=q.defer();return i.$emit("$translateChangeStart"),!p[a]&&l?(g=a,G[a]=L(a).then(function(c){z(c.key,c.table),b.resolve(c.key),g===a&&(K(c.key),g=void 0)},function(a){g=void 0,i.$emit("$translateChangeError"),b.reject(a),i.$emit("$translateChangeEnd")})):(b.resolve(a),K(a)),b.promise},H.storageKey=function(){return C()},H.isPostCompilingEnabled=function(){return v},H.refresh=function(a){function b(){e.resolve(),i.$emit("$translateRefreshEnd")}function c(){e.reject(),i.$emit("$translateRefreshEnd")}if(!l)throw new Error("Couldn't refresh translation table, no loader registered!");var e=q.defer();if(i.$emit("$translateRefreshStart"),a)p[a]?L(a).then(function(c){z(c.key,c.table),a===f&&K(f),b()},c):c();else{var g=[];if(d&&d.length)for(var h=0,j=d.length;j>h;h++)g.push(L(d[h]));f&&g.push(L(f)),q.all(g).then(function(a){angular.forEach(a,function(a){p[a.key]&&delete p[a.key],z(a.key,a.table)}),f&&K(f),b()})}return e.promise},H.instant=function(a,e,g){if(angular.isArray(a)){for(var h={},i=0,k=a.length;k>i;i++)h[a[i]]=H.instant(a[i],e,g);return h}if("undefined"==typeof a||""===a)return a;a=a.trim();var l,m=[];b&&m.push(b),f&&m.push(f),d&&d.length&&(m=m.concat(d));for(var n=0,o=m.length;o>n;n++){var q=m[n];if(p[q]&&"undefined"!=typeof p[q][a]&&(l=U(a,e,g)),"undefined"!=typeof l)break}return l||""===l||(l=a,j&&!E&&c.get(j)(a,f)),l},l&&(angular.equals(p,{})&&H.use(H.use()),d&&d.length))for(var V=0,W=d.length;W>V;V++)G[d[V]]=L(d[V]);return H}]}]),angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",["$interpolate",function(a){var b,c={},d="default",e=null,f={escaped:function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=angular.element("<div></div>").text(a[c]).html());return b}},g=function(a){var b;return b=angular.isFunction(f[e])?f[e](a):a};return c.setLocale=function(a){b=a},c.getInterpolationIdentifier=function(){return d},c.useSanitizeValueStrategy=function(a){return e=a,this},c.interpolate=function(b,c){return e&&(c=g(c)),a(b)(c)},c}]),angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",["$translate","$q","$interpolate","$compile","$parse","$rootScope",function(a,b,c,d,e,f){return{restrict:"AE",scope:!0,compile:function(b,g){var h=g.translateValues?g.translateValues:void 0,i=g.translateInterpolation?g.translateInterpolation:void 0,j=b[0].outerHTML.match(/translate-value-+/i);return function(b,k,l){if(b.interpolateParams={},l.$observe("translate",function(a){b.translationId=angular.equals(a,"")||!angular.isDefined(a)?c(k.text().replace(/^\s+|\s+$/g,""))(b.$parent):a}),l.$observe("translateDefault",function(a){b.defaultText=a}),h&&l.$observe("translateValues",function(a){a&&b.$parent.$watch(function(){angular.extend(b.interpolateParams,e(a)(b.$parent))})}),j){var m=function(a){l.$observe(a,function(c){b.interpolateParams[angular.lowercase(a.substr(14,1))+a.substr(15)]=c})};for(var n in l)l.hasOwnProperty(n)&&"translateValue"===n.substr(0,14)&&"translateValues"!==n&&m(n)}var o=function(b,c,e){e||"undefined"==typeof c.defaultText||(b=c.defaultText),k.html(b);var f=a.isPostCompilingEnabled(),h="undefined"!=typeof g.translateCompile,i=h&&"false"!==g.translateCompile;(f&&!h||i)&&d(k.contents())(c)},p=function(){return h||j?function(){var c=function(){b.translationId&&b.interpolateParams&&a(b.translationId,b.interpolateParams,i).then(function(a){o(a,b,!0)},function(a){o(a,b,!1)})};b.$watch("interpolateParams",c,!0),b.$watch("translationId",c)}:function(){var c=b.$watch("translationId",function(d){b.translationId&&d&&a(d,{},i).then(function(a){o(a,b,!0),c()},function(a){o(a,b,!1),c()})},!0)}}(),q=f.$on("$translateChangeSuccess",p);p(),b.$on("$destroy",q)}}}}]),angular.module("pascalprecht.translate").directive("translateCloak",["$rootScope","$translate",function(a,b){return{compile:function(c){a.$on("$translateLoadingSuccess",function(){c.removeClass(b.cloakClassName())}),c.addClass(b.cloakClassName())}}}]),angular.module("pascalprecht.translate").filter("translate",["$parse","$translate",function(a,b){return function(c,d,e){return angular.isObject(d)||(d=a(d)()),b.instant(c,d,e)}}]),angular.module("pascalprecht.translate").factory("$translateUrlLoader",["$q","$http",function(a,b){return function(c){if(!c||!c.url)throw new Error("Couldn't use urlLoader since no url is given!");var d=a.defer();return b({url:c.url,params:{lang:c.key},method:"GET"}).success(function(a){d.resolve(a)}).error(function(){d.reject(c.key)}),d.promise}}]),jQuery(function(a){a.datepicker.regional.es={closeText:"Cerrar",prevText:"&#x3C;Ant",nextText:"Sig&#x3E;",currentText:"Hoy",monthNames:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],monthNamesShort:["ene","feb","mar","abr","may","jun","jul","ogo","sep","oct","nov","dic"],
dayNames:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"],dayNamesShort:["dom","lun","mar","mi","juv","vie","sb"],dayNamesMin:["D","L","M","X","J","V","S"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},a.datepicker.setDefaults(a.datepicker.regional.es)}),jQuery(function(a){a.datepicker.regional["en-GB"]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},a.datepicker.setDefaults(a.datepicker.regional["en-GB"])}),jQuery(function(a){a.datepicker.regional.fr={closeText:"Fermer",prevText:"Prcdent",nextText:"Suivant",currentText:"Aujourd'hui",monthNames:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"],monthNamesShort:["janv.","fvr.","mars","avril","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],dayNames:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],dayNamesShort:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],dayNamesMin:["D","L","M","M","J","V","S"],weekHeader:"Sem.",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},a.datepicker.setDefaults(a.datepicker.regional.fr)}),jQuery(function(a){a.datepicker.regional.it={closeText:"Chiudi",prevText:"&#x3C;Prec",nextText:"Succ&#x3E;",currentText:"Oggi",monthNames:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthNamesShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],dayNames:["Domenica","Luned","Marted","Mercoled","Gioved","Venerd","Sabato"],dayNamesShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],dayNamesMin:["Do","Lu","Ma","Me","Gi","Ve","Sa"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},a.datepicker.setDefaults(a.datepicker.regional.it)}),jQuery(function(a){a.datepicker.regional.ru={closeText:"",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},a.datepicker.setDefaults(a.datepicker.regional.ru)}),jQuery(function(a){a.datepicker.regional.ca={closeText:"Tanca",prevText:"Anterior",nextText:"Segent",currentText:"Avui",monthNames:["gener","febrer","mar","abril","maig","juny","juliol","agost","setembre","octubre","novembre","desembre"],monthNamesShort:["gen","feb","mar","abr","maig","juny","jul","ag","set","oct","nov","des"],dayNames:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"],dayNamesShort:["dg","dl","dt","dc","dj","dv","ds"],dayNamesMin:["dg","dl","dt","dc","dj","dv","ds"],weekHeader:"Set",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},a.datepicker.setDefaults(a.datepicker.regional.ca)}),jQuery(function(a){a.datepicker.regional["zh-CN"]={closeText:"",prevText:"&#x3C;",nextText:"&#x3E;",currentText:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:""},a.datepicker.setDefaults(a.datepicker.regional["zh-CN"])}),jQuery(function(a){a.datepicker.regional.de={closeText:"Schlieen",prevText:"&#x3C;Zurck",nextText:"Vor&#x3E;",currentText:"Heute",monthNames:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","Mr","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],dayNamesMin:["So","Mo","Di","Mi","Do","Fr","Sa"],weekHeader:"KW",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},a.datepicker.setDefaults(a.datepicker.regional.de)}),jQuery(function(a){a.datepicker.regional.nl={closeText:"Sluiten",prevText:"",nextText:"",currentText:"Vandaag",monthNames:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],monthNamesShort:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"],dayNames:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],dayNamesShort:["zon","maa","din","woe","don","vri","zat"],dayNamesMin:["zo","ma","di","wo","do","vr","za"],weekHeader:"Wk",dateFormat:"dd-mm-yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},a.datepicker.setDefaults(a.datepicker.regional.nl)}),jQuery(function(a){a.datepicker.regional.pt={closeText:"Fechar",prevText:"Anterior",nextText:"Seguinte",currentText:"Hoje",monthNames:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],dayNames:["Domingo","Segunda-feira","Tera-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sbado"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],dayNamesMin:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],weekHeader:"Sem",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},a.datepicker.setDefaults(a.datepicker.regional.pt)}),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdownToggle","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/popup.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(a,b,c){function d(a){for(var b in a)if(void 0!==f.style[b])return a[b]}var e=function(d,f,g){g=g||{};var h=a.defer(),i=e[g.animation?"animationEndEventName":"transitionEndEventName"],j=function(){c.$apply(function(){d.unbind(i,j),h.resolve(d)})};return i&&d.bind(i,j),b(function(){angular.isString(f)?d.addClass(f):angular.isFunction(f)?f(d):angular.isObject(f)&&d.css(f),i||h.resolve(d)}),h.promise.cancel=function(){i&&d.unbind(i,j),h.reject("Transition cancelled")},h.promise},f=document.createElement("trans"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},h={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return e.transitionEndEventName=d(g),e.animationEndEventName=d(h),e}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(a){return{link:function(b,c,d){function e(b){function d(){j===e&&(j=void 0)}var e=a(c,b);return j&&j.cancel(),j=e,e.then(d,d),e}function f(){k?(k=!1,g()):(c.removeClass("collapse").addClass("collapsing"),e({height:c[0].scrollHeight+"px"}).then(g))}function g(){c.removeClass("collapsing"),c.addClass("collapse in"),c.css({height:"auto"})}function h(){k?(k=!1,i(),c.css({height:0})):(c.css({height:c[0].scrollHeight+"px"}),c[0].offsetWidth,c.removeClass("collapse in").addClass("collapsing"),e({height:0}).then(i))}function i(){c.removeClass("collapsing"),c.addClass("collapse")}var j,k=!0;b.$watch(d.collapse,function(a){a?h():f()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(this.groups.indexOf(a),1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",["$parse",function(a){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(b,c,d,e){var f,g;e.addGroup(b),b.isOpen=!1,d.isOpen&&(f=a(d.isOpen),g=f.assign,b.$parent.$watch(f,function(a){b.isOpen=!!a})),b.$watch("isOpen",function(a){a&&e.closeOthers(b),g&&g(b.$parent,a)})}}}]).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",compile:function(a,b,c){return function(a,b,d,e){e.setHeading(c(a,function(){}))}}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(a,b,c,d){a.$watch(function(){return d[c.accordionTransclude]},function(a){a&&(b.html(""),b.append(a))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(a,b){a.closeable="close"in b}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"=",close:"&"}}}),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(a,b,c){b.addClass("ng-binding").data("$binding",c.bindHtmlUnsafe),a.$watch(c.bindHtmlUnsafe,function(a){b.html(a||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){var e=d[0],f=d[1];f.$render=function(){b.toggleClass(e.activeClass,angular.equals(f.$modelValue,a.$eval(c.btnRadio)))},b.bind(e.toggleEvent,function(){b.hasClass(e.activeClass)||a.$apply(function(){f.$setViewValue(a.$eval(c.btnRadio)),f.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){function e(){return g(c.btnCheckboxTrue,!0)}function f(){return g(c.btnCheckboxFalse,!1)}function g(b,c){var d=a.$eval(b);return angular.isDefined(d)?d:c}var h=d[0],i=d[1];i.$render=function(){b.toggleClass(h.activeClass,angular.equals(i.$modelValue,e()))},b.bind(h.toggleEvent,function(){a.$apply(function(){i.$setViewValue(b.hasClass(h.activeClass)?f():e()),i.$render()})})}}}),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$transition","$q",function(a,b,c){function d(){e();var c=+a.interval;!isNaN(c)&&c>=0&&(g=b(f,c))}function e(){g&&(b.cancel(g),g=null)}function f(){h?(a.next(),d()):a.pause()}var g,h,i=this,j=i.slides=[],k=-1;i.currentSlide=null;var l=!1;i.select=function(e,f){function g(){l||(i.currentSlide&&angular.isString(f)&&!a.noTransition&&e.$element?(e.$element.addClass(f),e.$element[0].offsetWidth,angular.forEach(j,function(a){angular.extend(a,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(e,{direction:f,active:!0,entering:!0}),angular.extend(i.currentSlide||{},{direction:f,leaving:!0}),a.$currentTransition=c(e.$element,{}),function(b,c){a.$currentTransition.then(function(){h(b,c)},function(){h(b,c)})}(e,i.currentSlide)):h(e,i.currentSlide),i.currentSlide=e,k=m,d())}function h(b,c){angular.extend(b,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(c||{},{direction:"",active:!1,leaving:!1,entering:!1}),a.$currentTransition=null}var m=j.indexOf(e);void 0===f&&(f=m>k?"next":"prev"),e&&e!==i.currentSlide&&(a.$currentTransition?(a.$currentTransition.cancel(),b(g)):g())},a.$on("$destroy",function(){l=!0}),i.indexOfSlide=function(a){return j.indexOf(a)},a.next=function(){var b=(k+1)%j.length;return a.$currentTransition?void 0:i.select(j[b],"next")},a.prev=function(){var b=0>k-1?j.length-1:k-1;return a.$currentTransition?void 0:i.select(j[b],"prev")},a.select=function(a){i.select(a)},a.isActive=function(a){return i.currentSlide===a},a.slides=function(){return j},a.$watch("interval",d),a.$on("$destroy",e),a.play=function(){h||(h=!0,d())},a.pause=function(){a.noPause||(h=!1,e())},i.addSlide=function(b,c){b.$element=c,j.push(b),1===j.length||b.active?(i.select(j[j.length-1]),1==j.length&&a.play()):b.active=!1},i.removeSlide=function(a){var b=j.indexOf(a);j.splice(b,1),j.length>0&&a.active?b>=j.length?i.select(j[b-1]):i.select(j[b]):k>b&&k--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",["$parse",function(a){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{},link:function(b,c,d,e){if(d.active){var f=a(d.active),g=f.assign,h=b.active=f(b.$parent);b.$watch(function(){var a=f(b.$parent);return a!==b.active&&(a!==h?h=b.active=a:g(b.$parent,a=h=b.active)),a})}e.addSlide(b,c),b.$on("$destroy",function(){e.removeSlide(b)}),b.$watch("active",function(a){a&&e.select(b)})}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a)[c]:a.style[c]}function d(a){return"static"===(c(a,"position")||"static")}var e=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);)e=e.offsetParent;return e||c};return{position:function(b){var c=this.offset(b),d={top:0,left:0},f=e(b[0]);f!=a[0]&&(d=this.offset(angular.element(f)),d.top+=f.clientTop-f.scrollTop,d.left+=f.clientLeft-f.scrollLeft);var g=b[0].getBoundingClientRect();return{width:g.width||b.prop("offsetWidth"),height:g.height||b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left}},offset:function(c){var d=c[0].getBoundingClientRect();return{width:d.width||c.prop("offsetWidth"),height:d.height||c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].body.scrollTop||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].body.scrollLeft||a[0].documentElement.scrollLeft)}}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.position"]).constant("datepickerConfig",{dayFormat:"dd",monthFormat:"MMMM",yearFormat:"yyyy",dayHeaderFormat:"EEE",dayTitleFormat:"MMMM yyyy",monthTitleFormat:"yyyy",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","dateFilter","datepickerConfig",function(a,b,c,d){function e(b,c){return angular.isDefined(b)?a.$parent.$eval(b):c}function f(a,b){return new Date(a,b,0).getDate()}function g(a,b){for(var c=new Array(b),d=a,e=0;b>e;)c[e++]=new Date(d),d.setDate(d.getDate()+1);return c}function h(a,b,d,e){return{date:a,label:c(a,b),selected:!!d,secondary:!!e}}var i={day:e(b.dayFormat,d.dayFormat),month:e(b.monthFormat,d.monthFormat),year:e(b.yearFormat,d.yearFormat),dayHeader:e(b.dayHeaderFormat,d.dayHeaderFormat),dayTitle:e(b.dayTitleFormat,d.dayTitleFormat),monthTitle:e(b.monthTitleFormat,d.monthTitleFormat)},j=e(b.startingDay,d.startingDay),k=e(b.yearRange,d.yearRange);this.minDate=d.minDate?new Date(d.minDate):null,this.maxDate=d.maxDate?new Date(d.maxDate):null,this.modes=[{name:"day",getVisibleDates:function(a,b){var d=a.getFullYear(),e=a.getMonth(),k=new Date(d,e,1),l=j-k.getDay(),m=l>0?7-l:-l,n=new Date(k),o=0;m>0&&(n.setDate(-m+1),o+=m),o+=f(d,e+1),o+=(7-o%7)%7;for(var p=g(n,o),q=new Array(7),r=0;o>r;r++){var s=new Date(p[r]);p[r]=h(s,i.day,b&&b.getDate()===s.getDate()&&b.getMonth()===s.getMonth()&&b.getFullYear()===s.getFullYear(),s.getMonth()!==e)}for(var t=0;7>t;t++)q[t]=c(p[t].date,i.dayHeader);return{objects:p,title:c(a,i.dayTitle),labels:q}},compare:function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},split:7,step:{months:1}},{name:"month",getVisibleDates:function(a,b){for(var d=new Array(12),e=a.getFullYear(),f=0;12>f;f++){var g=new Date(e,f,1);d[f]=h(g,i.month,b&&b.getMonth()===f&&b.getFullYear()===e)}return{objects:d,title:c(a,i.monthTitle)}},compare:function(a,b){return new Date(a.getFullYear(),a.getMonth())-new Date(b.getFullYear(),b.getMonth())},split:3,step:{years:1}},{name:"year",getVisibleDates:function(a,b){for(var c=new Array(k),d=a.getFullYear(),e=parseInt((d-1)/k,10)*k+1,f=0;k>f;f++){var g=new Date(e+f,0,1);c[f]=h(g,i.year,b&&b.getFullYear()===g.getFullYear())}return{objects:c,title:[c[0].label,c[k-1].label].join(" - ")}},compare:function(a,b){return a.getFullYear()-b.getFullYear()},split:5,step:{years:k}}],this.isDisabled=function(b,c){var d=this.modes[c||0];return this.minDate&&d.compare(b,this.minDate)<0||this.maxDate&&d.compare(b,this.maxDate)>0||a.dateDisabled&&a.dateDisabled({date:b,mode:d.name})}}]).directive("datepicker",["dateFilter","$parse","datepickerConfig","$log",function(a,b,c,d){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(a,e,f,g){function h(){a.showWeekNumbers=0===o&&q}function i(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c}function j(b){var c=null,e=!0;n.$modelValue&&(c=new Date(n.$modelValue),isNaN(c)?(e=!1,d.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):b&&(p=c)),n.$setValidity("date",e);var f=m.modes[o],g=f.getVisibleDates(p,c);angular.forEach(g.objects,function(a){a.disabled=m.isDisabled(a.date,o)}),n.$setValidity("date-disabled",!c||!m.isDisabled(c)),a.rows=i(g.objects,f.split),a.labels=g.labels||[],a.title=g.title}function k(a){o=a,h(),j()}function l(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}var m=g[0],n=g[1];if(n){var o=0,p=new Date,q=c.showWeeks;f.showWeeks?a.$parent.$watch(b(f.showWeeks),function(a){q=!!a,h()}):h(),f.min&&a.$parent.$watch(b(f.min),function(a){m.minDate=a?new Date(a):null,j()}),f.max&&a.$parent.$watch(b(f.max),function(a){m.maxDate=a?new Date(a):null,j()}),n.$render=function(){j(!0)},a.select=function(a){if(0===o){var b=n.$modelValue?new Date(n.$modelValue):new Date(0,0,0,0,0,0,0);b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),n.$setViewValue(b),j(!0)}else p=a,k(o-1)},a.move=function(a){var b=m.modes[o].step;p.setMonth(p.getMonth()+a*(b.months||0)),p.setFullYear(p.getFullYear()+a*(b.years||0)),j()},a.toggleMode=function(){k((o+1)%m.modes.length)},a.getWeekNumber=function(b){return 0===o&&a.showWeekNumbers&&7===b.length?l(b[0].date):null}}}}}]).constant("datepickerPopupConfig",{dateFormat:"yyyy-MM-dd",currentText:"Today",toggleWeeksText:"Weeks",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","datepickerPopupConfig","datepickerConfig",function(a,b,c,d,e,f,g){return{restrict:"EA",require:"ngModel",link:function(h,i,j,k){function l(a){u?u(h,!!a):q.isOpen=!!a}function m(a){if(a){if(angular.isDate(a))return k.$setValidity("date",!0),a;if(angular.isString(a)){var b=new Date(a);return isNaN(b)?void k.$setValidity("date",!1):(k.$setValidity("date",!0),b)}return void k.$setValidity("date",!1)}return k.$setValidity("date",!0),null}function n(a,c,d){a&&(h.$watch(b(a),function(a){q[c]=a}),y.attr(d||c,c))}function o(){q.position=s?d.offset(i):d.position(i),q.position.top=q.position.top+i.prop("offsetHeight")}var p,q=h.$new(),r=angular.isDefined(j.closeOnDateSelection)?h.$eval(j.closeOnDateSelection):f.closeOnDateSelection,s=angular.isDefined(j.datepickerAppendToBody)?h.$eval(j.datepickerAppendToBody):f.appendToBody;j.$observe("datepickerPopup",function(a){p=a||f.dateFormat,k.$render()}),q.showButtonBar=angular.isDefined(j.showButtonBar)?h.$eval(j.showButtonBar):f.showButtonBar,h.$on("$destroy",function(){C.remove(),q.$destroy()}),j.$observe("currentText",function(a){q.currentText=angular.isDefined(a)?a:f.currentText}),j.$observe("toggleWeeksText",function(a){q.toggleWeeksText=angular.isDefined(a)?a:f.toggleWeeksText}),j.$observe("clearText",function(a){q.clearText=angular.isDefined(a)?a:f.clearText}),j.$observe("closeText",function(a){q.closeText=angular.isDefined(a)?a:f.closeText});var t,u;j.isOpen&&(t=b(j.isOpen),u=t.assign,h.$watch(t,function(a){q.isOpen=!!a})),q.isOpen=t?t(h):!1;var v=function(a){q.isOpen&&a.target!==i[0]&&q.$apply(function(){l(!1)})},w=function(){q.$apply(function(){l(!0)})},x=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");x.attr({"ng-model":"date","ng-change":"dateSelection()"});var y=angular.element(x.children()[0]),z={};j.datepickerOptions&&(z=h.$eval(j.datepickerOptions),y.attr(angular.extend({},z))),k.$parsers.unshift(m),q.dateSelection=function(a){angular.isDefined(a)&&(q.date=a),k.$setViewValue(q.date),k.$render(),r&&l(!1)},i.bind("input change keyup",function(){q.$apply(function(){q.date=k.$modelValue})}),k.$render=function(){var a=k.$viewValue?e(k.$viewValue,p):"";i.val(a),q.date=k.$modelValue},n(j.min,"min"),n(j.max,"max"),j.showWeeks?n(j.showWeeks,"showWeeks","show-weeks"):(q.showWeeks="show-weeks"in z?z["show-weeks"]:g.showWeeks,y.attr("show-weeks","showWeeks")),j.dateDisabled&&y.attr("date-disabled",j.dateDisabled);var A=!1,B=!1;q.$watch("isOpen",function(a){a?(o(),c.bind("click",v),B&&i.unbind("focus",w),i[0].focus(),A=!0):(A&&c.unbind("click",v),i.bind("focus",w),B=!0),u&&u(h,a)}),q.today=function(){q.dateSelection(new Date)},q.clear=function(){q.dateSelection(null)};var C=a(x)(q);s?c.find("body").append(C):i.after(C)}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(a,b){b.bind("click",function(a){a.preventDefault(),a.stopPropagation()})}}}),angular.module("ui.bootstrap.dropdownToggle",[]).directive("dropdownToggle",["$document","$location",function(a){var b=null,c=angular.noop;return{restrict:"CA",link:function(d,e){d.$watch("$location.path",function(){c()}),e.parent().bind("click",function(){c()}),e.bind("click",function(d){var f=e===b;d.preventDefault(),d.stopPropagation(),b&&c(),f||e.hasClass("disabled")||e.prop("disabled")||(e.parent().addClass("open"),b=e,c=function(d){d&&(d.preventDefault(),d.stopPropagation()),a.unbind("click",c),e.parent().removeClass("open"),c=angular.noop,b=null},a.bind("click",c))})}}}]),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b==a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b==a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}).directive("modalBackdrop",["$timeout",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(b){b.animate=!1,a(function(){b.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(a,b){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:"template/modal/window.html",link:function(c,d,e){c.windowClass=e.windowClass||"",b(function(){c.animate=!0,d[0].focus()}),c.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!=c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))}}}}]).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(a,b,c,d,e,f){function g(){for(var a=-1,b=n.keys(),c=0;c<b.length;c++)n.get(b[c]).value.backdrop&&(a=c);return a}function h(a){var b=c.find("body").eq(0),d=n.get(a).value;n.remove(a),j(d.modalDomEl,d.modalScope,300,i),b.toggleClass(m,n.length()>0)}function i(){if(k&&-1==g()){var a=l;j(k,l,150,function(){a.$destroy(),a=null}),k=void 0,l=void 0}}function j(c,d,e,f){function g(){g.done||(g.done=!0,c.remove(),f&&f())}d.animate=!1;var h=a.transitionEndEventName;if(h){var i=b(g,e);c.bind(h,function(){b.cancel(i),g(),d.$apply()})}else b(g,0)}var k,l,m="modal-open",n=f.createNew(),o={};return e.$watch(g,function(a){l&&(l.index=a)}),c.bind("keydown",function(a){var b;27===a.which&&(b=n.top(),b&&b.value.keyboard&&e.$apply(function(){o.dismiss(b.key)}))}),o.open=function(a,b){n.add(a,{deferred:b.deferred,modalScope:b.scope,backdrop:b.backdrop,keyboard:b.keyboard});var f=c.find("body").eq(0),h=g();h>=0&&!k&&(l=e.$new(!0),l.index=h,k=d("<div modal-backdrop></div>")(l),f.append(k));var i=angular.element("<div modal-window></div>");i.attr("window-class",b.windowClass),i.attr("index",n.length()-1),i.attr("animate","animate"),i.html(b.content);var j=d(i)(b.scope);n.top().value.modalDomEl=j,f.append(j),f.addClass(m)},o.close=function(a,b){var c=n.get(a).value;c&&(c.deferred.resolve(b),h(a))},o.dismiss=function(a,b){var c=n.get(a).value;c&&(c.deferred.reject(b),h(a))},o.dismissAll=function(a){for(var b=this.getTop();b;)this.dismiss(b.key,a),b=this.getTop()},o.getTop=function(){return n.top()},o}]).provider("$modal",function(){var a={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(b,c,d,e,f,g,h){function i(a){return a.template?d.when(a.template):e.get(a.templateUrl,{cache:f}).then(function(a){return a.data})}function j(a){var c=[];return angular.forEach(a,function(a){(angular.isFunction(a)||angular.isArray(a))&&c.push(d.when(b.invoke(a)))}),c}var k={};return k.open=function(b){var e=d.defer(),f=d.defer(),k={result:e.promise,opened:f.promise,close:function(a){h.close(k,a)},dismiss:function(a){h.dismiss(k,a)}};if(b=angular.extend({},a.options,b),b.resolve=b.resolve||{},!b.template&&!b.templateUrl)throw new Error("One of template or templateUrl options is required.");var l=d.all([i(b)].concat(j(b.resolve)));return l.then(function(a){var d=(b.scope||c).$new();d.$close=k.close,d.$dismiss=k.dismiss;var f,i={},j=1;b.controller&&(i.$scope=d,i.$modalInstance=k,angular.forEach(b.resolve,function(b,c){i[c]=a[j++]}),f=g(b.controller,i)),h.open(k,{scope:d,deferred:e,content:a[0],backdrop:b.backdrop,keyboard:b.keyboard,windowClass:b.windowClass})},function(a){e.reject(a)}),l.then(function(){f.resolve(!0)},function(){f.reject(!1)}),k},k}]};return a}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse","$interpolate",function(a,b,c,d){var e=this,f=b.numPages?c(b.numPages).assign:angular.noop;this.init=function(d){b.itemsPerPage?a.$parent.$watch(c(b.itemsPerPage),function(b){e.itemsPerPage=parseInt(b,10),a.totalPages=e.calculateTotalPages()}):this.itemsPerPage=d},this.noPrevious=function(){return 1===this.page},this.noNext=function(){return this.page===a.totalPages},this.isActive=function(a){return this.page===a},this.calculateTotalPages=function(){var b=this.itemsPerPage<1?1:Math.ceil(a.totalItems/this.itemsPerPage);return Math.max(b||0,1)},this.getAttributeValue=function(b,c,e){return angular.isDefined(b)?e?d(b)(a.$parent):a.$parent.$eval(b):c},this.render=function(){this.page=parseInt(a.page,10)||1,this.page>0&&this.page<=a.totalPages&&(a.pages=this.getPages(this.page,a.totalPages))},a.selectPage=function(b){!e.isActive(b)&&b>0&&b<=a.totalPages&&(a.page=b,a.onSelectPage({page:b}))},a.$watch("page",function(){e.render()}),a.$watch("totalItems",function(){a.totalPages=e.calculateTotalPages()}),a.$watch("totalPages",function(b){f(a.$parent,b),e.page>b?a.selectPage(b):e.render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(a,b){return{restrict:"EA",scope:{page:"=",totalItems:"=",onSelectPage:" &"},controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(c,d,e,f){function g(a,b,c,d){return{number:a,text:b,active:c,disabled:d}}var h,i=f.getAttributeValue(e.boundaryLinks,b.boundaryLinks),j=f.getAttributeValue(e.directionLinks,b.directionLinks),k=f.getAttributeValue(e.firstText,b.firstText,!0),l=f.getAttributeValue(e.previousText,b.previousText,!0),m=f.getAttributeValue(e.nextText,b.nextText,!0),n=f.getAttributeValue(e.lastText,b.lastText,!0),o=f.getAttributeValue(e.rotate,b.rotate);f.init(b.itemsPerPage),e.maxSize&&c.$parent.$watch(a(e.maxSize),function(a){h=parseInt(a,10),f.render()}),f.getPages=function(a,b){var c=[],d=1,e=b,p=angular.isDefined(h)&&b>h;p&&(o?(d=Math.max(a-Math.floor(h/2),1),e=d+h-1,e>b&&(e=b,d=e-h+1)):(d=(Math.ceil(a/h)-1)*h+1,e=Math.min(d+h-1,b)));for(var q=d;e>=q;q++){var r=g(q,q,f.isActive(q),!1);c.push(r)}if(p&&!o){if(d>1){var s=g(d-1,"...",!1,!1);c.unshift(s)}if(b>e){var t=g(e+1,"...",!1,!1);c.push(t)}}if(j){var u=g(a-1,l,!1,f.noPrevious());c.unshift(u);var v=g(a+1,m,!1,f.noNext());c.push(v)}if(i){var w=g(1,k,!1,f.noPrevious());c.unshift(w);var x=g(b,n,!1,f.noNext());c.push(x)}return c}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:" Previous",nextText:"Next ",align:!0}).directive("pager",["pagerConfig",function(a){return{restrict:"EA",scope:{page:"=",totalItems:"=",onSelectPage:" &"},controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(b,c,d,e){function f(a,b,c,d,e){return{number:a,
text:b,disabled:c,previous:i&&d,next:i&&e}}var g=e.getAttributeValue(d.previousText,a.previousText,!0),h=e.getAttributeValue(d.nextText,a.nextText,!0),i=e.getAttributeValue(d.align,a.align);e.init(a.itemsPerPage),e.getPages=function(a){return[f(a-1,g,e.noPrevious(),!0,!1),f(a+1,h,e.noNext(),!1,!0)]}}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",animation:!0,popupDelay:0},c={mouseenter:"mouseleave",click:"click",focus:"blur"},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$parse","$document","$position","$interpolate",function(e,f,g,h,i,j,k){return function(e,l,m){function n(a){var b=a||o.trigger||m,d=c[b]||b;return{show:b,hide:d}}var o=angular.extend({},b,d),p=a(e),q=k.startSymbol(),r=k.endSymbol(),s="<div "+p+'-popup title="'+q+"tt_title"+r+'" content="'+q+"tt_content"+r+'" placement="'+q+"tt_placement"+r+'" animation="tt_animation" is-open="tt_isOpen"></div>';return{restrict:"EA",scope:!0,compile:function(){var a=f(s);return function(b,c,d){function f(){b.tt_isOpen?m():k()}function k(){(!z||b.$eval(d[l+"Enable"]))&&(b.tt_popupDelay?(v=g(p,b.tt_popupDelay,!1),v.then(function(a){a()})):p()())}function m(){b.$apply(function(){q()})}function p(){return b.tt_content?(r(),u&&g.cancel(u),t.css({top:0,left:0,display:"block"}),w?i.find("body").append(t):c.after(t),A(),b.tt_isOpen=!0,b.$digest(),A):angular.noop}function q(){b.tt_isOpen=!1,g.cancel(v),b.tt_animation?u=g(s,500):s()}function r(){t&&s(),t=a(b,function(){}),b.$digest()}function s(){t&&(t.remove(),t=null)}var t,u,v,w=angular.isDefined(o.appendToBody)?o.appendToBody:!1,x=n(void 0),y=!1,z=angular.isDefined(d[l+"Enable"]),A=function(){var a,d,e,f;switch(a=w?j.offset(c):j.position(c),d=t.prop("offsetWidth"),e=t.prop("offsetHeight"),b.tt_placement){case"right":f={top:a.top+a.height/2-e/2,left:a.left+a.width};break;case"bottom":f={top:a.top+a.height,left:a.left+a.width/2-d/2};break;case"left":f={top:a.top+a.height/2-e/2,left:a.left-d};break;default:f={top:a.top-e,left:a.left+a.width/2-d/2}}f.top+="px",f.left+="px",t.css(f)};b.tt_isOpen=!1,d.$observe(e,function(a){b.tt_content=a,!a&&b.tt_isOpen&&q()}),d.$observe(l+"Title",function(a){b.tt_title=a}),d.$observe(l+"Placement",function(a){b.tt_placement=angular.isDefined(a)?a:o.placement}),d.$observe(l+"PopupDelay",function(a){var c=parseInt(a,10);b.tt_popupDelay=isNaN(c)?o.popupDelay:c});var B=function(){y&&(c.unbind(x.show,k),c.unbind(x.hide,m))};d.$observe(l+"Trigger",function(a){B(),x=n(a),x.show===x.hide?c.bind(x.show,f):(c.bind(x.show,k),c.bind(x.hide,m)),y=!0});var C=b.$eval(d[l+"Animation"]);b.tt_animation=angular.isDefined(C)?!!C:o.animation,d.$observe(l+"AppendToBody",function(a){w=angular.isDefined(a)?h(a)(b):w}),w&&b.$on("$locationChangeSuccess",function(){b.tt_isOpen&&q()}),b.$on("$destroy",function(){g.cancel(u),g.cancel(v),B(),s()})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(a){return a("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(a){return a("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(a){return a("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",["ui.bootstrap.transition"]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig","$transition",function(a,b,c,d){var e=this,f=[],g=angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max,h=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.addBar=function(a,b){var c=0,d=a.$parent.$index;angular.isDefined(d)&&f[d]&&(c=f[d].value),f.push(a),this.update(b,a.value,c),a.$watch("value",function(a,c){a!==c&&e.update(b,a,c)}),a.$on("$destroy",function(){e.removeBar(a)})},this.update=function(a,b,c){var e=this.getPercentage(b);h?(a.css("width",this.getPercentage(c)+"%"),d(a,{width:e+"%"})):a.css({transition:"none",width:e+"%"})},this.removeBar=function(a){f.splice(f.indexOf(a),1)},this.getPercentage=function(a){return Math.round(100*a/g)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},template:'<div class="progress" ng-transclude></div>'}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(a,b,c,d){d.addBar(a,b)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","$parse","ratingConfig",function(a,b,c,d){this.maxRange=angular.isDefined(b.max)?a.$parent.$eval(b.max):d.max,this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):d.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):d.stateOff,this.createRateObjects=function(a){for(var b={stateOn:this.stateOn,stateOff:this.stateOff},c=0,d=a.length;d>c;c++)a[c]=angular.extend({index:c},b,a[c]);return a},a.range=angular.isDefined(b.ratingStates)?this.createRateObjects(angular.copy(a.$parent.$eval(b.ratingStates))):this.createRateObjects(new Array(this.maxRange)),a.rate=function(b){a.value===b||a.readonly||(a.value=b)},a.enter=function(b){a.readonly||(a.val=b),a.onHover({value:b})},a.reset=function(){a.val=angular.copy(a.value),a.onLeave()},a.$watch("value",function(b){a.val=b}),a.readonly=!1,b.readonly&&a.$parent.$watch(c(b.readonly),function(b){a.readonly=!!b})}]).directive("rating",function(){return{restrict:"EA",scope:{value:"=",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(a){a.active=!1}),a.active=!0},b.addTab=function(a){c.push(a),(1===c.length||a.active)&&b.select(a)},b.removeTab=function(a){var d=c.indexOf(a);if(a.active&&c.length>1){var e=d==c.length-1?d-1:d+1;b.select(c[e])}c.splice(d,1)}}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):!1,a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):!1,a.type=angular.isDefined(c.type)?a.$parent.$eval(c.type):"tabs"}}}).directive("tab",["$parse",function(a){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(b,c,d){return function(b,c,e,f){var g,h;e.active?(g=a(e.active),h=g.assign,b.$parent.$watch(g,function(a,c){a!==c&&(b.active=!!a)}),b.active=g(b.$parent)):h=g=angular.noop,b.$watch("active",function(a){h(b.$parent,a),a?(f.select(b),b.onSelect()):b.onDeselect()}),b.disabled=!1,e.disabled&&b.$parent.$watch(a(e.disabled),function(a){b.disabled=!!a}),b.select=function(){b.disabled||(b.active=!0)},f.addTab(b),b.$on("$destroy",function(){f.removeTab(b)}),b.$transcludeFn=d}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}]).directive("tabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||"tab-heading"===a.tagName.toLowerCase()||"data-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(b,c,d){var e=b.$eval(d.tabContentTransclude);e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).directive("timepicker",["$parse","$log","timepickerConfig","$locale",function(a,b,c,d){return{restrict:"EA",require:"?^ngModel",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(e,f,g,h){function i(){var a=parseInt(e.hours,10),b=e.showMeridian?a>0&&13>a:a>=0&&24>a;return b?(e.showMeridian&&(12===a&&(a=0),e.meridian===q[1]&&(a+=12)),a):void 0}function j(){var a=parseInt(e.minutes,10);return a>=0&&60>a?a:void 0}function k(a){return angular.isDefined(a)&&a.toString().length<2?"0"+a:a}function l(a){m(),h.$setViewValue(new Date(p)),n(a)}function m(){h.$setValidity("time",!0),e.invalidHours=!1,e.invalidMinutes=!1}function n(a){var b=p.getHours(),c=p.getMinutes();e.showMeridian&&(b=0===b||12===b?12:b%12),e.hours="h"===a?b:k(b),e.minutes="m"===a?c:k(c),e.meridian=p.getHours()<12?q[0]:q[1]}function o(a){var b=new Date(p.getTime()+6e4*a);p.setHours(b.getHours(),b.getMinutes()),l()}if(h){var p=new Date,q=angular.isDefined(g.meridians)?e.$parent.$eval(g.meridians):c.meridians||d.DATETIME_FORMATS.AMPMS,r=c.hourStep;g.hourStep&&e.$parent.$watch(a(g.hourStep),function(a){r=parseInt(a,10)});var s=c.minuteStep;g.minuteStep&&e.$parent.$watch(a(g.minuteStep),function(a){s=parseInt(a,10)}),e.showMeridian=c.showMeridian,g.showMeridian&&e.$parent.$watch(a(g.showMeridian),function(a){if(e.showMeridian=!!a,h.$error.time){var b=i(),c=j();angular.isDefined(b)&&angular.isDefined(c)&&(p.setHours(b),l())}else n()});var t=f.find("input"),u=t.eq(0),v=t.eq(1),w=angular.isDefined(g.mousewheel)?e.$eval(g.mousewheel):c.mousewheel;if(w){var x=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};u.bind("mousewheel wheel",function(a){e.$apply(x(a)?e.incrementHours():e.decrementHours()),a.preventDefault()}),v.bind("mousewheel wheel",function(a){e.$apply(x(a)?e.incrementMinutes():e.decrementMinutes()),a.preventDefault()})}if(e.readonlyInput=angular.isDefined(g.readonlyInput)?e.$eval(g.readonlyInput):c.readonlyInput,e.readonlyInput)e.updateHours=angular.noop,e.updateMinutes=angular.noop;else{var y=function(a,b){h.$setViewValue(null),h.$setValidity("time",!1),angular.isDefined(a)&&(e.invalidHours=a),angular.isDefined(b)&&(e.invalidMinutes=b)};e.updateHours=function(){var a=i();angular.isDefined(a)?(p.setHours(a),l("h")):y(!0)},u.bind("blur",function(){!e.validHours&&e.hours<10&&e.$apply(function(){e.hours=k(e.hours)})}),e.updateMinutes=function(){var a=j();angular.isDefined(a)?(p.setMinutes(a),l("m")):y(void 0,!0)},v.bind("blur",function(){!e.invalidMinutes&&e.minutes<10&&e.$apply(function(){e.minutes=k(e.minutes)})})}h.$render=function(){var a=h.$modelValue?new Date(h.$modelValue):null;isNaN(a)?(h.$setValidity("time",!1),b.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(a&&(p=a),m(),n())},e.incrementHours=function(){o(60*r)},e.decrementHours=function(){o(60*-r)},e.incrementMinutes=function(){o(s)},e.decrementMinutes=function(){o(-s)},e.toggleMeridian=function(){o(720*(p.getHours()<12?1:-1))}}}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(a){var b=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error("Expected typeahead specification in form of '_modelValue_ (as _label_)? for _item_ in _collection_' but got '"+c+"'.");return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(a,b,c,d,e,f,g){var h=[9,13,27,38,40];return{require:"ngModel",link:function(i,j,k,l){var m,n=i.$eval(k.typeaheadMinLength)||1,o=i.$eval(k.typeaheadWaitMs)||0,p=i.$eval(k.typeaheadEditable)!==!1,q=b(k.typeaheadLoading).assign||angular.noop,r=b(k.typeaheadOnSelect),s=k.typeaheadInputFormatter?b(k.typeaheadInputFormatter):void 0,t=k.typeaheadAppendToBody?b(k.typeaheadAppendToBody):!1,u=b(k.ngModel).assign,v=g.parse(k.typeahead),w=angular.element("<div typeahead-popup></div>");w.attr({matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(k.typeaheadTemplateUrl)&&w.attr("template-url",k.typeaheadTemplateUrl);var x=i.$new();i.$on("$destroy",function(){x.$destroy()});var y=function(){x.matches=[],x.activeIdx=-1},z=function(a){var b={$viewValue:a};q(i,!0),c.when(v.source(i,b)).then(function(c){if(a===l.$viewValue&&m){if(c.length>0){x.activeIdx=0,x.matches.length=0;for(var d=0;d<c.length;d++)b[v.itemName]=c[d],x.matches.push({label:v.viewMapper(x,b),model:c[d]});x.query=a,x.position=t?f.offset(j):f.position(j),x.position.top=x.position.top+j.prop("offsetHeight")}else y();q(i,!1)}},function(){y(),q(i,!1)})};y(),x.query=void 0;var A;l.$parsers.unshift(function(a){return m=!0,a&&a.length>=n?o>0?(A&&d.cancel(A),A=d(function(){z(a)},o)):z(a):(q(i,!1),y()),p?a:a?void l.$setValidity("editable",!1):(l.$setValidity("editable",!0),a)}),l.$formatters.push(function(a){var b,c,d={};return s?(d.$model=a,s(i,d)):(d[v.itemName]=a,b=v.viewMapper(i,d),d[v.itemName]=void 0,c=v.viewMapper(i,d),b!==c?b:a)}),x.select=function(a){var b,c,d={};d[v.itemName]=c=x.matches[a].model,b=v.modelMapper(i,d),u(i,b),l.$setValidity("editable",!0),r(i,{$item:c,$model:b,$label:v.viewMapper(i,d)}),y(),j[0].focus()},j.bind("keydown",function(a){0!==x.matches.length&&-1!==h.indexOf(a.which)&&(a.preventDefault(),40===a.which?(x.activeIdx=(x.activeIdx+1)%x.matches.length,x.$digest()):38===a.which?(x.activeIdx=(x.activeIdx?x.activeIdx:x.matches.length)-1,x.$digest()):13===a.which||9===a.which?x.$apply(function(){x.select(x.activeIdx)}):27===a.which&&(a.stopPropagation(),y(),x.$digest()))}),j.bind("blur",function(){m=!1});var B=function(a){j[0]!==a.target&&(y(),x.$digest())};e.bind("click",B),i.$on("$destroy",function(){e.unbind("click",B)});var C=a(w)(x);t?e.find("body").append(C):j.after(C)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(a,b,c){a.templateUrl=c.templateUrl,a.isOpen=function(){return a.matches.length>0},a.isActive=function(b){return a.active==b},a.selectActive=function(b){a.active=b},a.selectMatch=function(b){a.select({activeIdx:b})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(a,b,c,d){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(e,f,g){var h=d(g.templateUrl)(e.$parent)||"template/typeahead/typeahead-match.html";a.get(h,{cache:b}).success(function(a){f.replaceWith(c(a.trim())(e))})}}}]).filter("typeaheadHighlight",function(){function a(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(b,c){return c?b.replace(new RegExp(a(c),"gi"),"<strong>$&</strong>"):b}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion-group.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a class="accordion-toggle" ng-click="isOpen = !isOpen" accordion-transclude="heading">{{heading}}</a>\n    </h4>\n  </div>\n  <div class="panel-collapse" collapse="!isOpen">\n	  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("template/alert/alert.html","<div class='alert' ng-class='\"alert-\" + (type || \"warning\")'>\n    <button ng-show='closeable' type='button' class='close' ng-click='close()'>&times;</button>\n    <div ng-transclude></div>\n</div>\n")}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(a){a.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel">\n    <ol class="carousel-indicators" ng-show="slides().length > 1">\n        <li ng-repeat="slide in slides()" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides().length > 1"><span class="icon-prev"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides().length > 1"><span class="icon-next"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(a){a.put("template/carousel/slide.html","<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item text-center\" ng-transclude></div>\n")}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/datepicker.html",'<table>\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{rows[0].length - 2 + showWeekNumbers}}"><button type="button" class="btn btn-default btn-sm btn-block" ng-click="toggleMode()"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr ng-show="labels.length > 0" class="h6">\n      <th ng-show="showWeekNumbers" class="text-center">#</th>\n      <th ng-repeat="label in labels" class="text-center">{{label}}</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows">\n      <td ng-show="showWeekNumbers" class="text-center"><em>{{ getWeekNumber(row) }}</em></td>\n      <td ng-repeat="dt in row" class="text-center">\n        <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected}" ng-click="select(dt.date)" ng-disabled="dt.disabled"><span ng-class="{\'text-muted\': dt.secondary}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/popup.html","<ul class=\"dropdown-menu\" ng-style=\"{display: (isOpen && 'block') || 'none', top: position.top+'px', left: position.left+'px'}\">\n	<li ng-transclude></li>\n"+'	<li ng-show="showButtonBar" style="padding:10px 9px 2px">\n		<span class="btn-group">\n			<button type="button" class="btn btn-sm btn-info" ng-click="today()">{{currentText}}</button>\n			<button type="button" class="btn btn-sm btn-default" ng-click="showWeeks = ! showWeeks" ng-class="{active: showWeeks}">{{toggleWeeksText}}</button>\n			<button type="button" class="btn btn-sm btn-danger" ng-click="clear()">{{clearText}}</button>\n		</span>\n		<button type="button" class="btn btn-sm btn-success pull-right" ng-click="isOpen = false">{{closeText}}</button>\n	</li>\n</ul>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(a){a.put("template/modal/backdrop.html",'<div class="modal-backdrop fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1040 + index*10}"></div>')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(a){a.put("template/modal/window.html",'<div tabindex="-1" class="modal fade {{ windowClass }}" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog"><div class="modal-content" ng-transclude></div></div>\n</div>')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-repeat="page in pages" ng-class="{disabled: page.disabled, previous: page.previous, next: page.next}"><a ng-click="selectPage(page.number)">{{page.text}}</a></li>\n</ul>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-repeat="page in pages" ng-class="{active: page.active, disabled: page.disabled}"><a ng-click="selectPage(page.number)">{{page.text}}</a></li>\n</ul>')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" ng-transclude></div>')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progressbar.html",'<div class="progress"><div class="progress-bar" ng-class="type && \'progress-bar-\' + type" ng-transclude></div></div>')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("template/rating/rating.html",'<span ng-mouseleave="reset()">\n    <i ng-repeat="r in range" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < val && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')"></i>\n</span>')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset-titles.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset-titles.html","<ul class=\"nav {{type && 'nav-' + type}}\" ng-class=\"{'nav-stacked': vertical}\">\n</ul>\n")}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset.html",'\n<div class="tabbable">\n  <ul class="nav {{type && \'nav-\' + type}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("template/timepicker/timepicker.html",'<table>\n	<tbody>\n		<tr class="text-center">\n			<td><a ng-click="incrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n		<tr>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidHours}">\n				<input type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td>:</td>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n				<input type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n		</tr>\n		<tr class="text-center">\n			<td><a ng-click="decrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n	</tbody>\n</table>\n')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-popup.html","<ul class=\"dropdown-menu\" ng-style=\"{display: isOpen()&&'block' || 'none', top: position.top+'px', left: position.left+'px'}\">\n"+'    <li ng-repeat="match in matches" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>')}]),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(a,b,c){"use strict";function d(a,b){return H(new(H(function(){},{prototype:a})),b)}function e(a){return G(arguments,function(b){b!==a&&G(b,function(b,c){a.hasOwnProperty(c)||(a[c]=b)})}),a}function f(a,b){var c=[];for(var d in a.path){if(a.path[d]!==b.path[d])break;c.push(a.path[d])}return c}function g(a,b){if(Array.prototype.indexOf)return a.indexOf(b,Number(arguments[2])||0);var c=a.length>>>0,d=Number(arguments[2])||0;for(d=0>d?Math.ceil(d):Math.floor(d),0>d&&(d+=c);c>d;d++)if(d in a&&a[d]===b)return d;return-1}function h(a,b,c,d){var e,h=f(c,d),i={},j=[];for(var k in h)if(h[k].params&&h[k].params.length){e=h[k].params;for(var l in e)g(j,e[l])>=0||(j.push(e[l]),i[e[l]]=a[e[l]])}return H({},i,b)}function i(a,b){var c={};return G(a,function(a){var d=b[a];c[a]=null!=d?String(d):null}),c}function j(a,b,c){if(!c){c=[];for(var d in a)c.push(d)}for(var e=0;e<c.length;e++){var f=c[e];if(a[f]!=b[f])return!1}return!0}function k(a,b){var c={};return G(a,function(a){c[a]=b[a]}),c}function l(a,b){var d=1,f=2,g={},h=[],i=g,j=H(a.when(g),{$$promises:g,$$values:g});this.study=function(g){function k(a,c){if(o[c]!==f){if(n.push(c),o[c]===d)throw n.splice(0,n.indexOf(c)),new Error("Cyclic dependency: "+n.join(" -> "));if(o[c]=d,D(a))m.push(c,[function(){return b.get(a)}],h);else{var e=b.annotate(a);G(e,function(a){a!==c&&g.hasOwnProperty(a)&&k(g[a],a)}),m.push(c,a,e)}n.pop(),o[c]=f}}function l(a){return E(a)&&a.then&&a.$$promises}if(!E(g))throw new Error("'invocables' must be an object");var m=[],n=[],o={};return G(g,k),g=n=o=null,function(d,f,g){function h(){--s||(t||e(r,f.$$values),p.$$values=r,p.$$promises=!0,o.resolve(r))}function k(a){p.$$failure=a,o.reject(a)}function n(c,e,f){function i(a){l.reject(a),k(a)}function j(){if(!B(p.$$failure))try{l.resolve(b.invoke(e,g,r)),l.promise.then(function(a){r[c]=a,h()},i)}catch(a){i(a)}}var l=a.defer(),m=0;G(f,function(a){q.hasOwnProperty(a)&&!d.hasOwnProperty(a)&&(m++,q[a].then(function(b){r[a]=b,--m||j()},i))}),m||j(),q[c]=l.promise}if(l(d)&&g===c&&(g=f,f=d,d=null),d){if(!E(d))throw new Error("'locals' must be an object")}else d=i;if(f){if(!l(f))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else f=j;var o=a.defer(),p=o.promise,q=p.$$promises={},r=H({},d),s=1+m.length/3,t=!1;if(B(f.$$failure))return k(f.$$failure),p;f.$$values?(t=e(r,f.$$values),h()):(H(q,f.$$promises),f.then(h,k));for(var u=0,v=m.length;v>u;u+=3)d.hasOwnProperty(m[u])?h():n(m[u],m[u+1],m[u+2]);return p}},this.resolve=function(a,b,c,d){return this.study(a)(b,c,d)}}function m(a,b,c){this.fromConfig=function(a,b,c){return B(a.template)?this.fromString(a.template,b):B(a.templateUrl)?this.fromUrl(a.templateUrl,b):B(a.templateProvider)?this.fromProvider(a.templateProvider,b,c):null},this.fromString=function(a,b){return C(a)?a(b):a},this.fromUrl=function(c,d){return C(c)&&(c=c(d)),null==c?null:a.get(c,{cache:b}).then(function(a){return a.data})},this.fromProvider=function(a,b,d){return c.invoke(a,null,d||{params:b})}}function n(a){function b(b){if(!/^\w+(-+\w+)*$/.test(b))throw new Error("Invalid parameter name '"+b+"' in pattern '"+a+"'");if(f[b])throw new Error("Duplicate parameter name '"+b+"' in pattern '"+a+"'");f[b]=!0,j.push(b)}function c(a){return a.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&")}var d,e=/([:*])(\w+)|\{(\w+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,f={},g="^",h=0,i=this.segments=[],j=this.params=[];this.source=a;for(var k,l,m;(d=e.exec(a))&&(k=d[2]||d[3],l=d[4]||("*"==d[1]?".*":"[^/]*"),m=a.substring(h,d.index),!(m.indexOf("?")>=0));)g+=c(m)+"("+l+")",b(k),i.push(m),h=e.lastIndex;m=a.substring(h);var n=m.indexOf("?");if(n>=0){var o=this.sourceSearch=m.substring(n);m=m.substring(0,n),this.sourcePath=a.substring(0,h+n),G(o.substring(1).split(/[&?]/),b)}else this.sourcePath=a,this.sourceSearch="";g+=c(m)+"$",i.push(m),this.regexp=new RegExp(g),this.prefix=i[0]}function o(){this.compile=function(a){return new n(a)},this.isMatcher=function(a){return E(a)&&C(a.exec)&&C(a.format)&&C(a.concat)},this.$get=function(){return this}}function p(a){function b(a){var b=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(a.source);return null!=b?b[1].replace(/\\(.)/g,"$1"):""}function c(a,b){return a.replace(/\$(\$|\d{1,2})/,function(a,c){return b["$"===c?0:Number(c)]})}function d(a,b,c){if(!c)return!1;var d=a.invoke(b,b,{$match:c});return B(d)?d:!0}var e=[],f=null;this.rule=function(a){if(!C(a))throw new Error("'rule' must be a function");return e.push(a),this},this.otherwise=function(a){if(D(a)){var b=a;a=function(){return b}}else if(!C(a))throw new Error("'rule' must be a function");return f=a,this},this.when=function(e,f){var g,h=D(f);if(D(e)&&(e=a.compile(e)),
!h&&!C(f)&&!F(f))throw new Error("invalid 'handler' in when()");var i={matcher:function(b,c){return h&&(g=a.compile(c),c=["$match",function(a){return g.format(a)}]),H(function(a,e){return d(a,c,b.exec(e.path(),e.search()))},{prefix:D(b.prefix)?b.prefix:""})},regex:function(a,e){if(a.global||a.sticky)throw new Error("when() RegExp must not be global or sticky");return h&&(g=e,e=["$match",function(a){return c(g,a)}]),H(function(b,c){return d(b,e,a.exec(c.path()))},{prefix:b(a)})}},j={matcher:a.isMatcher(e),regex:e instanceof RegExp};for(var k in j)if(j[k])return this.rule(i[k](e,f));throw new Error("invalid 'what' in when()")},this.$get=["$location","$rootScope","$injector",function(a,b,c){function d(b){function d(b){var d=b(c,a);return d?(D(d)&&a.replace().url(d),!0):!1}if(!b||!b.defaultPrevented){var g,h=e.length;for(g=0;h>g;g++)if(d(e[g]))return;f&&d(f)}}return b.$on("$locationChangeSuccess",d),{sync:function(){d()}}}]}function q(a,e,f){function g(a){return 0===a.indexOf(".")||0===a.indexOf("^")}function l(a,b){var d=D(a),e=d?a:a.name,f=g(e);if(f){if(!b)throw new Error("No reference point given for path '"+e+"'");for(var h=e.split("."),i=0,j=h.length,k=b;j>i;i++)if(""!==h[i]||0!==i){if("^"!==h[i])break;if(!k.parent)throw new Error("Path '"+e+"' not valid for state '"+b.name+"'");k=k.parent}else k=b;h=h.slice(i).join("."),e=k.name+(k.name&&h?".":"")+h}var l=u[e];return!l||!d&&(d||l!==a&&l.self!==a)?c:l}function m(a,b){v[a]||(v[a]=[]),v[a].push(b)}function n(b){b=d(b,{self:b,resolve:b.resolve||{},toString:function(){return this.name}});var c=b.name;if(!D(c)||c.indexOf("@")>=0)throw new Error("State must have a valid name");if(u.hasOwnProperty(c))throw new Error("State '"+c+"'' is already defined");var e=-1!==c.indexOf(".")?c.substring(0,c.lastIndexOf(".")):D(b.parent)?b.parent:"";if(e&&!u[e])return m(e,b.self);for(var f in x)C(x[f])&&(b[f]=x[f](b,x.$delegates[f]));if(u[c]=b,!b[w]&&b.url&&a.when(b.url,["$match","$stateParams",function(a,c){t.$current.navigable==b&&j(a,c)||t.transitionTo(b,a,{location:!1})}]),v[c])for(var g=0;g<v[c].length;g++)n(v[c][g]);return b}function o(a,b){return D(a)&&!B(b)?x[a]:C(b)&&D(a)?(x[a]&&!x.$delegates[a]&&(x.$delegates[a]=x[a]),x[a]=b,this):this}function p(a,b){return E(a)?b=a:b.name=a,n(b),this}function q(a,e,g,m,n,o,p){function q(){p.url()!==D&&(p.url(D),p.replace())}function v(a,c,d,f,h){var i=d?c:k(a.params,c),j={$stateParams:i};h.resolve=n.resolve(a.resolve,j,h.resolve,a);var l=[h.resolve.then(function(a){h.globals=a})];return f&&l.push(f),G(a.views,function(c,d){var e=c.resolve&&c.resolve!==a.resolve?c.resolve:{};e.$template=[function(){return g.load(d,{view:c,locals:j,params:i,notify:!1})||""}],l.push(n.resolve(e,j,h.resolve,a).then(function(f){if(C(c.controllerProvider)||F(c.controllerProvider)){var g=b.extend({},e,j);f.$$controller=m.invoke(c.controllerProvider,null,g)}else f.$$controller=c.controller;f.$$state=a,h[d]=f}))}),e.all(l).then(function(){return h})}var x=e.reject(new Error("transition superseded")),y=e.reject(new Error("transition prevented")),z=e.reject(new Error("transition aborted")),A=e.reject(new Error("transition failed")),D=p.url();return s.locals={resolve:null,globals:{$stateParams:{}}},t={params:{},current:s.self,$current:s,transition:null},t.reload=function(){t.transitionTo(t.current,o,{reload:!0,inherit:!1,notify:!1})},t.go=function(a,b,c){return this.transitionTo(a,b,H({inherit:!0,relative:t.$current},c))},t.transitionTo=function(b,c,f){c=c||{},f=H({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},f||{});var g,k=t.$current,n=t.params,u=k.path,C=l(b,f.relative);if(!B(C)){var E={to:b,toParams:c,options:f};if(g=a.$broadcast("$stateNotFound",E,k.self,n),g.defaultPrevented)return q(),z;if(g.retry){if(f.$retry)return q(),A;var F=t.transition=e.when(g.retry);return F.then(function(){return F!==t.transition?x:(E.options.$retry=!0,t.transitionTo(E.to,E.toParams,E.options))},function(){return z}),q(),F}if(b=E.to,c=E.toParams,f=E.options,C=l(b,f.relative),!B(C)){if(f.relative)throw new Error("Could not resolve '"+b+"' from state '"+f.relative+"'");throw new Error("No such state '"+b+"'")}}if(C[w])throw new Error("Cannot transition to abstract state '"+b+"'");f.inherit&&(c=h(o,c||{},t.$current,C)),b=C;var G,J,K=b.path,L=s.locals,M=[];for(G=0,J=K[G];J&&J===u[G]&&j(c,n,J.ownParams)&&!f.reload;G++,J=K[G])L=M[G]=J.locals;if(r(b,k,L,f))return b.self.reloadOnSearch!==!1&&q(),t.transition=null,e.when(t.current);if(c=i(b.params,c||{}),f.notify&&(g=a.$broadcast("$stateChangeStart",b.self,c,k.self,n),g.defaultPrevented))return q(),y;for(var N=e.when(L),O=G;O<K.length;O++,J=K[O])L=M[O]=d(L),N=v(J,c,J===b,N,L);var P=t.transition=N.then(function(){var d,e,g;if(t.transition!==P)return x;for(d=u.length-1;d>=G;d--)g=u[d],g.self.onExit&&m.invoke(g.self.onExit,g.self,g.locals.globals),g.locals=null;for(d=G;d<K.length;d++)e=K[d],e.locals=M[d],e.self.onEnter&&m.invoke(e.self.onEnter,e.self,e.locals.globals);if(t.transition!==P)return x;t.$current=b,t.current=b.self,t.params=c,I(t.params,o),t.transition=null;var h=b.navigable;return f.location&&h&&(p.url(h.url.format(h.locals.globals.$stateParams)),"replace"===f.location&&p.replace()),f.notify&&a.$broadcast("$stateChangeSuccess",b.self,c,k.self,n),D=p.url(),t.current},function(d){return t.transition!==P?x:(t.transition=null,a.$broadcast("$stateChangeError",b.self,c,k.self,n,d),q(),e.reject(d))});return P},t.is=function(a,d){var e=l(a);return B(e)?t.$current!==e?!1:B(d)&&null!==d?b.equals(o,d):!0:c},t.includes=function(a,d){var e=l(a);if(!B(e))return c;if(!B(t.$current.includes[e.name]))return!1;var f=!0;return b.forEach(d,function(a,b){B(o[b])&&o[b]===a||(f=!1)}),f},t.href=function(a,b,c){c=H({lossy:!0,inherit:!1,absolute:!1,relative:t.$current},c||{});var d=l(a,c.relative);if(!B(d))return null;b=h(o,b||{},t.$current,d);var e=d&&c.lossy?d.navigable:d,g=e&&e.url?e.url.format(i(d.params,b||{})):null;return!f.html5Mode()&&g&&(g="#"+f.hashPrefix()+g),c.absolute&&g&&(g=p.protocol()+"://"+p.host()+(80==p.port()||443==p.port()?"":":"+p.port())+(!f.html5Mode()&&g?"/":"")+g),g},t.get=function(a,b){if(!B(a)){var c=[];return G(u,function(a){c.push(a.self)}),c}var d=l(a,b);return d&&d.self?d.self:null},t}function r(a,b,c,d){return a!==b||(c!==b.locals||d.reload)&&a.self.reloadOnSearch!==!1?void 0:!0}var s,t,u={},v={},w="abstract",x={parent:function(a){if(B(a.parent)&&a.parent)return l(a.parent);var b=/^(.+)\.[^.]+$/.exec(a.name);return b?l(b[1]):s},data:function(a){return a.parent&&a.parent.data&&(a.data=a.self.data=H({},a.parent.data,a.data)),a.data},url:function(a){var b=a.url;if(D(b))return"^"==b.charAt(0)?e.compile(b.substring(1)):(a.parent.navigable||s).url.concat(b);if(e.isMatcher(b)||null==b)return b;throw new Error("Invalid url '"+b+"' in state '"+a+"'")},navigable:function(a){return a.url?a:a.parent?a.parent.navigable:null},params:function(a){if(!a.params)return a.url?a.url.parameters():a.parent.params;if(!F(a.params))throw new Error("Invalid params in state '"+a+"'");if(a.url)throw new Error("Both params and url specicified in state '"+a+"'");return a.params},views:function(a){var b={};return G(B(a.views)?a.views:{"":a},function(c,d){d.indexOf("@")<0&&(d+="@"+a.parent.name),b[d]=c}),b},ownParams:function(a){if(!a.parent)return a.params;var b={};G(a.params,function(a){b[a]=!0}),G(a.parent.params,function(c){if(!b[c])throw new Error("Missing required parameter '"+c+"' in state '"+a.name+"'");b[c]=!1});var c=[];return G(b,function(a,b){a&&c.push(b)}),c},path:function(a){return a.parent?a.parent.path.concat(a):[]},includes:function(a){var b=a.parent?H({},a.parent.includes):{};return b[a.name]=!0,b},$delegates:{}};s=n({name:"",url:"^",views:null,"abstract":!0}),s.navigable=null,this.decorator=o,this.state=p,this.$get=q,q.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$location","$urlRouter"]}function r(){function a(a,b){return{load:function(c,d){var e,f={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return d=H(f,d),d.view&&(e=b.fromConfig(d.view,d.params,d.locals)),e&&d.notify&&a.$broadcast("$viewContentLoading",d),e}}}this.$get=a,a.$inject=["$rootScope","$templateFactory"]}function s(){var a=!1;this.useAnchorScroll=function(){a=!0},this.$get=["$anchorScroll","$timeout",function(b,c){return a?b:function(a){c(function(){a[0].scrollIntoView()},0,!1)}}]}function t(a,c,d,e,f,g){function h(){return e.has?function(a){return e.has(a)?e.get(a):null}:function(a){try{return e.get(a)}catch(b){return null}}}function i(a,b,c){var d=function(){return{leave:function(a){a.remove()},enter:function(a,b,c){c.after(a)}}};if(m)return function(a){return a?{enter:function(a,b,c){m.enter(a,null,c)},leave:function(a){m.leave(a,function(){a.remove()})}}:d()};if(l){var e=l&&l(c,b);return function(a){return a?{enter:function(a,b){e.enter(a,b)},leave:function(a){e.leave(a.contents(),a)}}:d()}}return d}var j=!1,k=h(),l=k("$animator"),m=k("$animate"),n={restrict:"ECA",compile:function(e,h){var k=e.html(),l=!0,m=b.element(g[0].createComment(" ui-view-anchor ")),o=e.parent();return e.prepend(m),function(g){function p(){s&&(y(!0).leave(s),s=null),r&&(r.$destroy(),r=null)}function q(h){var i=a.$current&&a.$current.locals[v];if(l&&(l=!1,e.replaceWith(m)),!i)return p(),s=e.clone(),s.html(k),y(h).enter(s,o,m),r=g.$new(),void c(s.contents())(r);if(i!==t){p(),s=e.clone(),s.html(i.$template?i.$template:k),y(!0).enter(s,o,m),s.data("$uiView",z),t=i,z.state=i.$$state;var j=c(s.contents());if(r=g.$new(),i.$$controller){i.$scope=r;var n=d(i.$$controller,i);s.children().data("$ngControllerController",n)}j(r),r.$emit("$viewContentLoaded"),w&&r.$eval(w),b.isDefined(x)&&x&&!g.$eval(x)||f(s)}}var r,s,t,u=o.inheritedData("$uiView"),v=h[n.name]||h.name||"",w=h.onload||"",x=h.autoscroll,y=i(e,h,g);v.indexOf("@")<0&&(v=v+"@"+(u?u.state.name:""));var z={name:v,state:null},A=function(){if(!j){j=!0;try{q(!0)}catch(a){throw j=!1,a}j=!1}};g.$on("$stateChangeSuccess",A),g.$on("$viewContentLoading",A),q(!1)}}};return n}function u(a){var b=a.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/);if(!b||4!==b.length)throw new Error("Invalid state ref '"+a+"'");return{state:b[1],paramExpr:b[3]||null}}function v(a){var b=a.parent().inheritedData("$uiView");return b&&b.state&&b.state.name?b.state:void 0}function w(a,b){return{restrict:"A",require:"?^uiSrefActive",link:function(c,d,e,f){var g=u(e.uiSref),h=null,i=v(d)||a.$current,j="FORM"===d[0].nodeName,k=j?"action":"href",l=!0,m=function(b){if(b&&(h=b),l){var c=a.href(g.state,h,{relative:i});return f&&f.$$setStateInfo(g.state,h),c?void(d[0][k]=c):(l=!1,!1)}};g.paramExpr&&(c.$watch(g.paramExpr,function(a){a!==h&&m(a)},!0),h=c.$eval(g.paramExpr)),m(),j||d.bind("click",function(c){var e=c.which||c.button;0!==e&&1!=e||c.ctrlKey||c.metaKey||c.shiftKey||d.attr("target")||(b(function(){a.go(g.state,h,{relative:i})}),c.preventDefault())})}}}function x(a,b,c){return{restrict:"A",controller:["$scope","$element","$attrs",function(d,e,f){function g(){a.$current.self===i&&h()?e.addClass(l):e.removeClass(l)}function h(){return!k||j(k,b)}var i,k,l;l=c(f.uiSrefActive||"",!1)(d),this.$$setStateInfo=function(b,c){i=a.get(b,v(e)),k=c,g()},d.$on("$stateChangeSuccess",g)}]}}function y(a){return function(b){return a.is(b)}}function z(a){return function(b){return a.includes(b)}}function A(a,b){function e(a){this.locals=a.locals.globals,this.params=this.locals.$stateParams}function f(){this.locals=null,this.params=null}function g(c,g){if(null!=g.redirectTo){var h,j=g.redirectTo;if(D(j))h=j;else{if(!C(j))throw new Error("Invalid 'redirectTo' in when()");h=function(a,b){return j(a,b.path(),b.search())}}b.when(c,h)}else a.state(d(g,{parent:null,name:"route:"+encodeURIComponent(c),url:c,onEnter:e,onExit:f}));return i.push(g),this}function h(a,b,d){function e(a){return""!==a.name?a:c}var f={routes:i,params:d,current:c};return b.$on("$stateChangeStart",function(a,c,d,f){b.$broadcast("$routeChangeStart",e(c),e(f))}),b.$on("$stateChangeSuccess",function(a,c,d,g){f.current=e(c),b.$broadcast("$routeChangeSuccess",e(c),e(g)),I(d,f.params)}),b.$on("$stateChangeError",function(a,c,d,f,g,h){b.$broadcast("$routeChangeError",e(c),e(f),h)}),f}var i=[];e.$inject=["$$state"],this.when=g,this.$get=h,h.$inject=["$state","$rootScope","$routeParams"]}var B=b.isDefined,C=b.isFunction,D=b.isString,E=b.isObject,F=b.isArray,G=b.forEach,H=b.extend,I=b.copy;b.module("ui.router.util",["ng"]),b.module("ui.router.router",["ui.router.util"]),b.module("ui.router.state",["ui.router.router","ui.router.util"]),b.module("ui.router",["ui.router.state"]),b.module("ui.router.compat",["ui.router"]),l.$inject=["$q","$injector"],b.module("ui.router.util").service("$resolve",l),m.$inject=["$http","$templateCache","$injector"],b.module("ui.router.util").service("$templateFactory",m),n.prototype.concat=function(a){return new n(this.sourcePath+a+this.sourceSearch)},n.prototype.toString=function(){return this.source},n.prototype.exec=function(a,b){var c=this.regexp.exec(a);if(!c)return null;var d,e=this.params,f=e.length,g=this.segments.length-1,h={};if(g!==c.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(d=0;g>d;d++)h[e[d]]=c[d+1];for(;f>d;d++)h[e[d]]=b[e[d]];return h},n.prototype.parameters=function(){return this.params},n.prototype.format=function(a){var b=this.segments,c=this.params;if(!a)return b.join("");var d,e,f,g=b.length-1,h=c.length,i=b[0];for(d=0;g>d;d++)f=a[c[d]],null!=f&&(i+=encodeURIComponent(f)),i+=b[d+1];for(;h>d;d++)f=a[c[d]],null!=f&&(i+=(e?"&":"?")+c[d]+"="+encodeURIComponent(f),e=!0);return i},b.module("ui.router.util").provider("$urlMatcherFactory",o),p.$inject=["$urlMatcherFactoryProvider"],b.module("ui.router.router").provider("$urlRouter",p),q.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider","$locationProvider"],b.module("ui.router.state").value("$stateParams",{}).provider("$state",q),r.$inject=[],b.module("ui.router.state").provider("$view",r),b.module("ui.router.state").provider("$uiViewScroll",s),t.$inject=["$state","$compile","$controller","$injector","$uiViewScroll","$document"],b.module("ui.router.state").directive("uiView",t),w.$inject=["$state","$timeout"],x.$inject=["$state","$stateParams","$interpolate"],b.module("ui.router.state").directive("uiSref",w).directive("uiSrefActive",x),y.$inject=["$state"],z.$inject=["$state"],b.module("ui.router.state").filter("isState",y).filter("includedByState",z),A.$inject=["$stateProvider","$urlRouterProvider"],b.module("ui.router.compat").provider("$route",A).directive("ngView",t)}(window,window.angular),function(a){"use strict";function b(a,b,c){return a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):void 0}function c(a,b){var c,d;for(c=0,d=a.length;d>c;c++)if(a[c]===b)return!0;return!1}function d(a,b){var c;a.createTextRange?(c=a.createTextRange(),c.move("character",b),c.select()):a.selectionStart&&(a.focus(),a.setSelectionRange(b,b))}function e(a,b){try{return a.type=b,!0}catch(c){return!1}}a.Placeholders={Utils:{addEventListener:b,inArray:c,moveCaret:d,changeType:e}}}(this),function(a){"use strict";function b(){}function c(){try{return document.activeElement}catch(a){}}function d(a,b){var c,d,e=!!b&&a.value!==b,f=a.value===a.getAttribute(H);return(e||f)&&"true"===a.getAttribute(I)?(a.removeAttribute(I),a.value=a.value.replace(a.getAttribute(H),""),a.className=a.className.replace(G,""),d=a.getAttribute(O),parseInt(d,10)>=0&&(a.setAttribute("maxLength",d),a.removeAttribute(O)),c=a.getAttribute(J),c&&(a.type=c),!0):!1}function e(a){var b,c,d=a.getAttribute(H);return""===a.value&&d?(a.setAttribute(I,"true"),a.value=d,a.className+=" "+F,c=a.getAttribute(O),c||(a.setAttribute(O,a.maxLength),a.removeAttribute("maxLength")),b=a.getAttribute(J),b?a.type="text":"password"===a.type&&T.changeType(a,"text")&&a.setAttribute(J,"password"),!0):!1}function f(a,b){var c,d,e,f,g,h,i;if(a&&a.getAttribute(H))b(a);else for(e=a?a.getElementsByTagName("input"):p,f=a?a.getElementsByTagName("textarea"):q,c=e?e.length:0,d=f?f.length:0,i=0,h=c+d;h>i;i++)g=c>i?e[i]:f[i-c],b(g)}function g(a){f(a,d)}function h(a){f(a,e)}function i(a){return function(){r&&a.value===a.getAttribute(H)&&"true"===a.getAttribute(I)?T.moveCaret(a,0):d(a)}}function j(a){return function(){e(a)}}function k(a){return function(b){return t=a.value,"true"===a.getAttribute(I)&&t===a.getAttribute(H)&&T.inArray(D,b.keyCode)?(b.preventDefault&&b.preventDefault(),!1):void 0}}function l(a){return function(){d(a,t),""===a.value&&(a.blur(),T.moveCaret(a,0))}}function m(a){return function(){a===c()&&a.value===a.getAttribute(H)&&"true"===a.getAttribute(I)&&T.moveCaret(a,0)}}function n(a){return function(){g(a)}}function o(a){a.form&&(y=a.form,"string"==typeof y&&(y=document.getElementById(y)),y.getAttribute(K)||(T.addEventListener(y,"submit",n(y)),y.setAttribute(K,"true"))),T.addEventListener(a,"focus",i(a)),T.addEventListener(a,"blur",j(a)),r&&(T.addEventListener(a,"keydown",k(a)),T.addEventListener(a,"keyup",l(a)),T.addEventListener(a,"click",m(a))),a.setAttribute(L,"true"),a.setAttribute(H,w),(r||a!==c())&&e(a)}var p,q,r,s,t,u,v,w,x,y,z,A,B,C=["text","search","url","tel","email","password","number","textarea"],D=[27,33,34,35,36,37,38,39,40,8,46],E="#ccc",F="placeholdersjs",G=RegExp("(?:^|\\s)"+F+"(?!\\S)"),H="data-placeholder-value",I="data-placeholder-active",J="data-placeholder-type",K="data-placeholder-submit",L="data-placeholder-bound",M="data-placeholder-focus",N="data-placeholder-live",O="data-placeholder-maxlength",P=document.createElement("input"),Q=document.getElementsByTagName("head")[0],R=document.documentElement,S=a.Placeholders,T=S.Utils;if(S.nativeSupport=void 0!==P.placeholder,!S.nativeSupport){for(p=document.getElementsByTagName("input"),q=document.getElementsByTagName("textarea"),r="false"===R.getAttribute(M),s="false"!==R.getAttribute(N),u=document.createElement("style"),u.type="text/css",v=document.createTextNode("."+F+" { color:"+E+"; }"),u.styleSheet?u.styleSheet.cssText=v.nodeValue:u.appendChild(v),Q.insertBefore(u,Q.firstChild),B=0,A=p.length+q.length;A>B;B++)z=p.length>B?p[B]:q[B-p.length],w=z.attributes.placeholder,w&&(w=w.nodeValue,w&&T.inArray(C,z.type)&&o(z));x=setInterval(function(){for(B=0,A=p.length+q.length;A>B;B++)z=p.length>B?p[B]:q[B-p.length],w=z.attributes.placeholder,w?(w=w.nodeValue,w&&T.inArray(C,z.type)&&(z.getAttribute(L)||o(z),(w!==z.getAttribute(H)||"password"===z.type&&!z.getAttribute(J))&&("password"===z.type&&!z.getAttribute(J)&&T.changeType(z,"text")&&z.setAttribute(J,"password"),z.value===z.getAttribute(H)&&(z.value=w),z.setAttribute(H,w)))):z.getAttribute(I)&&(d(z),z.removeAttribute(H));s||clearInterval(x)},100)}T.addEventListener(a,"beforeunload",function(){S.disable()}),S.disable=S.nativeSupport?b:g,S.enable=S.nativeSupport?b:h}(this),!function(){"use strict";function a(a,b,c){"addEventListener"in window?a.addEventListener(b,c,!1):"attachEvent"in window&&a.attachEvent("on"+b,c)}function b(a){return aa+"["+ca+"] "+a}function c(a){_&&"object"==typeof window.console&&console.log(b(a))}function d(a){"object"==typeof window.console&&console.warn(b(a))}function e(){c("Initialising iFrame"),f(),i(),h("background",M),h("padding",P),o(),m(),j(),q(),n(),Z=p(),E("init","Init message from host page")}function f(){function a(a){return"true"===a?!0:!1}var b=Y.substr(ba).split(":");ca=b[0],N=void 0!==b[1]?Number(b[1]):N,Q=void 0!==b[2]?a(b[2]):Q,_=void 0!==b[3]?a(b[3]):_,$=void 0!==b[4]?Number(b[4]):$,da=void 0!==b[5]?a(b[5]):da,K=void 0!==b[6]?a(b[6]):K,O=b[7],W=void 0!==b[8]?b[8]:W,M=b[9],P=b[10],ha=void 0!==b[11]?Number(b[11]):ha,Z.enable=void 0!==b[12]?a(b[12]):!1}function g(a,b){return-1!==b.indexOf("-")&&(d("Negative CSS value ignored for "+a),b=""),b}function h(a,b){void 0!==b&&""!==b&&"null"!==b&&(document.body.style[a]=b,c("Body "+a+' set to "'+b+'"'))}function i(){void 0===O&&(O=N+"px"),g("margin",O),h("margin",O)}function j(){document.documentElement.style.height="",document.body.style.height="",c('HTML & body height set to "auto"')}function k(b){function d(c){a(window,c,function(){E(b.eventName,b.eventType)})}b.eventNames&&Array.prototype.map?(b.eventName=b.eventNames[0],b.eventNames.map(d)):d(b.eventName),c("Added event listener: "+b.eventType)}function l(){k({eventType:"Animation Start",eventNames:["animationstart","webkitAnimationStart"]}),k({eventType:"Animation Iteration",eventNames:["animationiteration","webkitAnimationIteration"]}),k({eventType:"Animation End",eventNames:["animationend","webkitAnimationEnd"]}),k({eventType:"Device Orientation Change",eventName:"deviceorientation"}),k({eventType:"Transition End",eventNames:["transitionend","webkitTransitionEnd","MSTransitionEnd","oTransitionEnd","otransitionend"]}),k({eventType:"Window Clicked",eventName:"click"}),k({eventType:"Window Resized",eventName:"resize"})}function m(){V!==W&&(W in la||(d(W+" is not a valid option for heightCalculationMethod."),W="bodyScroll"),c('Height calculation method set to "'+W+'"'))}function n(){!0===K?(l(),t()):c("Auto Resize disabled")}function o(){var a=document.createElement("div");a.style.clear="both",a.style.display="block",document.body.appendChild(a)}function p(){function b(){return{x:void 0!==window.pageXOffset?window.pageXOffset:document.documentElement.scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop}}function e(a){var c=a.getBoundingClientRect(),d=b();return{x:parseInt(c.left,10)+parseInt(d.x,10),y:parseInt(c.top,10)+parseInt(d.y,10)}}function f(a){function b(a){var b=e(a);c("Moving to in page link (#"+d+") at x: "+b.x+" y: "+b.y),I(b.y,b.x,"scrollToOffset")}var d=a.split("#")[1]||"",f=decodeURIComponent(d),g=document.getElementById(f)||document.getElementsByName(f)[0];g?b(g):(c("In page link (#"+d+") not found in iFrame, so sending to parent"),I(0,0,"inPageLink","#"+d))}function g(){""!==location.hash&&"#"!==location.hash&&f(location.href)}function h(){function b(b){function c(a){a.preventDefault(),f(this.getAttribute("href"))}"#"!==b.getAttribute("href")&&a(b,"click",c)}Array.prototype.forEach.call(document.querySelectorAll('a[href^="#"]'),b)}function i(){a(window,"hashchange",g)}function j(){setTimeout(g,S)}function k(){Array.prototype.forEach&&document.querySelectorAll?(c("Setting up location.hash handlers"),h(),i(),j()):d("In page linking not fully supported in this browser! (See README.md for IE8 workaround)")}return Z.enable?k():c("In page linking not enabled"),{findTarget:f}}function q(){da&&(c("Enable public methods"),window.parentIFrame={close:function(){I(0,0,"close")},getId:function(){return ca},moveToAnchor:function(a){Z.findTarget(a)},reset:function(){H("parentIFrame.reset")},scrollTo:function(a,b){I(b,a,"scrollTo")},scrollToOffset:function(a,b){I(b,a,"scrollToOffset")},sendMessage:function(a,b){I(0,0,"message",JSON.stringify(a),b)},setHeightCalculationMethod:function(a){W=a,m()},setTargetOrigin:function(a){c("Set targetOrigin: "+a),fa=a},size:function(a,b){var c=""+(a?a:"")+(b?","+b:"");F(),E("size","parentIFrame.size("+c+")",a,b)}})}function r(){0!==$&&(c("setInterval: "+$+"ms"),setInterval(function(){E("interval","setInterval: "+$)},Math.abs($)))}function s(b){function d(b){(void 0===b.height||void 0===b.width||0===b.height||0===b.width)&&(c("Attach listerner to "+b.src),a(b,"load",function(){E("imageLoad","Image loaded")}))}b.forEach(function(a){if("attributes"===a.type&&"src"===a.attributeName)d(a.target);else if("childList"===a.type){var b=a.target.querySelectorAll("img");Array.prototype.forEach.call(b,function(a){d(a)})}})}function t(){function a(){var a=document.querySelector("body"),d={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0},e=new b(function(a){E("mutationObserver","mutationObserver: "+a[0].target+" "+a[0].type),s(a)});c("Enable MutationObserver"),e.observe(a,d)}var b=window.MutationObserver||window.WebKitMutationObserver;b?0>$?r():a():(d("MutationObserver not supported in this browser!"),r())}function u(){function a(a){function b(a){var b=/^\d+(px)?$/i;if(b.test(a))return parseInt(a,L);var d=c.style.left,e=c.runtimeStyle.left;return c.runtimeStyle.left=c.currentStyle.left,c.style.left=a||0,a=c.style.pixelLeft,c.style.left=d,c.runtimeStyle.left=e,a}var c=document.body,d=0;return"defaultView"in document&&"getComputedStyle"in document.defaultView?(d=document.defaultView.getComputedStyle(c,null),d=null!==d?d[a]:0):d=b(c.currentStyle[a]),parseInt(d,L)}return document.body.offsetHeight+a("marginTop")+a("marginBottom")}function v(){return document.body.scrollHeight}function w(){return document.documentElement.offsetHeight}function x(){return document.documentElement.scrollHeight}function y(){for(var a=document.querySelectorAll("body *"),b=a.length,d=0,e=(new Date).getTime(),f=0;b>f;f++)a[f].getBoundingClientRect().bottom>d&&(d=a[f].getBoundingClientRect().bottom);return e=(new Date).getTime()-e,c("Parsed "+b+" HTML elements"),c("LowestElement bottom position calculated in "+e+"ms"),d}function z(){return[u(),v(),w(),x()]}function A(){return Math.max.apply(null,z())}function B(){return Math.min.apply(null,z())}function C(){return Math.max(u(),y())}function D(){return Math.max(document.documentElement.scrollWidth,document.body.scrollWidth)}function E(a,b,d,e){function f(){a in{reset:1,resetPage:1,init:1}||c("Trigger event: "+b)}function g(){T=n,ka=o,I(T,ka,a)}function h(){return ia&&a in R}function i(){function a(a,b){var c=Math.abs(a-b)<=ha;return!c}return n=void 0!==d?d:la[W](),o=void 0!==e?e:D(),a(T,n)||Q&&a(ka,o)}function j(){return!(a in{init:1,interval:1,size:1})}function k(){return W in ea}function l(){c("No change in size detected")}function m(){j()&&k()?H(b):a in{interval:1}||(f(),l())}var n,o;h()?c("Trigger event cancelled: "+a):i()?(f(),F(),g()):m()}function F(){ia||(ia=!0,c("Trigger event lock on")),clearTimeout(ja),ja=setTimeout(function(){ia=!1,c("Trigger event lock off"),c("--")},S)}function G(a){T=la[W](),ka=D(),I(T,ka,a)}function H(a){var b=W;W=V,c("Reset trigger event: "+a),F(),G("reset"),W=b}function I(a,b,d,e,f){function g(){void 0===f?f=fa:c("Message targetOrigin: "+f)}function h(){var g=a+":"+b,h=ca+":"+g+":"+d+(void 0!==e?":"+e:"");c("Sending message to host page ("+h+")"),ga.postMessage(aa+h,f)}g(),h()}function J(a){function b(){return aa===(""+a.data).substr(0,ba)}function f(){Y=a.data,ga=a.source,e(),U=!1,setTimeout(function(){X=!1},S)}function g(){X?c("Page reset ignored by init"):(c("Page size reset by host page"),G("resetPage"))}function h(){return a.data.split("]")[1]}function i(){return"iFrameResize"in window}function j(){return a.data.split(":")[2]in{"true":1,"false":1}}b()&&(U&&j()?f():"reset"===h()?g():a.data===Y||i()||d("Unexpected message ("+a.data+")"))}var K=!0,L=10,M="",N=0,O="",P="",Q=!1,R={resize:1,click:1},S=128,T=1,U=!0,V="offset",W=V,X=!0,Y="",Z={},$=32,_=!1,aa="[iFrameSizer]",ba=aa.length,ca="",da=!1,ea={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},fa="*",ga=window.parent,ha=0,ia=!1,ja=null,ka=1,la={offset:u,bodyOffset:u,bodyScroll:v,documentElementOffset:w,scroll:x,documentElementScroll:x,max:A,min:B,grow:A,lowestElement:C};a(window,"message",J)}(),!function(a,b){b.module("angular-md5",["gdi2290.md5"]),b.module("ngMd5",["gdi2290.md5"]),b.module("gdi2290.md5",["gdi2290.gravatar-filter","gdi2290.md5-service","gdi2290.md5-filter"]),b.module("gdi2290.gravatar-filter",[]).filter("gravatar",["md5",function(a){var b={};return function(c,d){return b[c]||(d=d?a.createHash(d.toString().toLowerCase()):"",b[c]=c?a.createHash(c.toString().toLowerCase()):d),b[c]}}]),b.module("gdi2290.md5-filter",[]).filter("md5",["md5",function(a){return function(b){return b?a.createHash(b.toString().toLowerCase()):b}}]),b.module("gdi2290.md5-service",[]).factory("md5",[function(){var a={createHash:function(a){var b,c,d,e,f,g,h,i,j,k,l=function(a,b){return a<<b|a>>>32-b},m=function(a,b){var c,d,e,f,g;return e=2147483648&a,f=2147483648&b,c=1073741824&a,d=1073741824&b,g=(1073741823&a)+(1073741823&b),c&d?2147483648^g^e^f:c|d?1073741824&g?3221225472^g^e^f:1073741824^g^e^f:g^e^f},n=function(a,b,c){return a&b|~a&c},o=function(a,b,c){return a&c|b&~c},p=function(a,b,c){return a^b^c},q=function(a,b,c){return b^(a|~c)},r=function(a,b,c,d,e,f,g){return a=m(a,m(m(n(b,c,d),e),g)),m(l(a,f),b)},s=function(a,b,c,d,e,f,g){return a=m(a,m(m(o(b,c,d),e),g)),m(l(a,f),b)},t=function(a,b,c,d,e,f,g){return a=m(a,m(m(p(b,c,d),e),g)),m(l(a,f),b)},u=function(a,b,c,d,e,f,g){return a=m(a,m(m(q(b,c,d),e),g)),m(l(a,f),b)},v=function(a){for(var b,c=a.length,d=c+8,e=(d-d%64)/64,f=16*(e+1),g=new Array(f-1),h=0,i=0;c>i;)b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|a.charCodeAt(i)<<h,i++;return b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|128<<h,g[f-2]=c<<3,g[f-1]=c>>>29,g},w=function(a){var b,c,d="",e="";for(c=0;3>=c;c++)b=a>>>8*c&255,e="0"+b.toString(16),d+=e.substr(e.length-2,2);return d},x=[],y=7,z=12,A=17,B=22,C=5,D=9,E=14,F=20,G=4,H=11,I=16,J=23,K=6,L=10,M=15,N=21;for(x=v(a),h=1732584193,i=4023233417,j=2562383102,k=271733878,b=x.length,c=0;b>c;c+=16)d=h,e=i,f=j,g=k,h=r(h,i,j,k,x[c+0],y,3614090360),k=r(k,h,i,j,x[c+1],z,3905402710),j=r(j,k,h,i,x[c+2],A,606105819),i=r(i,j,k,h,x[c+3],B,3250441966),h=r(h,i,j,k,x[c+4],y,4118548399),k=r(k,h,i,j,x[c+5],z,1200080426),j=r(j,k,h,i,x[c+6],A,2821735955),i=r(i,j,k,h,x[c+7],B,4249261313),h=r(h,i,j,k,x[c+8],y,1770035416),k=r(k,h,i,j,x[c+9],z,2336552879),j=r(j,k,h,i,x[c+10],A,4294925233),i=r(i,j,k,h,x[c+11],B,2304563134),h=r(h,i,j,k,x[c+12],y,1804603682),k=r(k,h,i,j,x[c+13],z,4254626195),j=r(j,k,h,i,x[c+14],A,2792965006),i=r(i,j,k,h,x[c+15],B,1236535329),h=s(h,i,j,k,x[c+1],C,4129170786),k=s(k,h,i,j,x[c+6],D,3225465664),j=s(j,k,h,i,x[c+11],E,643717713),i=s(i,j,k,h,x[c+0],F,3921069994),h=s(h,i,j,k,x[c+5],C,3593408605),k=s(k,h,i,j,x[c+10],D,38016083),j=s(j,k,h,i,x[c+15],E,3634488961),i=s(i,j,k,h,x[c+4],F,3889429448),h=s(h,i,j,k,x[c+9],C,568446438),k=s(k,h,i,j,x[c+14],D,3275163606),j=s(j,k,h,i,x[c+3],E,4107603335),i=s(i,j,k,h,x[c+8],F,1163531501),h=s(h,i,j,k,x[c+13],C,2850285829),k=s(k,h,i,j,x[c+2],D,4243563512),j=s(j,k,h,i,x[c+7],E,1735328473),i=s(i,j,k,h,x[c+12],F,2368359562),h=t(h,i,j,k,x[c+5],G,4294588738),k=t(k,h,i,j,x[c+8],H,2272392833),j=t(j,k,h,i,x[c+11],I,1839030562),i=t(i,j,k,h,x[c+14],J,4259657740),h=t(h,i,j,k,x[c+1],G,2763975236),k=t(k,h,i,j,x[c+4],H,1272893353),j=t(j,k,h,i,x[c+7],I,4139469664),i=t(i,j,k,h,x[c+10],J,3200236656),h=t(h,i,j,k,x[c+13],G,681279174),k=t(k,h,i,j,x[c+0],H,3936430074),j=t(j,k,h,i,x[c+3],I,3572445317),i=t(i,j,k,h,x[c+6],J,76029189),h=t(h,i,j,k,x[c+9],G,3654602809),k=t(k,h,i,j,x[c+12],H,3873151461),j=t(j,k,h,i,x[c+15],I,530742520),i=t(i,j,k,h,x[c+2],J,3299628645),h=u(h,i,j,k,x[c+0],K,4096336452),k=u(k,h,i,j,x[c+7],L,1126891415),j=u(j,k,h,i,x[c+14],M,2878612391),i=u(i,j,k,h,x[c+5],N,4237533241),h=u(h,i,j,k,x[c+12],K,1700485571),k=u(k,h,i,j,x[c+3],L,2399980690),j=u(j,k,h,i,x[c+10],M,4293915773),i=u(i,j,k,h,x[c+1],N,2240044497),h=u(h,i,j,k,x[c+8],K,1873313359),k=u(k,h,i,j,x[c+15],L,4264355552),j=u(j,k,h,i,x[c+6],M,2734768916),i=u(i,j,k,h,x[c+13],N,1309151649),h=u(h,i,j,k,x[c+4],K,4149444226),k=u(k,h,i,j,x[c+11],L,3174756917),j=u(j,k,h,i,x[c+2],M,718787259),i=u(i,j,k,h,x[c+9],N,3951481745),h=m(h,d),i=m(i,e),j=m(j,f),k=m(k,g);var O=w(h)+w(i)+w(j)+w(k);return O.toLowerCase()}};return a}])}(this,this.angular,void 0),!function(a){"use strict";angular.module("tmh.dynamicLocale",[]).provider("tmhDynamicLocale",function(){function a(a,b,c){var d=document.createElement("script"),e=document.getElementsByTagName("body")[0];d.type="text/javascript",d.readyState?d.onreadystatechange=function(){("complete"===d.readyState||"loaded"===d.readyState)&&(d.onreadystatechange=null,c(b,30,!1))}:d.onload=function(){b()},d.src=a,d.async=!1,e.appendChild(d)}function b(b,c,f,g,j,k,l){function m(a,b){e===f&&(angular.forEach(a,function(c,d){b[d]?angular.isArray(b[d])&&(a[d].length=b[d].length):delete a[d]}),angular.forEach(b,function(c,d){angular.isArray(b[d])||angular.isObject(b[d])?(a[d]||(a[d]=angular.isArray(b[d])?[]:{}),m(a[d],b[d])):a[d]=b[d]}))}if(i[f])return i[f];
var n,o=j.defer();return f===e?o.resolve(c):(n=k.get(f))?(e=f,g.$evalAsync(function(){m(c,n),g.$broadcast("$localeChangeSuccess",f,c),d.put(h,f),o.resolve(c)})):(e=f,i[f]=o.promise,a(b,function(){var a=angular.injector(["ngLocale"]),b=a.get("$locale");m(c,b),k.put(f,b),delete i[f],g.$apply(function(){g.$broadcast("$localeChangeSuccess",f,c),d.put(h,f),o.resolve(c)})},l)),o.promise}var c,d,e,f="angular/i18n/angular-locale_{{locale}}.js",g="tmhDynamicLocaleStorageCache",h="tmhDynamicLocale.locale",i={};this.localeLocationPattern=function(a){return a?(f=a,this):f},this.useStorage=function(a){g=a},this.useCookieStorage=function(){this.useStorage("$cookieStore")},this.defaultLocale=function(a){c=a},this.$get=["$rootScope","$injector","$interpolate","$locale","$q","tmhDynamicLocaleCache","$timeout",function(a,e,i,j,k,l,m){var n=i(f);return d=e.get(g),a.$evalAsync(function(){var e;(e=d.get(h)||c)&&b(n({locale:e}),j,e,a,k,l,m)}),{set:function(c){return b(n({locale:c}),j,c,a,k,l,m)}}}]}).provider("tmhDynamicLocaleCache",function(){this.$get=["$cacheFactory",function(a){return a("tmh.dynamicLocales")}]}).provider("tmhDynamicLocaleStorageCache",function(){this.$get=["$cacheFactory",function(a){return a("tmh.dynamicLocales.store")}]}).run(["tmhDynamicLocale",angular.noop])}(window);var graphMaker=function(a){if(!a.wrapper||!a.values)return!1;var b=new google.visualization.DataTable;b.addColumn("string",a.values[0][0]),b.addColumn("number",a.values[0][1]),b.addColumn({type:"string",role:"tooltip"}),b.addColumn({type:"string",role:"style"}),b.addColumn({type:"string",role:"class"}),b.addRows(a.values.slice(1,a.values.length));var c,d,e={animation:{duration:1e3,easing:"easyOut"},bar:{groupWidth:"75%"},hAxis:{baselineColor:"#dcdcdc",format:"#",gridlines:{color:"#E4E4E4",count:5},textStyle:{color:"#565656",fontSize:10}},chartArea:{width:"85%",height:"80%"},vAxis:{baselineColor:"#dcdcdc",format:"#"+a.coin,gridlines:{color:"#E4E4E4",count:5},textStyle:{color:"#565656",fontSize:12}},colors:["green","green"],legend:{position:"none"}},f={tooltip:{trigger:"selection"},animation:{duration:1e3,easing:"easyOut"},bar:{groupWidth:"75%"},hAxis:{baselineColor:"#dcdcdc",format:"#",gridlines:{color:"#E4E4E4",count:5},textStyle:{color:"#565656",fontSize:6}},chartArea:{width:"85%",height:"80%"},vAxis:{baselineColor:"#dcdcdc",format:"#"+a.coin,gridlines:{color:"#E4E4E4",count:5},textStyle:{color:"#565656",fontSize:10}},colors:["green","green"],legend:{position:"none"}};a.maxValue&&(e.vAxis.maxValue=a.maxValue),a.minValue&&(e.vAxis.minValue=a.minValue);var g=function(){d?d.clearChart():void 0,500>c?h():i()},h=function(){$(a.wrapper).height(600),d=new google.visualization.BarChart(a.wrapper),d.draw(b,f)},i=function(){$(a.wrapper).height(200),d=new google.visualization.ColumnChart(a.wrapper),d.draw(b,e)},j=function(){d.clearChart(),c=void 0},k=function(){var b=$(a.wrapper).width();c!==b&&(c=b,g())};return{init:function(){function a(a){var c=d.getSelection()[0],e=b.getDistinctValues(4),f=e[c.row],g={};g.actionType="getAvailabilityChart",g.startDate=f;var h=angular.element("#ng-app").scope();h.$apply(function(){h.externalData=g})}k(),$("window").on("resize",function(a){k()}),google.visualization.events.addListener(d,"select",a)},clear:function(){j()}}},witPlotter=function(a){var b=a.current,c=(a.wrapper,$('<span class="text"></span>').appendTo(a.wrapper)),d=$("<div></div>").appendTo(a.wrapper)[0],e=c.parents(".chartContainer").find(".prevMonth"),f=c.parents(".chartContainer").find(".nextMonth"),g=c.parents(".chartContainer").find(".textMonth");e.show(),f.show();var h=function(a){g.html(a)},i=function(){e.show()},j=function(){f.show()},k=function(){e.hide()},l=function(){f.hide()},m=function(){a.data[b].graph.clear()},n=function(){a.data[b].graph||(a.data[b].graph=graphMaker({wrapper:d,values:a.data[b].values,maxValue:a.data[b].maxValue,minValue:a.data[b].minValue,coin:a.data[b].coin})),a.data[b].graph.init(),0===b?k():1===b?i():b===a.data.length-2?j():b===a.data.length-1&&l(),h(a.data[b].date.monthname+" "+a.data[b].date.year)},o=function(){b!==b.length-1&&(m(),b+=1,n())},p=function(){0!==b&&(m(),b-=1,n())};return e.on("click",p),f.on("click",o),n(),{getCurrent:function(){return b},getData:function(){return a.data},showCurrent:n,showNext:o,showPrevious:p}},Constants={};Constants.mealPlan={},Constants.mealPlan.breakfast={ticker:"HD",name:"With breakfast"},Constants.messages={type:{},position:{}},Constants.messages.type.success="SUCCESS",Constants.messages.type.notice="NOTICE",Constants.messages.type.info="INFO",Constants.messages.type.error="ERROR",Constants.messages.position.top_inventory_step_1="TOP_INVENTORY_STEP_1",Constants.messages.position.below_logo_step_1="BELOW_LOGO_STEP_1",Constants.messages.position.below_personal_info_step_2="BELOW_PERSONAL_INFO_STEP_2",Constants.messages.position.top_method_payment_step_2="TOP_METHOD_PAYMENT_STEP_2",Constants.messages.position.modal_step_1="MODAL_STEP_1",Constants.messages.position.modal_step_2="MODAL_STEP_2",Constants.markups={phase:{},position:{}},Constants.markups.phase.step1="STEP1",Constants.markups.phase.step2="STEP2",Constants.markups.phase.step3="STEP3",Constants.markups.phase.all="ALL",Constants.markups.position.afterbeginbody="FIRST_BODY",Constants.markups.position.beforeendbody="END_BODY",Constants.markups.position.beforeendhead="HEAD",Constants.panel={},Constants.panel.type={carousel:"carousel",description:"description",map:"map",discounts:"discounts",conditions:"conditions",chart:"chart"},Constants.assetsDir=ASSETS_DIR,Constants.imgDir="/WitBooker/img/",Constants.translationURL="/WitBooker/img/",Constants.dateFormat="dd-MM-yyyy",Constants.datePickerFormat="dd-mm-yyyy",Constants.cart={smallSize:"SMALL",largeSize:"LARGE"},Constants.serviceType={room:"ROOM",person:"PERSON",units:"UNIT"},Constants.popover={discount:{background:"ad0303"},reservationButton:{background:"000000"}},Constants.localeFilesDir="/WitBooker/i18n/",Constants.filters={minStay:"minStay",minNotice:"minNotice",maxNotice:"maxNotice",maxStay:"maxStay",closed:"closed",visible:"visible",occupationType:"occupationType",checkInCheckOut:"checkInCheckOut",checkIn:"checkIn",checkOut:"checkOut",validity:"validity",availability:"availability",reservationClosed:"reservationClosed",filterPrefix:"filterBy",restricted:"restricted"},Constants.occupant={restriction:{TAKE_ADULT_TEENAGER_CHILD:"TAKE_ADULT_TEENAGER_CHILD",TAKE_ADULT_TEENAGER_CHILD_BABY:"TAKE_ADULT_TEENAGER_CHILD_BABY",TAKE_SENIOR_ADULT_TEENAGER_CHILD_BABY:"TAKE_SENIOR_ADULT_TEENAGER_CHILD_BABY",TAKE_ADULT_CHILD_BABY:"TAKE_ADULT_CHILD_BABY",TAKE_ADULT_CHILD:"TAKE_ADULT_CHILD",TAKE_ALL_PEOPLE:"TAKE_ALL_PEOPLE",NONE:"NONE"}},Constants.payment={type:{creditCard:"tcgarantia",tctoken:"tctoken",tpvtoken:"tpvtoken",transfer:"tr",pointOfSale:"tpv",creditCardOrTransfer:"TC_TR",paypal_ec:"paypal_ec",paypal_std:"paypal_std"},sipay:{timeoutInterval:300}};var Events={};Events.UPDATE_AVAILABILITY="update_availability",Events.QUERY_AVAILABILITY="query_availability",Events.ADDED_TO_CART="added_to_cart",Events.UPDATE_INVENTORIES_BY_CART="done_added_to_cart",Events.CHANGE_LANGUAGE="change_language",Events.CHANGE_LANGUAGE_DONE="change_language_done",Events.REMOVED_FROM_CART="removed_from_cart",Events.GO_TO_STEP1="go_to_step1",Events.TRANSITION_TO_STEP2="transition_to_step2",Events.UPDATE_SERVICE_RATE="update_service_rate",Events.SUBMIT_PAYMENT_DATA_FORM="submit_payment_data_form",Events.RESERVATION_DATA_UPDATE="reservation_data_update",Events.UPDATE_SERVICE_QUANTITY="update_service_quantity",Events.UPDATE_SERVICE_SELECTION="update_service_selection",Events.CHANGE_CURRENCY="change_currency",angular.module("witbooker",["ui.router","ui.bootstrap","ngSanitize","pascalprecht.translate","tmh.dynamicLocale","witbooker.filters","witbooker.directives","witbooker.controllers","witbookerServices","paymentServices","ngCacheBuster","angular-md5"]).constant("constants",Constants).constant("events",Events).config(["$stateProvider","$urlRouterProvider","constants",function(a,b,c){a.state("stepOne",{url:"/stepOne",templateUrl:c.assetsDir+"partials/step_one.html",controller:"StepOne"}).state("stepOne.list",{url:"/list?allreservationsinvalid&error",templateUrl:c.assetsDir+"partials/step_one/stepOne.list.html"}).state("stepOne.map",{url:"/map",templateUrl:c.assetsDir+"partials/step_one/stepOne.map.html"}).state("stepTwo",{url:"/stepTwo/:establishment/",controller:"StepTwo",templateUrl:c.assetsDir+"partials/stepTwo.html"}).state("stepTwoPaypal",{url:"/stepTwo/:establishment/:paypalData",controller:"StepTwo",templateUrl:c.assetsDir+"partials/stepTwo.html"}),b.otherwise("/"),b.when("/","/stepOne/list")}]).config(["$translateProvider","tmhDynamicLocaleProvider","constants",function(a,b,c){var d=window.location.pathname.split("/")[5];a.translations(d,translation).preferredLanguage(d),a.useUrlLoader("/WitBooker/translation/index"),b.localeLocationPattern(c.localeFilesDir+"angular-locale_{{locale}}.js")}]).config(["currencySettingsProvider","constants",function(a,b){a.defaultCurrency(witbookerParams.representation.defaultCurrency),a.currentCurrency(witbookerParams.representation.currency),a.rates(witbookerParams.representation.conversionRate),a.conversionRate(witbookerParams.representation.conversionRate[witbookerParams.representation.currency])}]).config(["httpRequestInterceptorCacheBusterProvider",function(a){var b=[/.*\/WitBooker\/stepTwo\/obtainReservationInformation.*/,/.*\/WitBooker\/base\/addToCart.*/,/.*\/WitBooker\/base\/removeFromCart.*/,/.*\/WitBooker\/base\/calculateAvailability.*/,/.*\/WitBooker\/base\/updateSessionAsync.*/,/.*\/WitBooker\/stepTwo\/updateReservation.*/,/.*\/WitBooker\/stepTwo\/reservation.*/];a.setMatchlist(b,!0)}]).config(["$httpProvider",function(a){var b=["$q","$location","$injector","constants","$rootScope","events",function(a,b,c,d,e,f){return{request:function(a){var b;return b||(b=c.get("$state")),a.hasOwnProperty("data")&&(a.data.hasOwnProperty("regularParams")||a.data.hasOwnProperty("representation"))&&(a.data.representation||(a.data.representation={}),a.data.representation.currentState=-1!=b.current.name.indexOf("stepOne")?"StepOne":"StepTwo"),a},response:function(a){var b;if(a&&a.data&&a.data.hasOwnProperty("error")&&"EXPSESS"===a.data.error.code){b||(b=c.get("$modal"));var f,g;f=["$scope","$modalInstance",function(a,b){a.closeInfo=function(){b.close();var a=STEP1_URL.replace(new RegExp("TICKERPLACEHOLDER","g"),e.witbookerParams.representation.ticker).replace("LANGUAGEPLACEHOLDER",e.witbookerParams.representation.locale);window.location=a}}],e.message={body:"trans.session.expired"},g=b.open({templateUrl:d.assetsDir+"partials/step_one/misc/genericModal.html",controller:f,scope:e})}return a}}}];a.interceptors.push(b)}]).run(["$rootScope","util","events","$http","$templateCache","constants","$compile","tmhDynamicLocale","currencySettings","$sce","Api","tmhDynamicLocaleCache",function(a,b,c,d,e,f,g,h,i,j,k,l){b.loadLocales(l),Constants.markups={phase:{},position:{}},Constants.markups.phase.step1="STEP1",Constants.markups.phase.step2="STEP2",Constants.markups.phase.step3="STEP3",Constants.markups.phase.all="ALL",Constants.markups.position.afterbeginbody="FIRST_BODY",Constants.markups.position.beforeendbody="END_BODY",Constants.markups.position.beforeendhead="HEAD",a.customMarkupAdded={},a.constants=f,a.affectedAccommodations={},witbookerParams.regularParams.startDate=b.parseDate(witbookerParams.regularParams.startDate),witbookerParams.regularParams.endDate=b.parseDate(witbookerParams.regularParams.endDate),a.witbookerParams=witbookerParams,a.legacyParams=b.parseQueryString(window.location.search);var m=data.establishment;a.establishment=m,cartData&&"[object Array]"===Object.prototype.toString.call(cartData)&&(a.reservationData=cartData),a.cart={},a.cart.reservations=[],a.cart.processedReservations={},h.set(a.witbookerParams.representation.locale),a.$on(c.CHANGE_LANGUAGE,function(b,c){a.witbookerParams.representation.locale=c,h.set(c)});var n=function(a){var b={};angular.forEach(a.messages,function(a,c){a.hidden||(b[a.position]||(b[a.position]=[]),a.descriptionHtml=j.trustAsHtml(a.description),b[a.position].push(a))}),a.sortedMessages=b};n(m),a.$on(c.UPDATE_AVAILABILITY,function(c,d){a.witbookerParams.representation.activePromoCodes=d.activePromoCodes,a.witbookerParams.regularParams.discountPromoCodes=d.discountPromoCodes,a.witbookerParams.regularParams.inventoryPromoCodes=d.discountPromoCodes,a.affectedAccommodations={},d.messages&&angular.forEach(d.messages,function(b,c){b.show=!0,a.establishment.sortedMessages||(a.establishment.sortedMessages={}),a.establishment.sortedMessages.hasOwnProperty(b.position)||(a.establishment.sortedMessages[b.position]=[]);for(var d=0;d<a.establishment.sortedMessages[b.position].length;d++){var e=a.establishment.sortedMessages[b.position][d];if(b.title&&e.title===b.title)return}b.descriptionHtml=j.trustAsHtml(b.description),a.establishment.sortedMessages[b.position].push(b)}),b.setInventoryLinesGrouped(a.establishment,d);var e=[],f=a.witbookerParams.regularParams.startDate,g=a.witbookerParams.regularParams.endDate;angular.forEach(a.cart.reservations,function(c,d){var h=a.establishment.inventoryRelations.parentOfTicker[c.inventoryLine.ticker],i=a.establishment.inventoryRelations.childrenOfTicker[h];g>c.startDate&&f<c.endDate&&(e=e.concat(i)),b.updateChildrenAndParentInventories(a.witbookerParams.regularParams.startDate,a.witbookerParams.regularParams.endDate,a.establishment,c,"-1",!0,function(b){b&&(angular.extend(a.affectedAccommodations,b),a.affectedAccommodations.counter=a.affectedAccommodations.counter?a.affectedAccommodations.counter+1:1)}),a.cart.processedReservations[c.id]={type:"add"}}),b.changeAccommodationDisplayedPrice(b.removeDuplicatesFromSimpleArray(e),a.establishment,!1)}),a.$on(c.UPDATE_INVENTORIES_BY_CART,function(d,e,f){a.establishment.hasOwnProperty("establishments")||a.cart.processedReservations.hasOwnProperty(e.id)||(b.updateChildrenAndParentInventories(a.witbookerParams.regularParams.startDate,a.witbookerParams.regularParams.endDate,a.establishment,e,"-1",!0,function(b){b&&(angular.extend(a.affectedAccommodations,b),a.affectedAccommodations.counter=a.affectedAccommodations.counter?a.affectedAccommodations.counter+1:1)}),a.cart.processedReservations[e.id]={type:"add"}),1==a.cart.reservations.length&&null!=f&&a.$broadcast(c.TRANSITION_TO_STEP2,{establishment:e.establishment.ticker})}),a.$on(c.CHANGE_CURRENCY,function(a,b){b||(b=i),i.currentCurrency=b.newCurrency,i.conversionRate=i.rates[i.currentCurrency]}),a.$on(c.CHANGE_LANGUAGE,function(d,e,f){angular.forEach(a.establishment.languages,function(b,c){b.code==e&&(a.witbookerParams.representation.language=b)});var g=b.getInventoryLinesID(a.establishment),i=[],j=[],l=[],o={};o[a.establishment.ticker]=[];var p=function(b,c,d){angular.forEach(c.reservations,function(c,e){b[d.ticker].push(c.inventoryLine.ticker),i.push(c.inventoryLine),l.push(c.accommodation),angular.forEach(c.inventoryLine.services,function(b,c){o[a.establishment.ticker].push(b.ticker),j.push(b)})})};p(g,a.cart,a.establishment);var q=b.getDiscountsID(a.establishment),r={establishmentTicker:a.establishment.ticker,locale:e,language:f,inventories:g,discounts:q,services:o,hotels:a.witbookerParams.representation.hotels},s=k.LocalizedData.post(r,function(){jQuery.extend(!0,a.establishment,s.establishment),n(m);var d=function(c,d,e){if(d&&!(d.length<=0)){var f=[];angular.forEach(d,function(a,b){f.push(a.ticker)}),angular.forEach(e,function(a,b){f.push(a.ticker)}),angular.forEach(j,function(a,b){f.push(a.ticker)});var g=b.getInventoryLineByTicker(c,f),h=g.inventories,i=g.accommodation,k=g.services;angular.forEach(d,function(a,b){angular.forEach(h,function(b,c){angular.forEach(b,function(b,c){a.ticker===b.ticker&&(a.condition=b.condition,a.configuration=b.configuration,a.mealPlan=b.mealPlan)})})}),angular.forEach(e,function(a,b){angular.forEach(i,function(b,c){angular.forEach(b,function(b,c){a.ticker===b.ticker&&(a.description=b.description,a.name=b.name)})})}),angular.forEach(a.services,function(a,b){angular.forEach(k,function(b,c){angular.forEach(b,function(b,c){a.ticker===b.ticker&&(a.description=b.description,a.name=b.name)})})})}};d(a.establishment,i,l),h.set(e),$("#disableClick").removeClass("loading"),a.$broadcast(c.CHANGE_LANGUAGE_DONE,{})});"en"==e?($("#datepickerEntryDate").datepicker("option",$.datepicker.regional[""]),$("#datepickerExitDate").datepicker("option",$.datepicker.regional[""])):($("#datepickerEntryDate").datepicker("option",$.datepicker.regional[e]),$("#datepickerExitDate").datepicker("option",$.datepicker.regional[e])),$("#datepickerEntryDate").datepicker("option","dateFormat","dd-mm-yy"),$("#datepickerExitDate").datepicker("option","dateFormat","dd-mm-yy")}),a.cartInfoProcessed=!1,a.servicesProcessed={}}]).filter("range",function(){return function(a,b,c){b=parseInt(b),c=parseInt(c);for(var d=b;c>=d;d++)a.push(d);return a}}),angular.module("witbooker").run(["$templateCache",function(a){"use strict";a.put("js/partials/localized_menu.html",'<div><div class=menuConfiguracion><ul class="menuOpciones nav nav-pills"><li class="idiomasBoton dropdown selector" ng-if="languages.length>1"><a class=dropdown-toggle data-toggle=dropdown><b class=caret></b>&nbsp;&nbsp; <i class="flags lang-{{witbookerParams.representation.language.code}}"></i>{{witbookerParams.representation.language.name}}</a><ul class="dropdown-menu pull-right" ng-if=true><li ng-repeat="lang in languages" ng-if="lang.code!=witbookerParams.representation.language.code"><a ng-click=changeLanguage(lang.code,lang.locale)><i class="flags lang-{{lang.code}}"></i>{{lang.name}}</a></li></ul></li><li id=conversor-divisas class="divisaBoton dropdown selector conversor-divisas"><a class=dropdown-toggle data-toggle=dropdown href=#><b class=caret></b>&nbsp;&nbsp; <strong>{{witbookerParams.representation.currencySymbol}}</strong> {{witbookerParams.representation.currency}}</a><ul class="dropdown-menu pull-right"><li ng-repeat="currency in currencies" ng-if="currency.code!=witbookerParams.representation.currency"><a ng-click=changeCurrency(currency.code,currency.symbol)><strong>{{currency.symbol}}</strong> {{currency.code}}</a></li></ul></li></ul><ul class=menuPasos><li class="menuDispo menuSelected" style="color: rgb(14, 119, 187)"><span class=menuNumeros>&nbsp;</span><span translate="">trans.step1.stepLabel</span></li><li class=menuDatos style="color: rgb(113, 113, 113)"><span class=menuNumeros>&nbsp;</span><span translate="">trans.step2.stepLabel</span></li><li class=menuConfirm style="color: rgb(113, 113, 113)"><span class=menuNumeros>&nbsp;</span><span translate="">trans.step3.stepLabel</span></li></ul><div class=clearer></div></div></div>'),a.put("js/partials/state1.html",'<h1>State 1</h1><hr><a ui-sref=step1.list>Show List</a><div ui-view=""></div>'),a.put("js/partials/state2.html",'<h1>State 2</h1><hr><a ui-sref=step2.list>Show List</a><div ui-view=""></div>'),a.put("js/partials/state2.list.html",'<h3>List of State 2 Things</h3><ul><li ng-repeat="thing in things">{{ thing }}</li></ul>'),a.put("js/partials/stepTwo.html",'<!DOCTYPE html><html><head><title></title></head><body><script>ga(\'tgaown.send\', \'pageview\',document.location.pathname.replace("step1","step2"));\n	ga(\'tgaclient.send\', \'pageview\',document.location.pathname.replace("step1","step2"));</script><custom-markup ng-if="currentState.indexOf(\'stepTwo\')>=0" markups=establishment.markups[constants.markups.phase.step2] position=constants.markups.position.afterbeginbody phase=constants.markups.phase.step2></custom-markup><custom-markup ng-if="currentState.indexOf(\'stepTwo\')>=0" markups=establishment.markups[constants.markups.phase.all] position=constants.markups.position.afterbeginbody phase=constants.markups.phase.all></custom-markup><div class=logoMobileContainer><div class=logoMobile><div class=logoContainerMobile><a href={{util.generateHotelUrl(witbookerParams.representation.hotelSiteUrl,witbookerParams.representation.hotelLogoHasLink)}}><img ng-src={{util.generateLogoUrl(establishment)}} alt="" longdesc=""></a></div></div><div class=isDemo>&nbsp;</div></div><div class=clearer></div><div class=row><div class="col-md-8 mainStepContainer"><div witbooking-localization="" class=topRowContainer witbooker-params=witbookerParams languages=establishment.languages currencies=establishment.currencies></div><div witbooking-cart="" size=constants.cart.largeSize establishment=establishment></div><div class=clearer></div><div id=wrapList><div ui-view=""></div><div id=disableClick></div></div><form method=post name=form role=form class=css-form novalidate><div witbooking-customer-data-form="" form=form establishment=establishment id=customerDataForm customer-data=customerData class=customerFormContainer></div><div witbooking-payment-data-form="" form=form establishment=establishment id=paymentDataForm payment-data=paymentData reservations=cart.reservations class=paymentFormContainer></div></form></div><div class="col-md-4 promotionSideContainer"><div class=logo_hotel><style>.logo_hotel{\n				    padding-top: 55px;\n				    padding-bottom: 55px;\n				    display: table;\n				    margin-right: auto;\n				    margin-left: auto;\n			    }</style><div class=logoContainer style="display: table-cell"><a href={{util.generateHotelUrl(representation.hotelSiteUrl,representation.hotelLogoHasLink)}}><img ng-src={{util.generateLogoUrl(establishment)}} alt="" longdesc=""></a></div><div class=isDemo>&nbsp;</div></div><div class=clearer>&nbsp;</div></div></div><div witbooking-footer="" ng-if=" !witbookerParams.representation.iframeMode || (witbookerParams.representation.iframeMode  && witbookerParams.representation.showPromoCodeInputOnIframeMode )" witbookerparams=witbookerParams></div><custom-markup ng-if="currentState.indexOf(\'stepTwo\')>=0" markups=establishment.markups[constants.markups.phase.step2] position=constants.markups.position.beforeendbody phase=constants.markups.phase.step2></custom-markup><custom-markup ng-if="currentState.indexOf(\'stepTwo\')>=0" markups=establishment.markups[constants.markups.phase.all] position=constants.markups.position.beforeendbody phase=constants.markups.phase.all></custom-markup></body></html>'),a.put("js/partials/step_one.html","<!DOCTYPE html><html><head><title></title></head><body><script>ga('tgaown.send', 'pageview',document.location.pathname);\n    ga('tgaclient.send', 'pageview',document.location.pathname);\n"+'    console.log("page view step1 set");</script><custom-markup ng-if="currentState.indexOf(\'stepOne\')>=0" markups=establishment.markups[constants.markups.phase.step1] position=constants.markups.position.afterbeginbody phase=constants.markups.phase.step1></custom-markup><custom-markup ng-if="currentState.indexOf(\'stepOne\')>=0" markups=establishment.markups[constants.markups.phase.all] position=constants.markups.position.afterbeginbody phase=constants.markups.phase.all></custom-markup><div witbooking-modal-messages="" messages=establishment.sortedMessages[constants.messages.position.modal_step_1] establishment=establishment></div><div class=logoMobileContainer><div class=logoMobile><div class=logoContainerMobile><a href={{util.generateHotelUrl(witbookerParams.representation.hotelSiteUrl,witbookerParams.representation.hotelLogoHasLink)}}><img ng-src={{util.generateLogoUrl(establishment)}} alt="" longdesc=""></a></div></div><div class=isDemo>&nbsp;</div></div><div class=clearer></div><div class=row><div class=col-md-8><div witbooking-localization="" ng-if=!witbookerParams.representation.iframeMode class=topRowContainer witbooker-params=witbookerParams languages=establishment.languages currencies=establishment.currencies></div><div class=promotionTopContainer ng-if=!witbookerParams.representation.hidePromos ng-show="util.countOwnProperties(establishment.discounts)-1>0"><div accordion="" class=promotionsAccordion><div accordion-group=""><div accordion-heading=""><div class=headerSpecials ng-class={&quot;open&quot;:panelPromotionMobileOpen} ng-click="panelPromotionMobileOpen=!panelPromotionMobileOpen"><div><div class=pull-left><span class="sprite specials"></span>  <span class=title><span translate="">trans.step1.discounts</span> ({{ util.countOwnProperties(establishment.discounts)!= 0 ? util.countOwnProperties(establishment.discounts) -1 : 0 }})</span></div><div class=pull-right><span class="sprite arrowPromotionMobile">&nbsp;</span></div><div class=clearer></div></div></div></div><div witbooking-discounts="" class=discountsMobile discounts=establishment.discounts></div></div></div></div><div witbooking-front-end-messages="" messages=establishment.sortedMessages[constants.messages.position.top_inventory_step_1] establishment=establishment class=messagesContainer></div><div witbooking-cart=""></div><div witbooking-error-alert="" ng-repeat="errorMessage in establishment.errorMessages " error-message=errorMessage></div><div id=booking-form witbooking-booking-form="" representation=representation witbooker-params=witbookerParams></div><div witbooking-availability="" establishment=establishment witbooker-params=witbookerParams></div><div class=menuPortal ng-if=showMapButton><span class=textoMenuPortal><span translate="">trans.view</span>:</span><div class=btn-group ng-controller=viewButtoms><a ui-sref=stepOne.list id=listStepOne class="btn viewButton" ng-model=radioModel btn-radio="\'list\'"><i class="sprite listPortal"></i></a> <a ui-sref=stepOne.map id=mapStepOne class="btn viewButton" ng-model=radioModel btn-radio="\'map\'"><i class="sprite mapPortal"></i></a></div></div><div class=clearer></div><div id=wrapList><div ui-view=""></div><div id=disableClick></div></div></div><div class="col-md-4 promotionSideContainer"><div class=logo_hotel><style>.logo_hotel{\n                    padding-top: 55px;\n                    padding-bottom: 55px;\n                    display: table;\n                    margin-right: auto;\n                    margin-left: auto;\n                }</style><div class=logoContainer style="display: table-cell"><a href={{util.generateHotelUrl(witbookerParams.representation.hotelSiteUrl,witbookerParams.representation.hotelLogoHasLink)}}><img ng-src={{util.generateLogoUrl(establishment)}} alt="" longdesc=""></a></div><div class=isDemo>&nbsp;</div></div><div class=clearer>&nbsp;</div><div witbooking-front-end-messages="" messages=establishment.sortedMessages[constants.messages.position.below_logo_step_1] establishment=establishment class=messagesContainer></div><div witbooking-promotions="" ng-if=!witbookerParams.representation.hidePromos discounts=establishment.discounts class=messagesContainer toggle-accordion=toggleAccordion></div></div></div><div witbooking-footer="" ng-if=" !witbookerParams.representation.iframeMode || (witbookerParams.representation.iframeMode  && witbookerParams.representation.showPromoCodeInputOnIframeMode )" witbookerparams=witbookerParams></div><div witbooking-tracking-pixels=""></div><custom-markup ng-if="currentState.indexOf(\'stepOne\')>=0" markups=establishment.markups[constants.markups.phase.step1] position=constants.markups.position.beforeendbody phase=constants.markups.phase.step1></custom-markup><custom-markup ng-if="currentState.indexOf(\'stepOne\')>=0" markups=establishment.markups[constants.markups.phase.all] position=constants.markups.position.beforeendbody phase=constants.markups.phase.all></custom-markup></body></html>'),a.put("js/partials/step_one/availability.html",'<div class="alert availabilityMessages" ng-class="{\'alert-success\':!establishment.allFiltered,\'alert-danger\':establishment.allFiltered}"><span class=sprite ng-class="{\'ok\':!establishment.allFiltered,\'error\':establishment.allFiltered}"></span> <span class=textDispo><span class=pull-left ng-show="!establishment.allFiltered && !establishment.allRestricted">&nbsp;<span translate="">trans.step1.availabilitymessage</span>:</span> <span class=pull-left ng-show=establishment.allRestricted>&nbsp;<span translate="">trans.step1.availabilitymessage</span>:</span> <span class=pull-left ng-show=establishment.allFiltered>&nbsp;<span translate="">trans.step1.unavailabilitymessage</span>:</span> <span class="pull-left firstDate"><span class="str strmonth">&nbsp;{{witbookerParams.regularParams.startDate | date : \'d MMM\'}}</span>&nbsp;{{witbookerParams.regularParams.startDate | date : \'yyyy\'}}&nbsp;</span> <span class=pull-left>-</span> <span class=pull-left><span class="str strmonth">&nbsp;{{witbookerParams.regularParams.endDate | date : \'d MMM\'}}</span>&nbsp;{{witbookerParams.regularParams.endDate | date : \'yyyy\'}}&nbsp;</span> <span class="pull-left textNights">(<span class=str>{{(witbookerParams.regularParams.endDate-witbookerParams.regularParams.startDate)/(1000*60*60*24) | number:0 }} <span translate="">trans.step1.inventoryline.nights</span></span>)</span></span><div class=clearer></div></div>'),a.put("js/partials/step_one/booking_form.html",'<div class=bookingFormContainer><form class=bookingForm method=post><div class=form-left><div class="bookingFormDays input-daterange" id=datepicker><div class=icon-label><span class="widget-icon calendarForm"></span></div><div class=checkin><input class=form-control id=datepickerEntryDate readonly ng-change=formChanged() ng-model=entryDate name=start></div><span>&nbsp;-&nbsp;</span><div class=checkout><input class=form-control id=datepickerExitDate readonly ng-change=formChanged() ng-model=exitDate name=end></div><div class=nights><span>{{(util.parseDate(exitDate)-util.parseDate(entryDate))/(1000*60*60*24) | number:0 }}</span><i class=icon-night></i></div></div><div class=bookingFormPeople><div class="bookAdults peopleSelect" ng-show=!hideSeniorSelector><div class=icon-label><span class="widget-icon pers"></span> <span class=icon-label-text>+{{witbookerParams.representation.adultMaxAge+1}}}</span></div><select class=bookAdultsSelector name=seniors ng-model=seniors ng-change=formChanged() ng-options="option.availability for option in seniorSelectorOptions"></select></div><div class="bookAdults peopleSelect" ng-show=!hideAdultSelector><div class=icon-label><span class="widget-icon pers"></span> <span ng-if="!hideSeniorSelector && !hideAgeIndicator" class=icon-label-text>{{adultMinAge}}-{{witbookerParams.representation.adultMaxAge}}</span> <span ng-if="hideSeniorSelector  && !hideAgeIndicator" class=icon-label-text>+{{adultMinAge}}</span></div><select class=bookAdultsSelector name=adults ng-model=adults ng-change=formChanged() ng-options="option.availability for option in adultSelectorOptions"></select></div><div class="bookKids peopleSelect" ng-show=!hideTeenagerSelector><div class=icon-label><span class="widget-icon ninos"></span> <span class=icon-label-text>{{witbookerParams.representation.childrenMaxAge+1}}-{{witbookerParams.representation.teenagerMaxAge}}</span></div><select class=bookAdultsSelector name=teenagers ng-model=teenagers ng-change=formChanged() ng-options="option.availability for option in teenagerSelectorOptions"></select></div><div class="bookKids peopleSelect" ng-show=!hideChildSelector><div class=icon-label><span class="widget-icon ninos"></span> <span ng-if=!witbookerParams.representation.filterGuestsByAge class=icon-label-text>{{witbookerParams.representation.childrenMinAge}}-{{witbookerParams.representation.childrenMaxAge}}</span> <span ng-if=witbookerParams.representation.filterGuestsByAge class=icon-label-text>{{childrenFilterMinAge}}-{{childrenFilterMaxAge}}</span></div><select class=bookKidsSelector name=children ng-model=children ng-change=formChanged();formKidsChanged(); ng-options="option.availability for option in childSelectorOptions"></select></div><div class="bookBaby peopleSelect" ng-show=!hideBabySelector><div class=icon-label><span class="widget-icon bebes" ng-class="{\'ninos\': witbookerParams.representation.occupancyWithJunior, \'bebes\': !witbookerParams.representation.occupancyWithJunior}"></span> <span class=icon-label-text>{{witbookerParams.representation.babyMinAge}}-{{witbookerParams.representation.childrenMinAge-1}}</span></div><select class=bookBabySelector name=babies ng-model=babies ng-change=formChanged() ng-options="option.availability for option in babySelectorOptions"></select></div></div><div class=bookingFormAgeOfChildren ng-if="witbookerParams.representation.filterGuestsByAge && witbookerParams.regularParams.occupants.guestAges.length>0"><span class=ageOfChildren translate="">trans.step1.ageofchildren</span><br><span ng-repeat="guest in witbookerParams.regularParams.occupants.guestAges track by $index"><select ng-model=witbookerParams.regularParams.occupants.guestAges[$index] ng-change=formChanged()><option value={{option.id}} ng-repeat="option in guestAgesSelectorOptions" ng-selected="{{guest == option.id}}">{{option.text}}</option></select></span></div></div><div class=form-right><div class=container-right><div class=advancedFilter><div ng-show="util.countOwnProperties(witbookerParams.representation.activeExtraFilters)>0"><span translate="">trans.step1.bookingform.advancedfilter</span>: <span class=filter ng-repeat="filter in witbookerParams.representation.activeExtraFilters.il_equal">"{{filter}}"{{$last ? \'\' : \',\'}}</span> <span class=filter ng-repeat="filter in witbookerParams.representation.activeExtraFilters.il_like">"{{filter}}"{{$last ? \'\' : \',\'}}</span> <i class=icon-deleteFilter ng-click=cleanFilters()></i></div></div><div class=promotionCode><div ng-show=witbookerParams.representation.showPromoCode><a class=promoToggle ng-model=promoToggle ng-click="promotionCodeOpen=!promotionCodeOpen;$(\'#promotionCode\').focus();alert(\'H\');"><span translate="">trans.step1.form.promotionalcode</span></a><input ng-show=promotionCodeOpen id=promotionCode ng-model=promoCode name=prom></div></div><div class=bookingFormButton><button type=submit class="btn sendBookingForm" ng-click=getAvailability();><span translate="">trans.step1.bookingform.getavailability</span>&nbsp;<span class=forwardIcon></span></button></div></div></div></form></div>'),
a.put("js/partials/step_one/errorAlert.html",'<div ng-if=alert.show><div alert="" type=alert.alertType close=alert.close(show) class=messages><span ng-if="alert.errorType==constants.filters.occupationType "><strong><span translate="">trans.step1.unavailable.{{constants.filters.occupationType}}.generalErrorMessage</span> : {{alert.value.adults}}&nbsp; <span translate="">trans.step1.occupant.adults</span> , {{alert.value.children}}&nbsp;<span translate="">trans.step1.occupant.children</span>, {{alert.value.babies}}&nbsp;<span translate="">trans.step1.occupant.babies</span>.<div translate="">trans.step1.unavailable.tryAgain</div></strong></span></div></div>'),a.put("js/partials/step_one/establishment.html",'<div ng-repeat="establishment in establishment.establishments" ng-include="\'partials/step_one/establishment.html\'"></div><div accordion="" class=hotelAccordion ng-if="!(establishment && establishment.hasOwnProperty(&quot;establishments&quot;) && establishment.establishments.length>0)"><div accordion-group="" is-open=true><div accordion-heading=""><div witbooking-establishment="" show-extra-desc=showExtraDesc util=util establishment=establishment ng-click=toggleAccordion(establishment)></div><div witbooking-info-panel-static="" ng-click=interceptClick($event) establishment=establishment title="\'description\'" type=establishment.visualState.panelType></div></div><div class=accommodation_list ng-include="constants.assetsDir+\'partials/step_one/establishment/accommodation_list.html\'"></div></div></div>'),a.put("js/partials/step_one/establishment/accommodation.html",'<div class="row accordeonElem accommodationRow" id={{accommodation.accommodation.ticker}} ng-class="{panelChildActive:hoverChild, panelChildOpen:accommodation.isOpen}" ng-mouseenter="hoverChild=true" ng-mouseleave="hoverChild=false" ng-click="accommodation.accommodation.visualState.showPanel=false"><div class=hotelInfo><div class=accommodationImageContainer ng-click=showExtraDesc(accommodation.accommodation,constants.panel.type.carousel,$event) ng-class="{hoverImage: hoverHotelImage}" ng-mouseenter="hoverHotelImage=true" ng-mouseleave="hoverHotelImage=false"><img class=accommodationImage ng-src="{{util.generateImgUrl(establishment,accommodation.accommodation,&quot;accommodation&quot;,accommodation.accommodation.media[0].path,{width:125,height:77}) }}" fallback-src=""> <span class=icon-zoom-cont>&nbsp;</span></div><div class=hotelDesc><div><p ng-bind-html=accommodation.accommodation.name class=accommodationName></p><p class=bookedDate>{{ witbookerParams.regularParams.startDate| date : "dd MMM" | uppercase}} - {{ witbookerParams.regularParams.endDate| date : "dd MMM" | uppercase}}</p></div><div class=icons><div><span class="sprite pictures" ng-class="{selectedIcon:(accommodation.accommodation.visualState.showPanel && accommodation.accommodation.visualState.panelType==constants.panel.type.carousel)}" ng-click=showExtraDesc(accommodation.accommodation,constants.panel.type.carousel,$event)>&nbsp;</span> <span class="sprite infoNew" ng-class="{selectedIcon:(accommodation.accommodation.visualState.showPanel && accommodation.accommodation.visualState.panelType==constants.panel.type.description)}" ng-click=showExtraDesc(accommodation.accommodation,constants.panel.type.description,$event)>&nbsp;</span></div></div></div></div><div class=reservationInfo ng-if=accommodation.accommodation.cheapestRate><div class=hotelPrice ng-if=!isCollapsed><span class=priceContainer><p class=fromText translate="">trans.step1.hotel.priceFrom</p><p class=amountContainer><span class=integer>{{(accommodation.accommodation.cheapestRate) | currencyConverter : establishment | integerDigits }}</span> <span class=decimalSeparator>,</span> <span class=decimal>{{(accommodation.accommodation.cheapestRate) | currencyConverter : establishment | fractionalDigits | number:2 | limitTo:-2}}</span></p><p class=priceOptionsContainer><span class=currency>{{witbookerParams.representation.currency}}</span> <span class=perNightText>&nbsp;/<span translate="">trans.step1.hotel.night</span></span></p><span class=reservationLink style="text-decoration: underline" translate="">trans.step1.hotel.bookOnline</span></span></div><div class=hotelArr><i class="sprite arrowRoom" ng-class="{ \'open\': accommodation.isOpen }">&nbsp;</i></div></div><div class=errorContainer ng-if=!accommodation.accommodation.cheapestRate><div class=inventoryError><span class=locked ng-if="errorType!=constants.filters.restricted"><span translate="">trans.closed</span><br></span> <span class=alternateAction ng-if="errorType==constants.filters.closed" translate="">trans.changeDates</span> <span class=alternateAction ng-if="errorType==constants.filters.restricted" translate="">trans.step1.inventoryline.viewoptions</span></div><div class=hotelArr><i class="sprite arrowRoom" ng-class="{ \'open\': accommodation.isOpen }">&nbsp;</i></div></div></div>'),a.put("js/partials/step_one/establishment/accommodation_list.html",'<div accordion="" class=accommodationAccordion ng-repeat="accommodation in establishment.inventoryLinesGrouped | orderBy:\'accommodation.order\':false"><div accordion-group="" is-open={{accommodation.isOpen}}><div accordion-heading=""><div witbooking-accommodation="" show-extra-desc=showExtraDesc accommodation=accommodation establishment=establishment witbooker-params=witbookerParams representation=representation ng-click=toggleAccordion(accommodation)></div><div witbooking-info-panel-static="" ng-click=interceptClick($event) establishment=accommodation.accommodation type=accommodation.accommodation.visualState.panelType></div></div><div class=configuration_list ng-include="constants.assetsDir+\'partials/step_one/establishment/inventoryLine_list.html\'"></div></div></div>'),a.put("js/partials/step_one/establishment/hotel.html",'<div class="row accordeonElem hotelRow" id={{establishment.ticker}} ng-class="{panelActive:hover, panelOpen:establishment.isOpen}" ng-mouseenter="hover=true" ng-mouseleave="hover=false" ng-click="establishment.visualState.showPanel=false"><div class=hotelInfo><div class=hotelImageContainer ng-click=showExtraDesc(establishment,constants.panel.type.carousel,$event) ng-class="{hoverImage: hoverHotelImage}" ng-mouseenter="hoverHotelImage=true" ng-mouseleave="hoverHotelImage=false"><img class=hotelImage ng-src="{{util.generateImgUrl(establishment,establishment,&quot;hotel&quot;,establishment.media[0].path,{width:170,height:105}) }}" fallback-src=""> <span class=icon-zoom-cont>&nbsp;</span></div><div class=hotelDesc><div><p class=hotelName>{{establishment.name | uppercase}}</p><p class=cityName>{{ establishment.contactInfo.city }}</p></div><div class=icons><span class="sprite pictures" ng-class="{selectedIcon:(establishment.visualState.showPanel && establishment.visualState.panelType==constants.panel.type.carousel)}" ng-click=showExtraDesc(establishment,constants.panel.type.carousel,$event)>&nbsp;</span> <span class="sprite infoNew" ng-class="{selectedIcon:(establishment.visualState.showPanel && establishment.visualState.panelType==constants.panel.type.description)}" ng-click=showExtraDesc(establishment,constants.panel.type.description,$event)>&nbsp;</span> <span class="sprite maps" ng-if="establishment.contactInfo.hasOwnProperty(\'latitude\')" ng-class="{selectedIcon:(establishment.visualState.showPanel && establishment.visualState.panelType==constants.panel.type.map)}" ng-click=showExtraDesc(establishment,constants.panel.type.map,$event)>&nbsp;</span> <span class="sprite discounts" ng-show="util.countOwnProperties(establishment.discounts)>0" ng-class="{selectedIcon:(establishment.visualState.showPanel && establishment.visualState.panelType==constants.panel.type.discounts)}" ng-click=showExtraDesc(establishment,constants.panel.type.discounts,$event)>&nbsp;</span></div></div></div><div class=reservationInfo ng-if=establishment.cheapestRate><div class=hotelPrice ng-if=!isCollapsed><span class=priceContainer ng-if="establishment.errorMessages.length==0"><p class=fromText translate="">trans.step1.hotel.priceFrom</p><p class=amountContainer><span class=integer>{{establishment.cheapestRate | currencyConverter : establishment | integerDigits}}</span> <i class=decimalSeparator>,</i> <span class=decimal>{{(establishment.cheapestRate) | currencyConverter : establishment | fractionalDigits | number:2 | limitTo:-2}}</span></p><p class=priceOptionsContainer><span class=currency>{{witbookerParams.representation.currency}}</span> <span class=perNightText>&nbsp;/<span translate="">trans.step1.hotel.night</span></span></p><span class=reservationLink style="text-decoration: underline" translate="">trans.step1.hotel.bookOnline</span></span> <span class=priceContainer ng-if="establishment.errorMessages.length>0"><span class=reservationLink style="text-decoration: underline" translate="">trans.checkAvailability</span></span></div><div class=hotelArr><i class="sprite arrowHotel" ng-class="{ \'open\': establishment.isOpen }">&nbsp;</i></div></div><div class=errorContainer ng-if=!establishment.cheapestRate><div class=inventoryError><span class=locked ng-if="errorType!=constants.filters.restricted"><span translate="">trans.closed</span><br></span> <span class=alternateAction ng-if="errorType==constants.filters.closed" translate="">trans.changeDates</span> <span class=alternateAction ng-if="errorType==constants.filters.restricted" translate="">trans.step1.inventoryline.viewoptions</span></div><div class=hotelArr><i class="sprite arrowHotel" ng-class="{ \'open\': establishment.isOpen }">&nbsp;</i></div></div></div>'),a.put("js/partials/step_one/establishment/inventoryLine.html",'<div class=inventoryLine data-ticker={{inventoryLine.ticker}}><div class=infoContainer><div class=infoDetails><div class=configuration>{{ inventoryLine.configuration.name }}</div><div><span class=mealPlan><i class="sprite breakfast"></i> {{ inventoryLine.mealPlan.name | uppercase}}</span> - <span title="{{\'trans.step1.condition.title\'|translate}}" class=condition style="{{inventoryLine.condition.color!=\'\'?\'color:#\'+inventoryLine.condition.color :\'\' }}" ng-click=showExtraDesc(inventoryLine,constants.panel.type.conditions,$event)>{{ inventoryLine.condition.name | uppercase }}</span></div><div class=displayChart><span class="sprite calendar">&nbsp;</span>  <span class=toggle_comparison ng-click=showExtraDesc(inventoryLine,constants.panel.type.chart,$event)><span ng-show="!(inventoryLine.visualState.showPanel && inventoryLine.visualState.panelType==constants.panel.type.chart)" translate="">trans.step1.inventoryline.showPriceCalendar</span> <span ng-show="(inventoryLine.visualState.showPanel && inventoryLine.visualState.panelType==constants.panel.type.chart)" translate="">trans.step1.inventoryline.hidePriceCalendar</span></span></div></div></div><div class=errorContainer ng-if="inventoryLine.errorMessage.length>0"><div class=inventoryError><div ng-repeat="errorMessage in inventoryLine.displayErrorMessages"><span ng-if="(errorMessage.errorType==constants.filters.closed || errorMessage.errorType==constants.filters.availability)" class=locked><span class=lockedOrRestrict translate="">trans.{{errorMessage.errorType}}</span></span> <span class=lockedOrRestrict ng-if="(errorMessage.errorType==constants.filters.checkIn || errorMessage.errorType==constants.filters.checkOut)"><span translate="">trans.{{errorMessage.errorType}}</span>: <span ng-repeat="day in errorMessage.value">{{ day| date : "EEE" | uppercase}}{{$last ? \'\' : \',\'}}</span></span> <span class=lockedOrRestrict ng-if=(errorMessage.otherError)><span translate="">trans.{{errorMessage.errorType}}</span> <span><span class=lockedOrRestrict ng-if="errorMessage.errorType==constants.filters.minNotice || errorMessage.errorType==constants.filters.maxNotice">: <span ng-if="errorMessage.value>=24">{{errorMessage.value/24 | number:0}}</span> <span ng-if="errorMessage.value<24">{{errorMessage.value}}</span> <span ng-if="errorMessage.value>=24" translate="">trans.step1.inventoryline.unavailable.value.days</span> <span ng-if="errorMessage.value<24" translate="">trans.step1.inventoryline.unavailable.value.hours</span></span> <span class=lockedOrRestrict ng-if="errorMessage.errorType!=constants.filters.minNotice && errorMessage.errorType!=constants.filters.maxNotice">: {{errorMessage.value}} <span translate="">trans.step1.inventoryline.unavailable.value.days</span></span></span></span></div><span class=alternateAction ng-if=isLocked ng-click=showExtraDesc(inventoryLine,constants.panel.type.chart,$event) translate="">trans.checkAvailability</span> <span class=alternateAction ng-if=!isLocked ng-click=showExtraDesc(inventoryLine,constants.panel.type.chart,$event) title="{{\'trans.step1.changeDates.title\'|translate}}" translate="">trans.changeDates</span></div></div><div class=inventoryLineRight><div class=reservationFormContainer ng-if="!inventoryLine.errorMessage.length>0"><div class=reservationForm><div class=unitQuanitySelectContainer><select title="{{\'trans.step1.availabilitySelect.title\'|translate}}&nbsp;{{\'trans.step1.\'+witbookerParams.representation.roomDenomination | translate}}" ng-model=inventoryLine.reservation.units ng-change=updatePrice() class="form-control unitQuantitySelection" ng-options="option.availability for option in unitSelectorOptions"></select><div class=unitText translate="">trans.step1.{{witbookerParams.representation.roomDenomination}}</div></div><button class="btn btn-success reservationButton" type=button ng-click=redirectToStep2() popover-template={{constants.assetsDir+&quot;partials/step_one/misc/reservation_button_popover.html&quot;}} popover-placement=bottom popover-append-to-body=true><div class=bookText translate="">trans.step1.inventoryline.booking</div><div class=nightsText>{{(witbookerParams.regularParams.endDate-witbookerParams.regularParams.startDate)/(1000*60*60*24) | number:0 }}&nbsp;<span translate="">trans.step1.inventoryline.nights</span></div><div ng-if=showRoomsLeftMessage class=reservationLimitAlertText><span ng-if="inventoryLine.availability!=1">{{ \'trans.step1.inventoryline.reservationLimitAlertText\' | translate:\'{ value: \'+inventoryLine.availability+\' }\' }}</span> <span translate="" ng-if="inventoryLine.availability==1">trans.step1.inventoryline.reservationLimitAlertLastText</span></div></button></div></div><div class=rateContainer ng-if="!inventoryLine.errorMessage.length>0"><div class=rate><div class=amount><span class=integerInventoryLine>{{(inventoryLine.totalRate*inventoryLine.reservation.units.availability) | currencyConverter : establishment | integerDigits }}</span> <span class=decimalSeparator>,</span> <span class=decimalInventoryLine>{{(inventoryLine.totalRate*inventoryLine.reservation.units.availability) | currencyConverter : establishment | fractionalDigits | number:2 | limitTo:-2}}</span> <span class=currencyInventoryLine>{{witbookerParams.representation.currency}}</span></div><div class=amountPerNight ng-if="(witbookerParams.regularParams.endDate-witbookerParams.regularParams.startDate)/(1000*60*60*24) >1"><span class=integerInventoryLine>{{(inventoryLine.averageRate*inventoryLine.reservation.units.availability) | currencyConverter : establishment | integerDigits }}</span> <span class=decimalSeparator>,</span> <span class=decimalInventoryLine>{{(inventoryLine.averageRate*inventoryLine.reservation.units.availability) | currencyConverter : establishment | fractionalDigits | number:2 | limitTo:-2}}</span> <span class=perNightText translate="">trans.step1.inventory.perNight</span></div><div class=discount ng-if="inventoryLine.discountPercentage>0"><span class=fullAmount><span>{{(inventoryLine.originalRate) | currencyConverter : establishment | integerDigits}}, {{(inventoryLine.originalRate) | currencyConverter : establishment | fractionalDigits | number:2 | limitTo:-2}}</span></span> &nbsp; <span popover-append-to-body=true popover-template={{constants.assetsDir+&quot;partials/step_one/misc/discount_popover.html&quot;}} popover-placement=bottom class="discountPercentage info label label-important">{{inventoryLine.discountPercentage*100 | number:0}}%</span></div></div></div></div><div class=clearer></div></div><div class=inventoryLineMobile data-ticker={{inventoryLine.ticker}}><div class=infoContainer><div class=infoDetails><div class=configuration>{{ inventoryLine.configuration.name }}</div><div class=mealPlan>{{ inventoryLine.mealPlan.name | uppercase}}</div><div title="{{\'trans.step1.condition.title\'|translate}}" class=condition style="{{inventoryLine.condition.color!=\'\'?\'color:#\'+inventoryLine.condition.color :\'\' }}" ng-click=showExtraDesc(inventoryLine,constants.panel.type.conditions,$event)>{{ inventoryLine.condition.name | uppercase }}</div></div><div class=rateContainer ng-if="!inventoryLine.errorMessage.length>0"><div class=rate><div class=amount><span class=integerInventoryLine>{{(inventoryLine.totalRate*inventoryLine.reservation.units.availability) | currencyConverter : establishment | integerDigits }}</span> <span class=decimalSeparator>,</span> <span class=decimalInventoryLine>{{(inventoryLine.totalRate*inventoryLine.reservation.units.availability) | currencyConverter : establishment | fractionalDigits | number:2 | limitTo:-2}}</span> <span class=currencyInventoryLine>{{witbookerParams.representation.currency}}</span></div><div class=amountPerNight ng-if="(witbookerParams.regularParams.endDate-witbookerParams.regularParams.startDate)/(1000*60*60*24) >1"><span class=integerInventoryLine>{{(inventoryLine.averageRate*inventoryLine.reservation.units.availability) | currencyConverter : establishment | integerDigits }}</span> <span class=decimalSeparator>,</span> <span class=decimalInventoryLine>{{(inventoryLine.averageRate*inventoryLine.reservation.units.availability) | currencyConverter : establishment | fractionalDigits | number:2 | limitTo:-2}}</span> <span class=perNightText translate="">trans.step1.inventory.perNight</span></div><div class=discount ng-if="inventoryLine.discountPercentage>0"><span class=fullAmount><span>{{(inventoryLine.originalRate) | currencyConverter : establishment | integerDigits}}, {{(inventoryLine.originalRate) | currencyConverter : establishment | fractionalDigits | number:2 | limitTo:-2}}</span></span> &nbsp; <span popover-append-to-body=true popover-template={{constants.assetsDir+&quot;partials/step_one/misc/discount_popover.html&quot;}} popover-placement=bottom class="discountPercentage info label label-important">{{inventoryLine.discountPercentage*100 | number:0}}%</span></div></div></div><div class=errorContainer ng-if="inventoryLine.errorMessage.length>0"><div class=inventoryError><div ng-repeat="errorMessage in inventoryLine.displayErrorMessages"><span ng-if="(errorMessage.errorType==constants.filters.closed || errorMessage.errorType==constants.filters.availability)" class=locked><span class=lockedOrRestrict translate="">trans.{{errorMessage.errorType}}</span></span> <span class=lockedOrRestrict ng-if="(errorMessage.errorType==constants.filters.checkIn || errorMessage.errorType==constants.filters.checkOut)"><span translate="">trans.{{errorMessage.errorType}}</span>: <span ng-repeat="day in errorMessage.value">{{ day| date : "EEE" | uppercase}}{{$last ? \'\' : \',\'}}</span></span> <span class=lockedOrRestrict ng-if=(errorMessage.otherError)><span translate="">trans.{{errorMessage.errorType}}</span> <span><span class=lockedOrRestrict ng-if="errorMessage.errorType==constants.filters.minNotice || errorMessage.errorType==constants.filters.maxNotice">: <span ng-if="errorMessage.value>=24">{{errorMessage.value/24 | number:0}}</span> <span ng-if="errorMessage.value<24">{{errorMessage.value}}</span> <span ng-if="errorMessage.value>=24" translate="">trans.step1.inventoryline.unavailable.value.days</span> <span ng-if="errorMessage.value<24" translate="">trans.step1.inventoryline.unavailable.value.hours</span></span> <span class=lockedOrRestrict ng-if="errorMessage.errorType!=constants.filters.minNotice && errorMessage.errorType!=constants.filters.maxNotice">: {{errorMessage.value}} <span translate="">trans.step1.inventoryline.unavailable.value.days</span></span></span></span></div><span class=alternateAction ng-if=isLocked ng-click=showExtraDesc(inventoryLine,constants.panel.type.chart,$event) translate="">trans.checkAvailability</span> <span class=alternateAction ng-if=!isLocked ng-click=showExtraDesc(inventoryLine,constants.panel.type.chart,$event) title="{{\'trans.step1.changeDates.title\'|translate}}" translate="">trans.changeDates</span></div></div></div><div class=reservationFormContainer ng-if="!inventoryLine.errorMessage.length>0"><div class=buttomsInfoMobile><span class="sprite infoMobile" ng-click=showExtraDesc(inventoryLine,constants.panel.type.conditions,$event)>&nbsp;</span> <span class="sprite calendarMobile" ng-click=showExtraDesc(inventoryLine,constants.panel.type.chart,$event)>&nbsp;</span></div><div class=buttomsBookingMobile><div class=selectUnityContainer><div class=unitText translate="">trans.step1.{{witbookerParams.representation.roomDenomination}}</div><select title="{{\'trans.step1.availabilitySelect.title\'|translate}}&nbsp;{{\'trans.step1.\'+witbookerParams.representation.roomDenomination | translate}}" ng-model=inventoryLine.reservation.units ng-change=updatePrice() class="form-control unitQuantitySelection" ng-options="option.availability for option in unitSelectorOptions"></select></div><button class="btn btn-success reservationButton" type=button ng-click=redirectToStep2() popover-template={{constants.assetsDir+&quot;partials/step_one/misc/reservation_button_popover.html&quot;}} popover-placement=bottom popover-append-to-body=true><div class=bookText translate="">trans.step1.inventoryline.booking</div><div class=nightsText>{{(witbookerParams.regularParams.endDate-witbookerParams.regularParams.startDate)/(1000*60*60*24) | number:0 }}&nbsp;<span translate="">trans.step1.inventoryline.nights</span></div><div ng-if=showRoomsLeftMessage class=reservationLimitAlertText><span ng-if="inventoryLine.availability!=1">{{ \'trans.step1.inventoryline.reservationLimitAlertText\' | translate:\'{ value: \'+inventoryLine.availability+\' }\' }}</span> <span translate="" ng-if="inventoryLine.availability==1">trans.step1.inventoryline.reservationLimitAlertLastText</span></div></button><div class=clearer></div></div><div class=clearer></div></div><div class=clearer></div></div><div witbooking-info-panel-static="" ng-click=interceptClick($event) establishment=inventoryLine root-establishment=establishment type=inventoryLine.visualState.panelType></div>'),a.put("js/partials/step_one/establishment/inventoryLine_list.html","<div ng-repeat=\"inventoryLine in accommodation.inventoryLine | orderBy:['configuration.name' ,'mealPlan.order' ,'condition.order'] \"><div witbooking-inventory-line=\"\" show-extra-desc=showExtraDesc line=inventoryLine witbooker-params=witbookerParams representation=representation establishment=establishment accommodation=accommodation></div></div>"),a.put("js/partials/step_one/establishment/map.html",'<div id=map-canvas-{{mapid}} style="height: 100%;width: 100%;margin: 0px;padding: 0px"></div>'),a.put("js/partials/step_one/footer.html",'<div class=col-md-8><div class=footer><div class=footerContainer><div ng-class="{footerText: showPromoCodeInputOnIframeMode && iframeMode}"><span class=footerSpanText><a href=http://www.witbooking.es target=_blank>Witbooking</a> <span>&#40;v.</span> <span class=releaseVersion>{{releaseVersion}}</span> <span>&#41; &copy;</span> <span>2015</span></span></div><div ng-if="showPromoCodeInputOnIframeMode && iframeMode" witbooking-iframe-promo-code=""></div></div></div></div>'),a.put("js/partials/step_one/mapView.html",'<div id=map-canvas style="height: 100%;width: 100%;margin: 0px;padding: 0px"></div>'),a.put("js/partials/step_one/messages.html",'<div class=messagesContainer><div alert="" class="messages {{message.style}}" ng-repeat="message in messages" ng-show=message.show type=messageAlertClassDict[message.type] close=closeAlert($index)><span ng-bind-html=message.descriptionHtml></span></div></div>'),a.put("js/partials/step_one/misc/cartInfo.html",'<div class=modal-header><h3 class=modal-title ng-bind-html=info.name></h3></div><div class=modal-body><div ng-if="info.media.length>0"><img ng-src={{info.image}} class="infoImage img-rounded" fallback-src=""></div><div class="{{info.rate>0?\'infoText\':\'infoTextWithoutImg\'}}"><div ng-bind-html=info.description></div><div ng-if="info.rate>0"><strong><span>{{(info.rate) | currencyConverter : establishment | integerDigits }}</span> <span class=separator>,</span> <span>{{(info.rate) | currencyConverter : establishment | fractionalDigits | number:2 | limitTo:-2}}</span> <span>&nbsp;{{info.specification}}&nbsp;{{currency}}</span></strong></div></div><div class=clearer></div></div><div class=modal-footer><button class="btn btn-danger" ng-click=closeInfo() translate="">trans.step2.close</button></div>'),a.put("js/partials/step_one/misc/cartNotification.html",'<div class=modal-header></div><div class=modal-body><span translate="">trans.step1.cart.deletedReservations</span><ul><li ng-repeat="reservation in deletedReservations"><span class=name>{{reservation.quantity}}</span> <span class=por>x</span> <span class=name ng-bind-html=reservation.accommodation.name>&nbsp;</span> <span class="config block">{{ reservation.startDate| date : "dd MMM" | uppercase}}&nbsp; &nbsp;{{ reservation.endDate| date : "dd MMM" | uppercase}}&nbsp; &nbsp;{{(reservation.endDate-reservation.startDate)/(1000*60*60*24) | number:0 }} <span translate="">trans.step1.inventoryline.nights</span></span></li></ul><div></div></div><div class=modal-footer><button class="btn btn-primary" ng-click=ok()>OK</button></div>'),a.put("js/partials/step_one/misc/chart.html",'<div class=chartContainer><div class=header><div class=title><span class=prevMonth ng-if=!isLoading></span> <span class=textMonth translate="">trans.step1.inventory.chart.title</span> <span class=nextMonth ng-if=!isLoading></span></div><div class="sprite closeW closeInfoH" ng-click="close(inventoryLine,constants.panel.type.chart ,$event)">&nbsp;</div></div><div class=content id=chart-canvas-{{chartid}}><div class=wraploader ng-if=isLoading><img class=loader ng-src=/WitBooker/img/ajax-loader.gif></div></div></div>'),a.put("js/partials/step_one/misc/conditionsModal.html",'<div class=modal-header><h3 class=modal-title translate="">trans.step2.conditions</h3></div><div class=modal-body><div ng-repeat="condition in conditions" class=conditionsModal><div class=content><span class=condition style="text-decoration: none; font-weight: bold{{condition.color!=\'\'?\';color:#\'+condition.color:\'\'}}">{{ condition.name | uppercase }}</span><br><br><div ng-if=condition.cancellation><div class=textCond ng-bind-html=condition.cancellation></div></div><div ng-if="condition.entry || condition.exit"><span class=titleCond translate="">trans.step1.inventoryline.condition.timetable</span><table><tbody><tr><td ng-if=condition.entry style="padding-right:10px;vertical-align: top"><span class=title translate="">trans.step1.inventoryline.condition.entry</span>:&nbsp;<p ng-bind-html=condition.entry></p></td><td ng-if=condition.exit style="vertical-align: top"><span class=title translate="">trans.step1.inventoryline.condition.exit</span>:&nbsp;<p ng-bind-html=condition.exit></p></td></tr></tbody></table></div><div ng-if=condition.children><span class=titleCond translate="">trans.step1.inventoryline.condition.children</span><div class=textCond ng-bind-html=condition.children></div></div><div ng-if=condition.pets><span class=titleCond translate="">trans.step1.inventoryline.condition.pets</span><div class=textCond ng-bind-html=condition.pets></div></div><div ng-if=condition.groups><span class=titleCond translate="">trans.step1.inventoryline.condition.groups</span><div class=textCond ng-bind-html=condition.groups></div></div><div ng-if=condition.additionalInfo><div alert="" class="messages alert-info" ng-click=toggleAdditionalInfo() type=" \'info\' "><span class=moreInfo ng-if=isAdditionalInfoVisible class=pointer>[-]&nbsp;<span class=titleCond translate="">trans.step2.info</span></span> <span class=moreInfo ng-if=!isAdditionalInfoVisible class=pointer>[+]&nbsp;<span class=titleCond translate="">trans.step2.info</span></span></div><br><br><div class=textCond ng-if=isAdditionalInfoVisible ng-bind-html=condition.additionalInfo></div></div></div></div><div class=clearer></div></div><div class=modal-footer><button class="btn btn-danger" ng-click=closeInfo() translate="">trans.step2.close</button></div>'),a.put("js/partials/step_one/misc/discount_popover.html",'<span class=nombreDescuentoTooltip><div ng-repeat="(discount,amount) in inventoryLine.discounts"><span class=tickTooltip></span> &nbsp; <span class=tickTooltip></span> <span ng-bind-html=establishment.discounts[discount].name></span></div></span>'),a.put("js/partials/step_one/misc/genericModal.html",'<div class=modal-header><h3 class=modal-title ng-bind-html=message.title></h3></div><div class=modal-body><div translate="">{{message.body}}</div><div class=clearer></div></div><div class=modal-footer><button class="btn btn-danger" ng-click=closeInfo() translate="">trans.step2.close</button></div>'),a.put("js/partials/step_one/misc/info_discounts.html",'<div><div class=promotionHotelContainer ng-repeat="discount in discounts | orderObjectBy:\'order\' " ng-if=discount.active><div class=title><span ng-bind-html=discount.name></span></div><span ng-bind-html=discount.description class=description></span><div class=promoCodeLabelContainer><span ng-if=discount.promoCode class="label label-success promoCodeLabel">{{discount.promoCode}}</span></div><div><p ng-if="discount.reduction && (discount.reduction*-1)>0"><span class="labelText discount" translate="">trans.step1.promotions.reduction</span>: <span class=discount>{{discount.reduction | number:2 }}{{discount.percentage? \'%\':\'\'}}</span></p><p ng-if="discount.reduction && (discount.reduction*-1)>0"><span class=labelText translate="">trans.step1.conditions</span>:</p><ul><li ng-if=discount.minStay class=valid ng-class="{invalid: discount.failedMinStay}"><span translate="">trans.minStay</span>:<span>{{discount.minStay}}</span></li><li ng-if=discount.maxStay class=valid ng-class="{invalid: discount.failedMaxStay}"><span translate="">trans.maxStay</span>:<span>{{discount.maxStay}}</span></li><li ng-if=discount.minNotice class=valid ng-class="{invalid: discount.failedMinNotice}"><span translate="">trans.minNotice</span>:<span>{{discount.minNotice}}</span></li><li ng-if=discount.maxNotice class=valid ng-class="{invalid: discount.failedMaxNotice}"><span translate="">trans.maxNotice</span>:<span>{{discount.maxNotice}}</span></li><li ng-if=discount.validPeriod class=valid ng-class="{invalid: discount.failedValid}"><span translate="">trans.validity</span>:<span>{{discount.validPeriod}}</span></li><li ng-if=discount.contractPeriod class=valid ng-class="{invalid: discount.failedContract}"><span translate="">trans.contract</span>:<span>{{discount.contractPeriod}}</span></li><li ng-if="discount.reduction && (discount.reduction*-1)>0"><span translate="">trans.accumulated</span>:<span translate="">trans.no</span></li></ul></div></div></div>'),a.put("js/partials/step_one/misc/info_panel.html",'<div ng-if=" !(establishment && establishment.hasOwnProperty(&quot;establishments&quot;) && establishment.establishments.length>0) && establishment.visualState.showPanel && establishment.visualState.panelType==constants.panel.type.description " class=hotelExtraDesc><div class=header><span class=title translate="">trans.step1.description</span> <span class="sprite closeW closeInfoH" ng-click=close(elementType,constants.panel.type.description,$event)>&nbsp;</span></div><div class=content><span ng-bind-html=establishment.description></span></div></div><div ng-if=" !(establishment && establishment.hasOwnProperty(&quot;establishments&quot;) && establishment.establishments.length>0) && establishment.visualState.showPanel && establishment.visualState.panelType==constants.panel.type.conditions " class=hotelExtraDesc><div class=header><span class=title translate="">trans.step1.conditions</span> <span class="sprite closeW closeInfoH" ng-click=close(establishment,constants.panel.type.conditions,$event)>&nbsp;</span></div><div class=content><span ng-bind-html=establishment.description></span> <span style="color: #894400; font-weight: bold" class=mealPlan>{{ establishment.mealPlan.name | uppercase}}</span><br><br><span class=condition style="text-decoration: none; font-weight: bold{{establishment.condition.color!=\'\'?\';color:#\'+establishment.condition.color:\'\'}}">{{ establishment.condition.name | uppercase }}</span><br><br><div ng-if=establishment.condition.cancellation><div class=textCond ng-bind-html=establishment.condition.cancellation></div></div><div ng-if="establishment.condition.entry || establishment.condition.exit"><span class=titleCond translate="">trans.step1.inventoryline.condition.timetable</span><table><tbody><tr><td ng-if=establishment.condition.entry style="padding-right:10px;vertical-align: top"><span class=title translate="">trans.step1.inventoryline.condition.entry</span>:&nbsp;<p ng-bind-html=establishment.condition.entry></p></td><td ng-if=establishment.condition.exit style="vertical-align: top"><span class=title translate="">trans.step1.inventoryline.condition.exit</span>:&nbsp;<p ng-bind-html=establishment.condition.exit></p></td></tr></tbody></table></div><div ng-if=establishment.condition.children><span class=titleCond translate="">trans.step1.inventoryline.condition.children</span><div class=textCond ng-bind-html=establishment.condition.children></div></div><div ng-if=establishment.condition.pets><span class=titleCond translate="">trans.step1.inventoryline.condition.pets</span><div class=textCond ng-bind-html=establishment.condition.pets></div></div><div ng-if=establishment.condition.groups><span class=titleCond translate="">trans.step1.inventoryline.condition.groups</span><div class=textCond ng-bind-html=establishment.condition.groups></div></div><div ng-if=establishment.condition.additionalInfo><div alert="" class="messages alert-info" ng-click=toggleAdditionalInfo() type=" \'info\' "><span class=moreInfo ng-if=isAdditionalInfoVisible class=pointer>[-]&nbsp;<span class=titleCond translate="">trans.step2.info</span></span> <span class=moreInfo ng-if=!isAdditionalInfoVisible class=pointer>[+]&nbsp;<span class=titleCond translate="">trans.step2.info</span></span></div><br><br><div class=textCond ng-if=isAdditionalInfoVisible ng-bind-html=establishment.condition.additionalInfo></div></div></div></div><div ng-if=" !(establishment && establishment.hasOwnProperty(&quot;establishments&quot;) && establishment.establishments.length>0) && establishment.visualState.showPanel && establishment.visualState.panelType==constants.panel.type.chart "><div witbooking-chart="" establishment=rootEstablishment inventory-line=establishment chartid="establishment.ticker | lowercase"></div></div><div ng-if=" !(establishment && establishment.hasOwnProperty(&quot;establishments&quot;) && establishment.establishments.length>0) && establishment.visualState.showPanel && establishment.visualState.panelType==constants.panel.type.carousel " class="hotelExtraDesc box"><div class=caruContent witbooking-carousel=""></div></div><div ng-if=" !(establishment && establishment.hasOwnProperty(&quot;establishments&quot;) && establishment.establishments.length>0) && establishment.visualState.showPanel && establishment.visualState.panelType==constants.panel.type.map " class="hotelExtraDesc mapBox"><div class=header><span class=title translate="">trans.step1.location</span> <span class="sprite closeW closeInfoH" ng-click="close(elementType,constants.panel.type.map ,$event)">&nbsp;</span></div><div class=boxContent witbooking-map="" establishment=establishment mapid="establishment.name | lowercase"></div></div><div ng-if=" !(establishment && establishment.hasOwnProperty(&quot;establishments&quot;) && establishment.establishments.length>0) && establishment.visualState.showPanel && establishment.visualState.panelType==constants.panel.type.discounts " class=hotelExtraDesc><div class=header><span class=title translate="">trans.step1.discounts</span> <span class="sprite closeW closeInfoH" ng-click="close(elementType,constants.panel.type.discounts ,$event)">&nbsp;</span></div><div witbooking-discounts="" discounts=establishment.discounts></div></div>'),
a.put("js/partials/step_one/misc/info_panel_carousel.html",'<div style="height: 100%"><div carousel="" interval=myInterval><div slide="" ng-repeat="slide in slides" active=slide.active><span class="sprite closeW" ng-click=slide.close(slide.elementType,constants.panel.type.carousel,$event)>&nbsp;</span><div class=pic><img class=carouselImg ng-src={{slide.image}} style="margin: auto" fallback-src=""><div class=carousel-caption ng-show="slide.title || slide.text"><h4>{{slide.title}}</h4><p>{{slide.text}}</p></div></div></div></div></div>'),a.put("js/partials/step_one/misc/info_panel_text.html",'<div ng-if=" !(establishment && establishment.hasOwnProperty(&quot;establishments&quot;) && establishment.establishments.length>0) && establishment.visualState.showPanel" class=hotelExtraDesc><div class=header><span class=title>{{title}}</span> <span class="sprite closeW closeInfoH">&nbsp;</span></div><div class=content><span ng-bind-html=establishment.description></span></div></div>'),a.put("js/partials/step_one/misc/modalMessage.html",'<div class=modal-body><div ng-repeat="message in messages" ng-show=message.show close=closeAlert($index)><span ng-bind-html=message.descriptionHtml></span></div></div><div class=modal-footer><button class="btn btn-primary" ng-click=ok()>OK</button></div>'),a.put("js/partials/step_one/misc/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }" data-container=body><div class=arrow></div><div class=popover-inner style="background-color: #{{background}} !important"><h3 class=popover-title ng-bind=title ng-show=title></h3><div class=popover-content></div></div></div>'),a.put("js/partials/step_one/misc/reservation_button_popover.html",'<span class=nombreTooltip ng-bind-html=accommodation.accommodation.name></span> <span class=condicionesTooltip>{{ inventoryLine.configuration.name }} , {{ inventoryLine.mealPlan.name }} , {{ inventoryLine.condition.name }}</span> <span class=fechaTooltip>{{ witbookerParams.regularParams.startDate| date : "dd MMM yy, EEE" | uppercase}}</span> <span class=fechaTooltip>{{ witbookerParams.regularParams.endDate | date : "dd MMM yy, EEE" | uppercase}}</span> <span class=nocheTooltip>{{(witbookerParams.regularParams.endDate-witbookerParams.regularParams.startDate)/(1000*60*60*24) | number:0 }}&nbsp;<span translate="">trans.step1.inventoryline.nights</span></span>'),a.put("js/partials/step_one/misc/tracking_pixels.html","<script ng-if=isTripAdvisorActive>if (TAPixel !== null && typeof TAPixel === 'object') {\n	    TAPixel.impressionWithReferer(\"001F000000ukweA\");\n    }</script>"),a.put("js/partials/step_one/promotions_accordion.html",'<div><div accordion="" class="promotionsAccordion inner" ng-repeat="discount in discounts | orderObjectBy:\'order\' " ng-if=discount.active><div accordion-group=""><div accordion-heading=""><div class=entry-title ng-click=toggleAccordion(discount) ng-class={panelPromotionActive:hoverPromotion} ng-mouseenter="hoverPromotion=true" ng-mouseleave="hoverPromotion=false"><div class="title mainFontColor1"><span ng-bind-html=discount.name></span><div class=promoCodeLabelContainer><div ng-if=discount.promoCode ng-repeat="code in util.getDiscountActiveDiscountCodes(discount.promoCode,givenDiscounts)" style="display: inline"><span class="label label-success promoCodeLabel">{{code}}</span></div></div></div><div class=arrow-wrapper><i class="sprite arrowPromotion" ng-class="{ \'open\': discount.isOpen }">&nbsp;</i></div></div></div><div class=entry-content><p ng-if="discount.reduction && (discount.reduction*-1)>0"><span class=labelText translate="">trans.step1.promotions.reduction</span>: <span class=discount>{{discount.reduction | number:2}}{{discount.percentage? \'%\':\'\'}}</span></p><p ng-if="discount.reduction && (discount.reduction*-1)>0"><span class=labelText translate="">trans.step1.conditions</span>:</p><ul><li ng-if=discount.minStay class=valid ng-class="{invalid: discount.failedMinStay}"><span translate="">trans.minStay</span>:<span>{{discount.minStay}}</span></li><li ng-if=discount.maxStay class=valid ng-class="{invalid: discount.failedMaxStay}"><span translate="">trans.maxStay</span>:<span>{{discount.maxStay}}</span></li><li ng-if=discount.minNotice class=valid ng-class="{invalid: discount.failedMinNotice}"><span translate="">trans.minNotice</span>:<span>{{discount.minNotice}}</span></li><li ng-if=discount.maxNotice class=valid ng-class="{invalid: discount.failedMaxNotice}"><span translate="">trans.maxNotice</span>:<span>{{discount.maxNotice}}</span></li><li ng-if=discount.validPeriod class=valid ng-class="{invalid: discount.failedValid}"><span translate="">trans.validity</span>:<span>{{discount.validPeriod}}</span></li><li ng-if=discount.contractPeriod class=valid ng-class="{invalid: discount.failedContract}"><span translate="">trans.contract</span>:<span>{{discount.contractPeriod}}</span></li><li ng-if="discount.reduction && (discount.reduction*-1)>0"><span translate="">trans.accumulated</span>:<span translate="">trans.no</span></li></ul><span ng-bind-html=discount.description class=description></span></div></div></div></div>'),a.put("js/partials/step_one/result_list_tree.html",'<div accordion="" ng-if=isChain><div accordion-group=""><div accordion-heading=""><div ng-include="\'partials/step_one/establishment/hotel.html\'"></div></div><div ng-repeat="childEstablishment in establishment.establishments" ng-include="\'partials/step_one/result_list.html\'" ng-controller=establishmentCtrl></div></div></div><div accordion="" ng-if=!isChain><div accordion-group=""><div accordion-heading=""><div ng-include="\'partials/step_one/establishment/hotel.html\'" ng-controller=establishmentCtrl></div></div><div class=accommodation_list ng-include="constants.assetsDir+\'partials/step_one/establishment/accommodation_list.html\'"></div></div></div>'),a.put("js/partials/step_one/shopping_cart.html",'<div class=cartContainer><div class=addBook ng-show="size==constants.cart.largeSize" ng-click=goToStepOne()>&nbsp;<span translate="">trans.step2.addAnotherBooking</span></div><div class="tabcart reservas holding right selected" title="{{\'trans.step1.cart.title\'|translate}}" style="display: block"><div class=cartQuantity><span class=reservasCarrito>{{cart.reservations.length}}</span><span class="sprite carrito"></span></div></div><div class=borderTab></div><div ng-if="size!=constants.cart.largeSize" ng-repeat="reservation in cart.reservations" class=reservationsList><div class=bookList ng-if="size!=constants.cart.largeSize"><div class=data><span class=name>{{reservation.quantity}}</span> <span class=por>x</span> <span class=name ng-bind-html=reservation.accommodation.name>&nbsp;</span> <span class="config block"><span>{{ reservation.startDate | date : "dd MMM" | uppercase}}</span> <span>&nbsp;>></span> <span>&nbsp;</span> <span>{{ reservation.endDate | date : "dd MMM" | uppercase}}</span> <span>&nbsp;>>&nbsp;</span> <span>{{(reservation.endDate-reservation.startDate)/(1000*60*60*24) | number:0 }}</span> <span translate="">trans.step1.inventoryline.nights</span></span></div><div class=actions><span class=rate><span class=amount><span class=integer>{{(reservation.rate+reservation.serviceRate) | currencyConverter : establishment | integerDigits}}</span> <span class=separator>,</span> <span class=decimal>{{(reservation.rate+reservation.serviceRate) | currencyConverter : establishment | fractionalDigits| number:2 | limitTo:-2}}</span></span></span> <span id=editbookingbutton_0 class="sprite close boton-eliminar" title="{{\'trans.step2.deleteBooking\'|translate}}" ng-click=removeReservation($index)>&nbsp;</span></div></div></div><div id=bookings_list ng-if="size==constants.cart.largeSize"><div ng-repeat="reservation in cart.reservations"><div class=reserva-carrito-paso2><table class="table table-reserva-carrito-paso2 es-carrito" cellpadding=0 cellspacing=0><tbody><tr class=fila-1><td><div class="celda1-paso2 datos-alojamiento"><span class="nombrehabitacion dp-bloque bookList"><span class=multiplicador></span> <span class=quantity>{{reservation.quantity}}</span> <span class=por>x</span> <span class=nombre-linea-1 ng-bind-html=reservation.accommodation.name>&nbsp;</span> <span class=noches><span>&nbsp;/&nbsp;</span> <span>{{(reservation.endDate-reservation.startDate)/(1000*60*60*24) | number:0 }}</span> <span translate="">trans.step1.inventoryline.nights</span></span> <span class=nombre-linea-2>{{ reservation.inventoryLine.configuration.name }}</span><div class=entrada><span class="arrival dp-bloque" translate="">trans.step2.entry</span>: <span>{{ reservation.startDate| date : "dd MMM yy, EEE" | uppercase}}</span></div><div class=salida><span class="departure dp-bloque" translate="">trans.step2.exit</span>: <span>{{ reservation.endDate| date : "dd MMM yy, EEE" | uppercase}}</span></div></span></div><div class="celda2-paso2 datos-rct"><div class=regimen><span translate="">trans.step2.mealPlan</span>: <span>{{ reservation.inventoryLine.mealPlan.name}}</span></div><div class=condic><span translate="">trans.step2.conditions</span>: <span>{{ reservation.inventoryLine.condition.name}}</span></div><div class=personas><span translate="">trans.step2.totalPersons</span>: <span>{{reservation.inventoryLine.capacity * reservation.quantity}}</span></div></div><div class=clearer></div></td><td class=celda3-paso2><i class="sprite close boton-eliminar" title="{{\'trans.step2.deleteBooking\'|translate}}" ng-click=removeReservation($index)></i></td></tr><tr class=fila-2><td class=celda1-paso2 colspan=4><div id=selectorextras__0_5 class="selectorextras selectorextras-0"><div class="ficha-config-v6 es-ficha es-ficha-disponible"><div class=ficha-config-der><table class=config-detalles><tbody><tr class="linea-precio-sin-descuento cuerpoContenedor {status-clase}"><td colspan=3 class=col1><table class=table-no-bordered><tbody><tr><td><span class=alojamientotxt translate="">trans.step2.accommodation</span></td></tr></tbody></table></td><td class="col3 totalSinDescuento"><span>{{((reservation.originalRate>0?reservation.originalRate:reservation.rate) | currencyConverter : establishment | integerDigits )}}</span><span class=separator>,</span><span>{{((reservation.originalRate>0?reservation.originalRate:reservation.rate)) | currencyConverter : establishment | fractionalDigits | number:2 | limitTo:-2}}</span></td></tr><tr ng-repeat="(discountTicker,amount) in reservation.inventoryLine.discounts" ng-if="discountTicker!=\'rackRate\'" ng-init="discount = establishment.discounts[discountTicker]" class="linea-promo cuerpoContenedor unicoCuerpoContenedor promo-seleccionada"><td colspan=3 class="col2 extraname extranopaddingbottom"><table class=table-no-bordered><tbody><tr><td><span class="extranametxt promocionesTexto" ng-bind-html=discount.name></span></td><td><span class="questioncontainer witbooker-tooltip-top"><span class="infoTooltip glyphicon glyphicon-info-sign" ng-click=openInfo(discount)></span>&nbsp;&nbsp;</span> <span class=enteros>-{{((amount*reservation.quantity/reservation.originalRate)*100) | number:2}}%</span></td></tr></tbody></table></td><td class="col3 extravalue"><span class=integer>-{{amount*reservation.quantity | currencyConverter : establishment | integerDigits }}</span> <span class=separator>,</span> <span class=decimal>{{amount*reservation.quantity | currencyConverter : establishment | fractionalDigits | number:2 | limitTo:-2}}</span></td></tr><tr class="linea-precio-sin-descuento cuerpoContenedor show-more-extras" ng-show="reservation.inventoryLine.services.length>0" ng-click="extrasFolded=!extrasFolded"><td colspan=3 class=col1><table class=table-no-bordered><tbody><tr><td><span class="sprite arrowExtras {{extrasFolded?\'open\':\'\'}}"></span> <span class=show-more-extras-txt translate="">trans.step2.extras</span></td></tr></tbody></table></td><td class="col3 extravalue totalSinDescuento"><span class="extrasPlegar importe-valor" ng-if="reservation.serviceRate>=0"><span class=integer>{{(reservation.serviceRate) | currencyConverter : establishment | integerDigits }}</span> <span class=separator>,</span> <span class=decimal>{{(reservation.serviceRate) | currencyConverter : establishment | fractionalDigits | number:2 | limitTo:-2}}</span></span></td></tr><tr ng-show=extrasFolded ng-repeat="serviceObject in reservation.inventoryLine.services  | orderBy:\'order\' " ng-init="service = services[serviceObject.ticker]" ng-if=services.hasOwnProperty(serviceObject.ticker) class="linea-extra cuerpoContenedor primerCuerpoContenedor" witbooking-service="" service=services[serviceObject.ticker] inventory-line=reservation.inventoryLine reservation=reservation establishment=establishment></tr></tbody></table></div></div></div></td></tr><tr class=fila-3><td colspan=4><div class=contenidoTotal><span class="total dp-bloque"><span class=importe-valor><span class=integer>{{(reservation.rate + reservation.serviceRate) | currencyConverter : establishment | integerDigits}}</span> <span class=separator>,</span> <span class=decimal>{{(reservation.rate + reservation.serviceRate) | currencyConverter : establishment | fractionalDigits | number:2 | limitTo:-2}}</span></span></span></div><div class=clearer></div></td></tr></tbody></table></div></div></div><div class=borderTab></div><div ng-show="cart.reservations.length>0" class="tabcart totalReservas reservas right selected" title="{{\'trans.step1.cart.title\'|translate}}" style="display: block"><div class=cartQuantity><div class=totalAmountTxtContainer><div class=totalTxt translate="">trans.step2.totalBooking</div><div class=taxTxt translate="">trans.step2.withTaxes</div></div><div class=totalAmountContainer><span class=rate><span class=amount><span class=integer>{{(cart.total) | currencyConverter : establishment | integerDigits}}</span> <span class=separator>,</span> <span class=decimal>{{(cart.total) | currencyConverter : establishment | fractionalDigits | number:2 | limitTo:-2}}</span></span></span> <span class=currency>{{witbookerParams.representation.currency}}</span></div></div></div><div ng-show="cart.reservations.length>0" class=clearer></div><div ng-if="size!=constants.cart.largeSize" ng-show="cart.reservations.length>0" class="btnCarritoReservar btn btn-success" ng-click=goToStepTwo() title="{{\'trans.step1.cart.title\'|translate}}"><span style="float: left">{{\'trans.step1.cart.title\'|translate}}&nbsp;<span class=forwardIcon></span></span></div></div>'),a.put("js/partials/step_one/stepOne.list.html",'<div ng-repeat="establishment in establishment.establishments | orderBy:[\'cheapestRate\',\'name\' ]:false" ng-include="constants.assetsDir+\'partials/step_one/stepOne.list.html\'"></div><div accordion="" class=hotelAccordion ng-if="!(establishment && establishment.hasOwnProperty(&quot;establishments&quot;) && establishment.establishments.length>0)\n && !(establishment.allFiltered && witbookerParams.representation.hideLocked &&  witbookerParams.representation.hideRestricted ) "><div accordion-group="" ng-class="{noHeader: !witbookerParams.representation.showEstablishmentAccordionHeader}" is-open={{establishment.isOpen}} ng-mouseenter="hover = true" ng-mouseleave="hover = false"><div accordion-heading="" ng-if=witbookerParams.representation.showEstablishmentAccordionHeader><div witbooking-establishment="" show-extra-desc=showExtraDesc witbooker-params=witbookerParams representation=representation util=util establishment=establishment ng-click=toggleAccordion(establishment)></div><div witbooking-info-panel-static="" ng-click=interceptClick($event) establishment=establishment title="\'description\'" type=establishment.visualState.panelType></div></div><div class=accommodation_list ng-include="constants.assetsDir+\'partials/step_one/establishment/accommodation_list.html\'"></div></div></div>'),a.put("js/partials/step_one/stepOne.map.html",'<div class=mainMapContainer><div class=mainMap witbooking-map="" establishment=establishment pins=pins mapid="\'main\'"></div></div>'),a.put("js/partials/step_two/customer_data_form.html",'<fieldset style=display:none><input type=hidden name=_method value=POST></fieldset><div class="headerDataForm letraColorOpuesto" translate="">trans.step2.personalData</div><div class=clearer></div><div witbooking-front-end-messages="" messages=establishment.sortedMessages[constants.messages.position.below_personal_info_step_2] establishment=establishment class=messagesContainer></div><div class=inputsForm><div class=form-group><input name=name class=form-control ng-class="{ \'input-error\' : form.submitted && form.name.$error.required }" ng-keydown=$parent.activateWithDummyData($event) id=reservationsName ng-model=customerData.name placeholder="* {{\'trans.step2.name\'|translate}}" required></div><div class=form-group><input name=surname class=form-control ng-class="{ \'input-error\' : form.submitted && form.surname.$error.required }" id=reservationsSurname ng-model=customerData.lastName placeholder="* {{\'trans.step2.surname\'|translate}}" required></div><div class=form-group><input type=email ng-pattern="/^[_a-z0-9]+(\\.[_a-z0-9]+)*@[a-z0-9-]+(\\.[a-z0-9-]+)*(\\.[a-z]{2,4})$/" ng-class="{ \'input-error\' : form.submitted &&(form.email.$error.required || form.email.$error.email  || form.email.$error.pattern)}" name=email class=form-control id=reservationsEmail ng-model=customerData.email placeholder="* {{\'trans.step2.email\'|translate}}" required></div><div class=form-group ng-if=bookingFormRepeatEmail><input type=email ng-pattern="/^[_a-z0-9]+(\\.[_a-z0-9]+)*@[a-z0-9-]+(\\.[a-z0-9-]+)*(\\.[a-z]{2,4})$/" ng-class="{ \'input-error\' : form.submitted &&(form.email2.$error.required || form.email2.$error.email  || form.email2.$error.pattern )}" name=email2 class=form-control id=reservationsEmail2 ng-model=customerData.confirmationMail placeholder="* {{\'trans.step2.repeatMail\'|translate}}" required></div><div class=form-group><input ng-if=bookingFormArrivalTime name=arrivalTime class=form-control ng-class="{ \'input-error\' : form.submitted && form.arrivalTime.$error.required }" id=reservationsArrivalTime ng-model=customerData.arrivalTime placeholder="* {{\'trans.step2.arrivalTime\'|translate}}" required></div><div class=checkbox ng-if=bookingFormNewsletter><input type=checkbox name=subscription ng-model=customerData.receiveOffers><strong translate="">trans.step2.receiveOffers</strong></div><div class=form-group ng-if=bookingFormDni><input name=passport class=form-control ng-class="{ \'input-error\' : form.submitted && form.passport.$error.required }" id=reservationsDNI ng-model=customerData.passport placeholder="* {{\'trans.step2.passport\'|translate}}" required></div><div class=form-group ng-if=bookingFormAddress><input name=address class=form-control ng-class="{ \'input-error\' : form.submitted && form.address.$error.required }" id=reservationsAddress ng-model=customerData.address placeholder="* {{\'trans.step2.address\'|translate}}" required></div><select ng-options="c.name for c in countries track by c.id" name=country default class=form-control initialvalue=Pas ng-model=customerData.country ng-class="{ \'input-error\' : form.submitted && form.country.$error.required }" ng-if=bookingFormCountry required><option value="" translate="">trans.step2.country</option></select><div class=form-group ng-if=bookingFormPhone><input name=phone class=form-control ng-class="{ \'input-error\' : form.submitted && form.phone.$error.required }" id=reservationsPhone placeholder="* {{\'trans.step2.phone\'|translate}}" ng-model=customerData.phone required></div><label for=reservationsComments translate="">trans.step2.comments</label><textarea class=form-control name=comments id=reservationsComments rows=5 ng-model=customerData.comments></textarea></div>'),a.put("js/partials/step_two/misc/modalOkClose.html",'<div class=modal-body><div translate="">{{message.body}}</div><div class=clearer></div></div><div class=modal-footer><button class="btn btn-success" ng-click=follow() translate="">ok</button> <button class="btn btn-danger" ng-click=closeInfo() translate="">trans.step2.close</button></div>'),a.put("js/partials/step_two/misc/popover_ccv.html",'<div class="creditcards ccv"></div>hola'),a.put("js/partials/step_two/payment/payment_type_form.html",'<div class=inputsForm><div ng-if="type==constants.payment.type.creditCard"><div class=textTopPaymentMethod translate="">trans.step2.ccCardText</div><br><div class=form-group><input name=ccholder class=form-control ng-class="{ \'input-error\' : form.submitted && form.ccholder.$error.required }" id=reservationsName placeholder="* {{\'trans.step2.cCHolder\'|translate}}" ng-model=paymentData.creditCardData.ccholder required></div><div class=row><select name=cckind class=form-control ng-options="c.name for c in creditCards track by c.id" id=reservationsCckind ng-model=paymentData.creditCardData.cckind ng-change=changePattern(paymentData.creditCardData.cckind)></select><div class="creditcards {{paymentData.creditCardData.cckind.id}}"></div></div><div class=form-group><input name=numbercard class=form-control ng-class="{ \'input-error\' : form.submitted && (form.numbercard.$error.required || form.numbercard.$error.pattern ) }" id=reservationsNumberCard placeholder="* {{\'trans.step2.cCNumber\'|translate}}" ng-model=paymentData.creditCardData.ccnumber ng-pattern=ccPattern required></div><div class=form-group ng-if=bookingFormCcv><input name=ccvcard class=form-control ng-class="{ \'input-error\' : form.submitted && form.ccvcard.$error.required }" id=reservationsCcvCard placeholder="* CCV/CCV2" ng-model=paymentData.creditCardData.ccsecuritycode required><button popover-placement=right popover-template={{constants.assetsDir+&quot;partials/step_two/misc/popover_ccv.html&quot;}} popover-append-to-body=true class="btn btn-xs">info</button></div><label class=validTo>*<span translate="">trans.step2.validUntil</span></label><div class=form-group><select name=ccvalidtomonth ng-options="item.Value as item.Name for item  in months" class=form-control ng-class="{ \'input-error\' : form.submitted && form.ccvalidtomonth.$error.required }" id=reservationsCcvalidMoth ng-model=paymentData.creditCardData.ccvalidtomonth required><option value="">-{{\'trans.step2.month\'|translate}}-</option></select><select name=ccvalidtoyear ng-options="item.Value as item.Name for item in years" class=form-control ng-class="{ \'input-error\' : form.submitted && form.ccvalidtoyear.$error.required }" id=reservationsCcvalidYear ng-model=paymentData.creditCardData.ccvalidtoyear required><option value="">-{{\'trans.step2.year\'|translate}}-</option></select></div></div><div ng-if="type==constants.payment.type.transfer"><div class=textTopPaymentMethod>{{transferData.message}}</div><br><div ng-if="witbookerParams.representation.transferAvailabilityHold>0"><span translate="">trans.step2.bankTransferDescription1</span> <span translate="">{{witbookerParams.representation.transferAvailabilityHold}}</span> <span translate="">trans.step1.inventoryline.unavailable.value.hours</span>.<br><span translate="">trans.step2.bankTransferDescription2</span>.<span translate="">trans.step2.bankTransferDescription1NoHold</span></div><div ng-if="witbookerParams.representation.transferAvailabilityHold<=0"><span translate="">trans.step2.bankTransferDescription1NoHold</span></div></div><div ng-if="type==constants.payment.type.tctoken||type==constants.payment.type.tpvtoken"><div class=textTopPaymentMethod translate="">trans.step2.tctokenText</div></div><div ng-if="type==constants.payment.type.paypal_ec"><div class=textTopPaymentMethod translate="">trans.step2.paypalText</div></div><div ng-if="type==constants.payment.type.pointOfSale"><span translate="">trans.step2.pointOfSaleDescription</span>&nbsp;<span ng-repeat="card in creditCards">{{card.name}}{{$last ? \'.\' : \', \'}}</span></div></div>'),a.put("js/partials/step_two/payment/payment_type_header.html",'<div ng-if="type==constants.payment.type.creditCard"><div class="alert alert-info messagesTwo"><button type=button class=close data-dismiss=alert></button><p><span translate="">trans.step2.creditCardHeader1</span>.&nbsp;</p></div><div class=mensajeverdeTC><p><span translate="">trans.step2.creditCardHeader2</span> <a href=http://micho.local/v6/select/hoteldemo.com.v6/es/reservationsv6/generalconditions target=_blank id=legalterms3><span translate="">trans.step2.serviceConditions2</span></a></p></div></div><div ng-if="type==constants.payment.type.transfer"></div><div ng-if="type==constants.payment.type.pointOfSale"><span translate="">trans.step2.pointOfSaleHeader1</span> <span>100.00%</span> <span translate="">trans.step2.pointOfSaleHeader2</span></div>'),a.put("js/partials/step_two/payment_data_form.html",'<div class="headerDataForm letraColorOpuesto" translate="">trans.step2.paymentMethod</div><div class=clearer></div><div witbooking-front-end-messages="" messages=establishment.sortedMessages[constants.messages.position.top_method_payment_step_2] establishment=establishment class=messagesContainer></div><div witbooking-payment-type-header="" type=type></div><div ng-repeat="availablePaymentType in availablePaymentTypes"><div class=radioPayment ng-class="{ \'justOne\' : availablePaymentTypes.length==1 }"><label><input type=radio ng-model=$parent.ptype ng-value=availablePaymentType><span ng-if="availablePaymentType!=constants.payment.type.paypal_ec && availablePaymentType!=constants.payment.type.paypal_std" translate="">trans.step2.{{availablePaymentType}}</span> <img ng-if="availablePaymentType==constants.payment.type.paypal_ec" src=https://www.paypalobjects.com/webstatic/mktg/logo/pp_cc_mark_37x23.jpg border=0 alt="PayPal Logo"></label></div><div ng-if="availablePaymentType==$parent.ptype" witbooking-payment-type-form="" form=form payment-data=paymentData type=$parent.ptype></div></div><div class=inputsForm><div class=form-group><div class=acceptConditions ng-class="{\'input-error\': form.submitted  && form.acceptconditions.$error.required}" required><div class=checkbox><input type=checkbox name=acceptconditions ng-model=paymentData.acceptconditions required><span class=checkboxTxt><strong><span translate="">trans.step2.acceptConditions</span> <a ng-click=openInfo() class=legalTerm><span translate="">trans.step2.conditionsOfService</span></a></strong></span></div></div><div class=checkFieldsRed ng-class="{\'input-error\': form.submitted && !form.$valid}" ng-if="form.submitted && !form.$valid"><i class="glyphicon glyphicon-info-sign"></i>&nbsp;<span translate="">trans.step2.checkFieldsRed</span></div><div class="paymentDetails defaultCurrency" ng-if="witbookerParams.representation.currency!==witbookerParams.representation.defaultCurrency"><div class=prePay><span translate="">trans.step2.deposit</span>&nbsp;(<span class=percentPrePay>{{cart.depositPercentage | number:2}}</span>%):&nbsp;<span class=pricePrePay>{{cart.depositAmount | currencyConverter : establishment | number:2}}</span>&nbsp;<span class=coin>{{witbookerParams.representation.currency}}</span></div><div class=totalPay><span translate="">trans.step2.totalTaxesIncluded</span>:&nbsp;<span class=totelPrice>{{cart.total | currencyConverter : establishment | number:2}}</span>&nbsp;<span class=coin>{{witbookerParams.representation.currency}}</span></div><span class=message>*<span translate="">trans.step2.merelyInformative</span>&nbsp;{{witbookerParams.representation.defaultCurrency}}</span></div><div class=paymentDetails><div class=prePay><span translate="">trans.step2.deposit</span>&nbsp;(<span class=percentPrePay>{{cart.depositPercentage | number:2}}</span>%):&nbsp;<span class=pricePrePay>{{cart.depositAmount | number:2}}</span>&nbsp;<span class=coin>{{witbookerParams.representation.defaultCurrency}}</span></div><div class=totalPay><span translate="">trans.step2.totalTaxesIncluded</span>:&nbsp;<span class=totelPrice>{{cart.total | number:2}}</span>&nbsp;<span class=coin>{{witbookerParams.representation.defaultCurrency}}</span></div></div><input type=hidden name=data[Reservations][reservationType] value=1 id=ReservationsReservationType><input type=hidden name=data[Reservations][ccCiCreditCard] value=0 id=ReservationsCcCiCreditCard><input type=hidden name=data[Reservations][ccpin] value=0 id=ReservationsCcpin><input type=hidden name=data[Reservations][confirmBooking] value=1 id=ReservationsConfirmBooking><input type=hidden name=data[Reservations][stage] value=3 id=ReservationsStage><div id=finalBookingBtns><div class=confirm><button id=confirmButton class="btn btn-succes" type=submit ng-click="form.submitted=true;submitPaymentDataForm()"><span translate=trans.step2.confirm></span></button></div><div class=addBooking><button class="btn btn-default" type=button ng-click=goToStepOne()><span class="glyphicon glyphicon-plus-sign"></span></button> <span class=help-block translate="">trans.step2.addAnotherBooking</span></div></div><div class=clearer></div></div><script>$(document).ready(function() {\n            $(\'#button_confirm_booking\').click(function(){\n                $(\'.formulario_datos form\').submit();\n            });\n        });</script></div>'),a.put("js/partials/step_two/service_row.html",'<td class="col0 serviceImage" ng-class="{\'serviceSelected\':isSelected}"><div ng-if="service.media.length>0" class=extraImg ng-click=openInfo(service)><img ng-src={{service.thumbnail}} fallback-src=""><div class=extraImgHover></div></div></td><td class="col1 extraname extracontrol" ng-class="{\'serviceSelected\':isSelected}"><input ng-if="service.type!=constants.serviceType.units && service.obligatory==false" ng-model=inventoryLine.selectedServices[service.ticker].selected type=checkbox><select ng-if="service.type==constants.serviceType.units" ng-model=inventoryLine.selectedServices[service.ticker].units ng-options="option.availability for option in unitSelectorOptions"></select></td><td class="col2 extraname extranopadding" ng-class="{\'serviceSelected\':isSelected}"><table class=table-no-bordered><tbody><tr><td><span class=extranametxt>{{service.name}}</span></td><td><span class="questioncontainer witbooker-tooltip-top"><span class="infoTooltip glyphicon glyphicon-info-sign" ng-click=openInfo(service)></span>&nbsp;&nbsp;</span> <span class=precioUnitario ng-if="service.rate>0"><span class=integer>{{(service.rate) | currencyConverter : establishment | integerDigits }}</span> <span class=separator>,</span> <span class=decimal>{{(service.rate) | currencyConverter : establishment | fractionalDigits | number:2 | limitTo:-2}}</span> <span>&nbsp;{{service.specification}}</span></span></td></tr></tbody></table></td><td class="col3 extravalue" ng-class="{\'serviceSelected\':isSelected}"><span class=importe-valor><span class=integer>{{(rate) | currencyConverter : establishment | integerDigits }}</span> <span class=separator>,</span> <span class=decimal>{{(rate) | currencyConverter : establishment | fractionalDigits | number:2 | limitTo:-2}}</span></span></td>')}]);var witbookerServices=angular.module("witbookerServices",["ngResource"]),ESTABLISHMENT_RESOURCE_URL="/WitBooker/base/getEstablishmentData",ESTABLISHMENT_LOCALIZED_RESOURCE_URL="/WitBooker/base/createEstablishmentLocalizedData",UPDATE_SESSION_URL="/WitBooker/base/updateSessionAsync",AVAILABILITY_RESOURCE_URL="/WitBooker/base/calculateAvailability",CURRENCY_CONVERSION_RATE="/WitBooker/base/updateCurrencyConversionRate",CHART_RESOURCE_URL="/WitBooker/base/chart",STATIC_ROOT_URL=MAIN_STATIC_ROOT_URL,LEGACY_BOOKING_URL=URL_WITBOOKER_V6+"select/",SHOPPING_CART_URL="/WitBooker/base/addToCart",REMOVE_SHOPPING_CART_URL="/WitBooker/base/removeFromCart",STEP1_URL=URL_WITBOOKER_V6+"select/TICKERPLACEHOLDER/LANGUAGEPLACEHOLDER/reservationsv6/step1",STEP2_URL=URL_WITBOOKER_V6+"select/TICKERPLACEHOLDER/LANGUAGEPLACEHOLDER/reservationsv6/step2#/stepTwo/TICKERPLACEHOLDER/",SHOPPING_CART_DATA_URL="/WitBooker/stepTwo/obtainReservationInformation",UPDATE_CART_DATA_URL="/WitBooker/stepTwo/updateReservation",STEP2_CREDITCARD_URL=URL_WITBOOKER_V6+"select/TICKERPLACEHOLDER/es/reservationsv6/step2",STEP2_POINTOFSALE_URL=URL_WITBOOKER_V6+"select/TICKERPLACEHOLDER/es/reservationsv6/step2",STEP2_PROCESS_RESERVATION_URL="/WitBooker/stepTwo/reservation",STEP2_PAYPAL_EXPRESS_CHECKOUT="/WitBooker/payment/payPalExpressCheckout",STEP2_SIPAY="/WitBooker/payment/sipay?ticker=TICKERPLACEHOLDER#/main/LANGUAGEPLACEHOLDER/",STEP2_SIPAY_INIT="/WitBooker/payment/sipayInit",STEP2_SIPAY_CHECK_RESERVATION_STATUS="/WitBooker/payment/sipayReservationStatus",STEP3_TPV_URL=URL_WITBOOKER_V6+"select/TICKERPLACEHOLDER/LANGUAGEPLACEHOLDER/reservationsv6/procesarpago/IDPLACEHOLDER/java",STEP3_CONFIRMATION_URL=URL_WITBOOKER_V6+"select/TICKERPLACEHOLDER/LANGUAGEPLACEHOLDER/reservationsv6/confirmation/IDPLACEHOLDER/java",STEP2_RESERVATION_URL=URL_WITBOOKER_V6+"select/TICKERPLACEHOLDER/LANGUAGEPLACEHOLDER/reservationsv6/step2#/stepTwo/TICKERPLACEHOLDER",BookingFormExtraFilter=function(a){
angular.extend(this,a)};BookingFormExtraFilter.prototype.getLocalizedData=function(a){var b=this.localization.hasOwnProperty(a)?this.localization[a]:this.localization.defaultLocale;return b};var api=function(a){var b=a(ESTABLISHMENT_RESOURCE_URL,{},{get:{method:"GET",cache:!0},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}}),c=a(ESTABLISHMENT_LOCALIZED_RESOURCE_URL,{},{get:{method:"GET",cache:!0},save:{method:"POST"},post:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}}),d=a(CHART_RESOURCE_URL,{},{get:{method:"GET",cache:!0},save:{method:"POST"},post:{method:"POST",cache:!0},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}}),e=a(AVAILABILITY_RESOURCE_URL,{},{get:{method:"GET"},save:{method:"POST"},post:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}});return b.prototype.testMethod=function(){return""},{Establishment:b,Chart:d,ARI:e,LocalizedData:c}};witbookerServices.factory("Api",["$resource",api]);var util=function(a,b,c){var d={};return d.entityLevel={},d.entityLevel.hotel="establecimientos",d.entityLevel.accommodation="tiposalojamiento",d.entityLevel.extra="extras",d.addLoading=function(a){var b=$(a),c=document.createElement("div");c.setAttribute("id","spinnerContainer"),c.setAttribute("class","spinnerContainer"),b.append(c),(new Spinner).spin(c)},d.removeLoading=function(a){var b=document.getElementById("spinnerContainer");b&&b.parentNode&&b.parentNode.removeChild(b)},d.intersectSimpleArrays=function(a,b,c){c||(c=function(a){return a});for(var d=[],e=a.slice(0),f=b.slice(0),g=e.length-1,h=f.length-1;g>=0&&h>=0;)c(e[g])>c(f[h])?(e.pop(),g--):c(e[g])<c(f[h])?(f.pop(),h--):(d.push(e.pop()),f.pop(),g--,h--);return d},d.generateStep3URL=function(a,b,c,d){var e=a;return e=e.replace(new RegExp("TICKERPLACEHOLDER","g"),b),e=e.replace(new RegExp("LANGUAGEPLACEHOLDER","g"),c),e=e.replace(new RegExp("IDPLACEHOLDER","g"),d)},d.getDiscountActiveDiscountCodes=function(a,b){if("undefined"==typeof a)return[];var c=[];return angular.forEach(b,function(b,d){-1!=a.indexOf(b)&&c.push(b)}),c},d.isCodeActive=function(a,b){var c=[];return angular.forEach(givenCodes,function(a,d){1!=b.indexOf(a)&&c.push(a)}),c},d.generateImgUrl=function(a,b,c,e,f){if("undefined"==typeof e||!e)return STATIC_ROOT_URL+"NoPhoto.jpg";var g=e.lastIndexOf("."),h=e.substr(0,g),i=e.substr(g),j="";if(f&&(f.width||f.height)){var k=f.height?f.height:f.width,l=f.width?f.width:f.height;j=STATIC_ROOT_URL+a.ticker+"/"+d.entityLevel[c]+"/"+b.id+"/"+h+"_"+l+"x"+k+i}else j=STATIC_ROOT_URL+a.ticker+"/"+d.entityLevel[c]+"/"+b.id+"/"+e;return j},d.removeDuplicatesFromSimpleArray=function(a){for(var b=[],c=0,d=a.length;d>c;c++)-1===b.indexOf(a[c])&&b.push(a[c]);return b},d.imgError=function(a){console.log(a.attr("src")),console.log(a),console.log(this)},d.generateConditionsUrl=function(a){return LEGACY_BOOKING_URL+"select/"+a.ticker+"/es/reservationsv6/generalconditions"},d.generateLogoUrl=function(a){return STATIC_ROOT_URL+a.ticker+"/logo/"+a.id+"/"+a.logo.path},d.generateHotelUrl=function(a,b){return a&&b?a:""},d.generateLegacyBookingUrl=function(a,b,c){var d=LEGACY_BOOKING_URL+a.ticker+"/"+b+"/reservationsv6/addToCart?";return angular.forEach(c,function(a,b){d+=encodeURIComponent(b)+"="+encodeURIComponent(a)+"&"}),d},d.attachGetParams=function(a,b){var c=a.substring(-1===a.indexOf("#")?a.length:a.indexOf("#"),a.length);a=a.substring(0,-1===a.indexOf("#")?a.length:a.indexOf("#")),a+=a.indexOf("?")<0?"?":"";var d=!0;return angular.forEach(b,function(b,c){d=!1,a+=encodeURIComponent(c)+"="+encodeURIComponent(b)+"&"}),d?a+c:a.slice(0,-1)+c},d.createLegacyParamsObject=function(a){var b={};return a.channel&&(b.channel=a.channel),a.tracking_id&&(b.tracking_id=a.tracking_id),a.view&&(b.view=a.view),a.iframeMode&&(b.witif=a.iframeMode?1:0),a.iframeResizeDomain&&(b.d=a.iframeResizeDomain),a.witaffiliate&&(b.witaffiliate=a.witaffiliate),a.affiliate&&(b.affiliate=a.affiliate),b},d.getIntegerDigits=function(a){return 0>a?Math.ceil(a):Math.floor(a)},d.getFractionalDigits=function(a){return a-d.getIntegerDigits(a)},d.parseDate=function(a){var b=a.split("-");return new Date(b[2],b[1]-1,b[0])},d.formatDate=function(b,c){return a("date")(b,c)},d.setEstablishmentsProperties=function(a,b){a.hasOwnProperty("establishments")?angular.forEach(a.establishments,function(a,c){d.setEstablishmentsProperties(a,b)}):angular.forEach(b,function(b,c){a[c]=b})},d.setAccommodationsIsOpenProperty=function(a,b,c){a.hasOwnProperty("establishments")?angular.forEach(a.establishments,function(a,e){d.setAccommodationsIsOpenProperty(a,b,c)}):angular.forEach(a.inventoryLinesGrouped,function(a,d){a.inventoryLine.length<=b?a.isOpen=!0&&c:a.isOpen=!1})},d.parseQueryString=function(a){var b=a.slice(1).split("&"),c={};return angular.forEach(b,function(a,b){a=a.split("="),c[a[0]]=decodeURIComponent(a[1]||"")}),JSON.parse(JSON.stringify(c))},d.countOwnProperties=function(a){var b=0;for(var c in a)a.hasOwnProperty(c)&&++b;return b},d.isNumber=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},d.setInventoryLineRates=function(a,b,c,e){var f=["totalRate","averageRate","originalRate","rackRate","firstNightCost"],g=["cheapestRate"],h=["cheapestRate"],i=["reduction"],j=["rate"],k=["rate","originalRate"],l=["total"];if(a.hasOwnProperty("establishments"))angular.forEach(a.establishments,function(a,b){d.setInventoryLineRates(a)});else{if(angular.forEach(h,function(c,e){a.hasOwnProperty(c)&&d.isNumber(a[c])&&(a[c]*=b)}),angular.forEach(a.discounts,function(a,c){angular.forEach(i,function(c,e){a.hasOwnProperty(c)&&d.isNumber(a[c])&&a.percentage&&(a[c]*=b)})}),c&&angular.forEach(c,function(a,c){angular.forEach(j,function(c,e){a.hasOwnProperty(c)&&d.isNumber(a[c])&&(a[c]*=b)})}),e&&e.reservations){angular.forEach(l,function(a,c){e.hasOwnProperty(a)&&d.isNumber(e[a])&&(e[a]*=b)});var m=e.reservations;angular.forEach(m,function(a,c){angular.forEach(k,function(c,e){a.hasOwnProperty(c)&&d.isNumber(a[c])&&(a[c]*=b)})})}angular.forEach(a.inventoryLinesGrouped,function(a,c){var e=a.accommodation;angular.forEach(g,function(a,c){e.hasOwnProperty(a)&&d.isNumber(e[a])&&(e[a]*=b)}),angular.forEach(a.inventoryLine,function(a,c){angular.forEach(f,function(c,e){a.hasOwnProperty(c)&&d.isNumber(a[c])&&(a[c]*=b)})})})}},d.setInventoryLineProperty=function(a,b,c,e,f){a.hasOwnProperty("establishments")?angular.forEach(a.establishments,function(a,b){d.setInventoryLineProperty(a)}):angular.forEach(a.inventoryLinesGrouped,function(a,d){angular.forEach(a.inventoryLine,function(a,d){var g=function(a){var b=!1;return angular.forEach(a.errorMessage,function(a,c){"reservationClosed"==a.failedFilter&&(b=!0)}),b};a.ticker==b&&(a.errorMessage.length<=0||g(a))&&("+1"==e?(a[c]+=f.quantity,a.errorMessage=[]):"-1"==e?(a[c]-=f.quantity,a[c]<=0&&(a.errorMessage?a.errorMessage.push({failedFilter:"reservationClosed"}):a.errorMessage=[{failedFilter:"reservationClosed"}])):a[c]=e)})})},d.updateChildrenAndParentInventories=function(a,b,c,e,f,g,h){var i=c.inventoryRelations.parentOfTicker[e.inventoryLine.ticker],j=c.inventoryRelations.childrenOfTicker[i],k=c.inventoryLinesGrouped.filter(function(a){return a.accommodation.ticker===e.accommodation.ticker})[0].inventoryLine.map(function(a){return a.ticker});if(b>e.startDate&&a<e.endDate){if(angular.forEach(j,function(a,b){d.setInventoryLineProperty(c,a,"availability",f,e)}),!g)return;"-1"===f?h(d.changeAccommodationDisplayedPrice(k,c,!1)):"+1"===f&&h(d.changeAccommodationDisplayedPrice(k,c,!0))}},d.changeAccommodationDisplayedPrice=function(a,b,c){var d={},e=!1,f=0;return angular.forEach(a,function(g,h){angular.forEach(b.inventoryLinesGrouped,function(b,h){angular.forEach(b.inventoryLine,function(h,i){h.ticker==g&&h.availability<=0&&(f++,f===a.length&&(d[b.accommodation.ticker]=!0),e=!0),h.ticker==g&&1==h.availability&&c&&(d[b.accommodation.ticker]=!1,e=!0)})})}),e?d:null},d.setInventoryLinesGrouped=function(a,b){a.hasOwnProperty("establishments")?(angular.forEach(a.establishments,function(a,c){d.setInventoryLinesGrouped(a,b)}),a.errorMessages=b.errorMessages,a.discounts=b.discounts,a.allFiltered=b.allFiltered,a.allRestricted=b.allRestricted):(a.inventoryLinesGrouped=b[a.ticker].inventoryLinesGrouped,a.cheapestRate=b[a.ticker].cheapestRate,a.discounts=b[a.ticker].discounts,a.errorMessages=b[a.ticker].errorMessages,a.allFiltered=b[a.ticker].allFiltered,a.allRestricted=b[a.ticker].allRestricted,a.activeDiscounts=b[a.ticker].activeDiscounts)},d.getInventoryLineByTicker=function(a,b){var c={inventories:{},accommodation:{},services:{}};if(!a.hasOwnProperty("establishments")){var e=c.inventories,f=c.accommodation,g=c.services;return e[a.ticker]={},f[a.ticker]={},g[a.ticker]={},angular.forEach(a.services,function(c,d){"[object Array]"===Object.prototype.toString.call(b)?angular.forEach(b,function(b,e){b===d&&(g[a.ticker][d]=c)}):b===d&&(g[a.ticker][d]=c)}),angular.forEach(a.inventoryLinesGrouped,function(c,d){var g=c.accommodation;"[object Array]"===Object.prototype.toString.call(b)?angular.forEach(b,function(b,c){b===g.ticker&&(f[a.ticker][g.ticker]=g)}):b===g.ticker&&(f[a.ticker][g.ticker]=g),angular.forEach(c.inventoryLine,function(c,d){"[object Array]"===Object.prototype.toString.call(b)?angular.forEach(b,function(b,d){b===c.ticker&&(e[a.ticker][c.ticker]=c)}):b===c.ticker&&(e[a.ticker][c.ticker]=c)})}),c}return angular.forEach(a.establishments,function(a,b){angular.extend(c,d.getInventoryLineByTicker(a))}),c},d.getInventoryLinesID=function(a){var b={};return a.hasOwnProperty("establishments")?(angular.forEach(a.establishments,function(a,c){angular.extend(b,d.getInventoryLinesID(a))}),b):(b[a.ticker]=[],angular.forEach(a.inventoryLinesGrouped,function(c,d){angular.forEach(c.inventoryLine,function(c,d){b[a.ticker].push(c.ticker)})}),b)},d.getDiscountsID=function(a){var b={};return b[a.ticker]=[],angular.forEach(a.discounts,function(c,d){b[a.ticker].push(c.ticker)}),b},d.calculateServiceRate=function(a,b,c,d,e,f){var g=a.daily?e:1;return a.type==f.serviceType.units?a.rate*d*g:a.type==f.serviceType.room?a.rate*c*g:a.type==f.serviceType.person?a.rate*b*g*c:void 0},d.setGetParameter=function(a,c){var d=window.location.href,e="";if(d.indexOf("#")>=0&&(e=d.substring(d.indexOf("#")),d=d.substring(0,d.indexOf("#"))),d.indexOf(a+"=")>=0){var f=d.substring(0,d.indexOf(a)),g=d.substring(d.indexOf(a));g=g.substring(g.indexOf("=")+1),g=g.indexOf("&")>=0?g.substring(g.indexOf("&")):"",d=f+a+"="+c+g}else d+=d.indexOf("?")<0?"?"+a+"="+c:"&"+a+"="+c;return d+=e,b.location.href=d,!1},d.loadLocales=function(a){var b={ar:{DATETIME_FORMATS:{AMPMS:["",""],DAY:["","","","","","",""],MONTH:["","","","","","","","","","","",""],SHORTDAY:["","","","","","",""],SHORTMONTH:["","","","","","","","","","","",""],fullDate:"EEEE d MMMM y",longDate:"d MMMM y",medium:"dd/MM/yyyy h:mm:ss a",mediumDate:"dd/MM/yyyy",mediumTime:"h:mm:ss a","short":"d/M/yyyy h:mm a",shortDate:"d/M/yyyy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"",DECIMAL_SEP:"",GROUP_SEP:"",PATTERNS:[{gSize:0,lgSize:0,macFrac:0,maxFrac:3,minFrac:0,minInt:1,negPre:"",negSuf:"-",posPre:"",posSuf:""},{gSize:0,lgSize:0,macFrac:0,maxFrac:2,minFrac:2,minInt:1,negPre:"",negSuf:"-",posPre:"",posSuf:""}]},id:"ar",pluralCat:function(a){return 0==a?PLURAL_CATEGORY.ZERO:1==a?PLURAL_CATEGORY.ONE:2==a?PLURAL_CATEGORY.TWO:a==(0|a)&&a%100>=3&&10>=a%100?PLURAL_CATEGORY.FEW:a==(0|a)&&a%100>=11&&99>=a%100?PLURAL_CATEGORY.MANY:PLURAL_CATEGORY.OTHER}},ca:{DATETIME_FORMATS:{AMPMS:["a.m.","p.m."],DAY:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"],MONTH:["de gener","de febrer","de mar","dabril","de maig","de juny","de juliol","dagost","de setembre","doctubre","de novembre","de desembre"],SHORTDAY:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],SHORTMONTH:["de gen.","de febr.","de mar","dabr.","de maig","de juny","de jul.","dag.","de set.","doct.","de nov.","de des."],fullDate:"EEEE d MMMM 'de' y",longDate:"d MMMM 'de' y",medium:"dd/MM/yyyy H:mm:ss",mediumDate:"dd/MM/yyyy",mediumTime:"H:mm:ss","short":"dd/MM/yy H:mm",shortDate:"dd/MM/yy",shortTime:"H:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"",DECIMAL_SEP:",",GROUP_SEP:".",PATTERNS:[{gSize:3,lgSize:3,macFrac:0,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,macFrac:0,maxFrac:2,minFrac:2,minInt:1,negPre:"(",negSuf:")",posPre:"",posSuf:""}]},id:"ca",pluralCat:function(a){return 1==a?PLURAL_CATEGORY.ONE:PLURAL_CATEGORY.OTHER}},de:{DATETIME_FORMATS:{AMPMS:["vorm.","nachm."],DAY:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],MONTH:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],SHORTDAY:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],SHORTMONTH:["Jan","Feb","Mr","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],fullDate:"EEEE, d. MMMM y",longDate:"d. MMMM y",medium:"dd.MM.yyyy HH:mm:ss",mediumDate:"dd.MM.yyyy",mediumTime:"HH:mm:ss","short":"dd.MM.yy HH:mm",shortDate:"dd.MM.yy",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"",DECIMAL_SEP:",",GROUP_SEP:".",PATTERNS:[{gSize:3,lgSize:3,macFrac:0,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,macFrac:0,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]},id:"de",pluralCat:function(a){return 1==a?PLURAL_CATEGORY.ONE:PLURAL_CATEGORY.OTHER}},en:{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,macFrac:0,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,macFrac:0,maxFrac:2,minFrac:2,minInt:1,negPre:"(",negSuf:")",posPre:"",posSuf:""}]},id:"en",pluralCat:function(a){return 1==a?PLURAL_CATEGORY.ONE:PLURAL_CATEGORY.OTHER}},es:{DATETIME_FORMATS:{AMPMS:["a.m.","p.m."],DAY:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"],MONTH:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],SHORTDAY:["dom","lun","mar","mi","jue","vie","sb"],SHORTMONTH:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],fullDate:"EEEE, d 'de' MMMM 'de' y",longDate:"d 'de' MMMM 'de' y",medium:"dd/MM/yyyy HH:mm:ss",mediumDate:"dd/MM/yyyy",mediumTime:"HH:mm:ss","short":"dd/MM/yy HH:mm",shortDate:"dd/MM/yy",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"",DECIMAL_SEP:",",GROUP_SEP:".",PATTERNS:[{gSize:3,lgSize:3,macFrac:0,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,macFrac:0,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]},id:"es",pluralCat:function(a){return 1==a?PLURAL_CATEGORY.ONE:PLURAL_CATEGORY.OTHER}},fr:{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],MONTH:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"],SHORTDAY:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],SHORTMONTH:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],fullDate:"EEEE d MMMM y",longDate:"d MMMM y",medium:"d MMM y HH:mm:ss",mediumDate:"d MMM y",mediumTime:"HH:mm:ss","short":"dd/MM/yy HH:mm",shortDate:"dd/MM/yy",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"",DECIMAL_SEP:",",GROUP_SEP:"",PATTERNS:[{gSize:3,lgSize:3,macFrac:0,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,macFrac:0,maxFrac:2,minFrac:2,minInt:1,negPre:"(",negSuf:")",posPre:"",posSuf:""}]},id:"fr",pluralCat:function(a){return a>=0&&2>=a&&2!=a?PLURAL_CATEGORY.ONE:PLURAL_CATEGORY.OTHER}},it:{DATETIME_FORMATS:{AMPMS:["m.","p."],DAY:["domenica","luned","marted","mercoled","gioved","venerd","sabato"],MONTH:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"],SHORTDAY:["dom","lun","mar","mer","gio","ven","sab"],SHORTMONTH:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],fullDate:"EEEE d MMMM y",longDate:"dd MMMM y",medium:"dd/MMM/y HH:mm:ss",mediumDate:"dd/MMM/y",mediumTime:"HH:mm:ss","short":"dd/MM/yy HH:mm",shortDate:"dd/MM/yy",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"",DECIMAL_SEP:",",GROUP_SEP:".",PATTERNS:[{gSize:3,lgSize:3,macFrac:0,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,macFrac:0,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]},id:"it",pluralCat:function(a){return 1==a?PLURAL_CATEGORY.ONE:PLURAL_CATEGORY.OTHER}},nl:{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],MONTH:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],SHORTDAY:["zo","ma","di","wo","do","vr","za"],SHORTMONTH:["jan.","feb.","mrt.","apr.","mei","jun.","jul.","aug.","sep.","okt.","nov.","dec."],fullDate:"EEEE d MMMM y",longDate:"d MMMM y",medium:"d MMM y HH:mm:ss",mediumDate:"d MMM y",mediumTime:"HH:mm:ss","short":"dd-MM-yy HH:mm",shortDate:"dd-MM-yy",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"",DECIMAL_SEP:",",GROUP_SEP:".",PATTERNS:[{gSize:3,lgSize:3,macFrac:0,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,macFrac:0,maxFrac:2,minFrac:2,minInt:1,negPre:"",negSuf:"-",posPre:"",posSuf:""}]},id:"nl",pluralCat:function(a){return 1==a?PLURAL_CATEGORY.ONE:PLURAL_CATEGORY.OTHER}},pl:{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["niedziela","poniedziaek","wtorek","roda","czwartek","pitek","sobota"],MONTH:["stycznia","lutego","marca","kwietnia","maja","czerwca","lipca","sierpnia","wrzenia","padziernika","listopada","grudnia"],SHORTDAY:["niedz.","pon.","wt.","r.","czw.","pt.","sob."],SHORTMONTH:["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","pa","lis","gru"],fullDate:"EEEE, d MMMM y",longDate:"d MMMM y",medium:"d MMM y HH:mm:ss",mediumDate:"d MMM y",mediumTime:"HH:mm:ss","short":"dd.MM.yyyy HH:mm",shortDate:"dd.MM.yyyy",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"z",DECIMAL_SEP:",",GROUP_SEP:"",PATTERNS:[{gSize:3,lgSize:3,macFrac:0,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,macFrac:0,maxFrac:2,minFrac:2,minInt:1,negPre:"(",negSuf:")",posPre:"",posSuf:""}]},id:"pl",pluralCat:function(a){return 1==a?PLURAL_CATEGORY.ONE:a==(0|a)&&a%10>=2&&4>=a%10&&(12>a%100||a%100>14)?PLURAL_CATEGORY.FEW:1!=a&&(a%10==0||a%10==1)||a==(0|a)&&a%10>=5&&9>=a%10||a==(0|a)&&a%100>=12&&14>=a%100?PLURAL_CATEGORY.MANY:PLURAL_CATEGORY.OTHER}},pt:{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"],MONTH:["janeiro","fevereiro","maro","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],SHORTDAY:["dom","seg","ter","qua","qui","sex","sb"],SHORTMONTH:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],fullDate:"EEEE, d 'de' MMMM 'de' y",longDate:"d 'de' MMMM 'de' y",medium:"dd/MM/yyyy HH:mm:ss",mediumDate:"dd/MM/yyyy",mediumTime:"HH:mm:ss","short":"dd/MM/yy HH:mm",shortDate:"dd/MM/yy",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"R$",DECIMAL_SEP:",",GROUP_SEP:".",PATTERNS:[{gSize:3,lgSize:3,macFrac:0,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,macFrac:0,maxFrac:2,minFrac:2,minInt:1,negPre:"(",negSuf:")",posPre:"",posSuf:""}]},id:"pt",pluralCat:function(a){return 1==a?PLURAL_CATEGORY.ONE:PLURAL_CATEGORY.OTHER}},ru:{DATETIME_FORMATS:{AMPMS:[" "," "],DAY:["","","","","","",""],MONTH:["","","","","","","","","","","",""],SHORTDAY:["","","","","","",""],SHORTMONTH:[".",".","",".","","","",".",".",".",".","."],fullDate:"EEEE, d MMMM y''.",longDate:"d MMMM y''.",medium:"dd.MM.yyyy H:mm:ss",mediumDate:"dd.MM.yyyy",mediumTime:"H:mm:ss","short":"dd.MM.yy H:mm",shortDate:"dd.MM.yy",shortTime:"H:mm"},NUMBER_FORMATS:{CURRENCY_SYM:".",DECIMAL_SEP:",",GROUP_SEP:"",PATTERNS:[{gSize:3,lgSize:3,macFrac:0,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,macFrac:0,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]},id:"ru",pluralCat:function(a){return a%10==1&&a%100!=11?PLURAL_CATEGORY.ONE:a==(0|a)&&a%10>=2&&4>=a%10&&(12>a%100||a%100>14)?PLURAL_CATEGORY.FEW:a%10==0||a==(0|a)&&a%10>=5&&9>=a%10||a==(0|a)&&a%100>=11&&14>=a%100?PLURAL_CATEGORY.MANY:PLURAL_CATEGORY.OTHER}},zh:{DATETIME_FORMATS:{AMPMS:["",""],DAY:["","","","","","",""],MONTH:["1","2","3","4","5","6","7","8","9","10","11","12"],SHORTDAY:["","","","","","",""],SHORTMONTH:["1","2","3","4","5","6","7","8","9","10","11","12"],fullDate:"yMdEEEE",longDate:"yMd",medium:"yyyy-M-d ah:mm:ss",mediumDate:"yyyy-M-d",mediumTime:"ah:mm:ss","short":"yy-M-d ah:mm",shortDate:"yy-M-d",shortTime:"ah:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,macFrac:0,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,macFrac:0,maxFrac:2,minFrac:2,minInt:1,negPre:"(",negSuf:")",posPre:"",posSuf:""}]},id:"zh",pluralCat:function(a){return PLURAL_CATEGORY.OTHER}}};for(var c in b)a.put(c,b[c])},d};witbookerServices.factory("util",["$filter","$window","md5",util]),witbookerServices.provider("currencySettings",function(){var a="EUR",b="EUR",c=1,d={};this.defaultCurrency=function(b){a=b},this.currentCurrency=function(a){b=a},this.conversionRate=function(a){c=a},this.rates=function(b){d=b,d[a]=1},this.$get=["$filter",function(e){return new CurrencySettings(a,b,c,d)}]});var eventCache=[];angular.module("paymentServices",[]).service("sipay",["$http","$window","$rootScope","util","$translate",function(a,b,c,d,e){function f(a){var b=!1;return a.match(/Android|webOS|iPhone|iPad|iPod|bada|Symbian|Palm|CriOS|BlackBerry|IEMobile|WindowsMobile|Opera Mini/i)&&(b=!0),b}function g(a){return/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(a)}function h(){var a=navigator.userAgent.toLowerCase();return r.isSmartPhone=f(a),r.isWebView=g(a),"object"==typeof r.currentAgent&&2===r.currentAgent.length&&parseFloat(r.currentAgent[1])<r.supportedAgents[r.currentAgent[0]]?(console.log("IC_ELIGIBLITY_BROWSER_NOT_SUPPORTED browser: "+r.currentAgent[0]+" browserversion: "+r.currentAgent[1]),!1):!(r.isSmartPhone||r.isWebView||r.oldIe)}function i(){window.orientation&&addEvent(window,"orientationchange",j,this),addEvent(window,"resize",j,this)}function j(){var a,b,c,d,e,f,g=document.documentElement?document.documentElement.clientWidth:window.innerWidth;window.innerHeight&&window.scrollMaxY?(c=g+window.scrollMaxX,d=window.innerHeight+window.scrollMaxY):document.body.scrollHeight>document.body.offsetHeight?(c=document.body.scrollWidth,d=document.body.scrollHeight):(c=document.body.offsetWidth,d=document.body.offsetHeight),window.innerHeight?(a=g,b=window.innerHeight):document.documentElement&&document.documentElement.clientHeight?(a=document.documentElement.clientWidth,b=document.documentElement.clientHeight):document.body&&(a=document.body.clientWidth,b=document.body.clientHeight),e=a>c?a:c,f=b>d?b:d,q.UI.mask.style.width=e+"px",q.UI.mask.style.height=f+"px",r.name&&-1===document.body.className.indexOf(r.name)&&(document.body.className+=" "+r.name)}function k(){window.orientation&&removeEvent(window,"orientationchange",j),removeEvent(window,"resize",j)}function l(){var e=q.UI;clearInterval(q.intVal),k(),q.win&&q.win.close&&q.win.close(),s&&e.wrapper&&e.wrapper.parentNode&&(e.wrapper.parentNode.removeChild(e.wrapper),document.body.className=document.body.className.replace(r.name,""),console.log({status:"IC_DESTROY_NO_CANCEL_RETURN_URL"})),s=!1,a.get(STEP2_SIPAY_CHECK_RESERVATION_STATUS,{params:{hotelTicker:c.establishment.ticker}}).success(function(a){a&&a.status&&a.id&&(b.location.href=d.generateStep3URL(STEP3_CONFIRMATION_URL,c.establishment.ticker,c.witbookerParams.representation.locale,a.id))}).error(function(){})}function m(a){var b=q.UI={};a=a||{},b.wrapper=document.createElement("div"),b.wrapper.id=r.name,b.panel=document.createElement("div"),b.panel.className="panel",b.panel.id="PPPanel",b.mask=document.createElement("div"),b.mask.className="mask",b.mask.id="mask",addEvent(b.mask,"click",q.startFlow,this),b.loading=document.createElement("div"),b.loading.className="ppmodal";var c=document.createElement("div");c.className="sipayLogo",b.loading.appendChild(c);var d=document.createElement("div");d.className="message",d.id="ppmsg",d.innerHTML=r.secureWindowmsg,b.loading.appendChild(d);var e=document.createElement("a");if(e.className="closeButton",e.role="button",e.innerText="Close Window",addEvent(e,"click",l,this),b.loading.appendChild(e),a.error){var f=document.createElement("div");f.className="text",f.innerText=a.error,b.loading.appendChild(f)}else b.loading.className=b.loading.className+" loading";b.wrapper.appendChild(b.mask),b.wrapper.appendChild(b.loading),document.body.className=document.body.className+" "+r.name,document.body.appendChild(b.wrapper)}function n(a){var b=a.split("EC-");return b.length>1?"EC-"+b[1].split("&")[0]:null}function o(){var a,b,c,d=r.mbWidth,e=r.mbHeight,f=!1,g=document.querySelector("#PPFrame .ppmodal.loading");if(window.outerWidth?(a=Math.round((window.outerWidth-d)/2)+window.screenX,b=Math.round((window.outerHeight-e)/2)+window.screenY):window.screen.width&&(a=Math.round((window.screen.width-d)/2),b=Math.round((window.screen.height-e)/2)),c=window.open("about:blank",r.name,"top="+b+", left="+a+", width="+d+", height="+e+", location=1, status=1, toolbar=0, menubar=0, resizable=1, scrollbars=1"),q.win=c,"undefined"==typeof c)return console.log({status:"IC_CLICK_OPEN_MB_FAILED"}),window;u&&console.log({status:"IC_CLICK_OPEN_MB_SUCCESS"}),c&&c.focus&&c.focus(),g&&(g.className="ppmodal");try{c.document.write('<!DOCTYPE html><html lang="en"><head><title>Sipay</title><style>.mask{z-index: 20001;position: absolute;top: 0;left: 0;background-color: black;opacity: 0.54;filter: alpha(opacity=54);}.ppmodal{display: none;z-index: 20003;-webkit-box-sizing: border-box;-moz-box-sizing: border-box;-ms-box-sizing: border-box;box-sizing: border-box;width: 100%;height: 100%;top: 0;left: 0;overflow: hidden;background-color: #EFEFEF;-moz-background-clip: padding-box;-webkit-background-clip: padding-box;background-clip: padding-box;padding: 2em;font-family: "helvetica heue", arial, helvetica, sans-serif;position: fixed;}.minibrowser .ppmodal{display: block;}.loading .mask{height: 30px;width: 30px;position: absolute;left: 48%;top: 50%;margin: -15px auto auto -15px;opacity: 1;filter: alpha(opacity=100);background-color: rgba(255, 255, 255, 0.701961);}.loading .mask{height: 48px;width: 48px;border: none;background: url(data:image/gif;base64,R0lGODlhMAAwAPcAAP////f39/H39/Pz8+/z9+vz9+/v7+vv8+fv9+fv8+Lv9+Pv8+vr69/r8+Pr89vr8d/r7+fn59vn79fn79Xn8+Pj49fj79Lj787j79Lj69/f38/f68rf68rf78Xf79fX18Pb7Mjb58fY48La5rvX677W5rrX57TU67XS58zMzMzMzLPO36rO467K38LGyqrK377GzKbK36rG26bG36bG26LG37rCxqHG27O+xp7C26LC266+xprC25rA15O+26e6xpO+16K3xpK61562yI6615i2yYq214620oq20oa21payxo+yxoKy0oay0n2y0oiuxnqu0nuuznWu0H6qxnWqznGqznmnxm2oznWmxnGmxmmmzmmmym6ixmmgxmWiymGiymWexF2fymGewlieyluawlWayFGaylGZxlOWwk2Wxk2WwkmWxkmSxUWSwkWSxkGSxj2SwkGRwj2OwjmOwjWOwjGKwjWKwi2Kwi2GwiiGwiSGwiSCwiCCwhyCwhx9whh9wv///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJBwCAACwAAAEALwAuAAAI/wABCRxIsKDABjWomJGDp06KFB8+VGAQwKDFixgJ8DDD549Hj3weinz4gQEAjCgNEkhS56PLP3tGykwRIaXNF3Nevow5c+QHAzYtCriiUyfPniM1BCUowU1Ro0hnfqgY9AKdpzpDRpU51WaDllg/9uFzZ6tUqhcFvAn7J4+WFxsaFAAQIIABDWYhotQSFo+TBygDVDCr1OKLsFokLA2ANyrQggKuFu1DZCnBCFE/GEzylM8LywUNRK05kMCdp5VBF8SMlCCPp1pUW2w8k8FAM0XzOJBtMABSzYAadNTphLfFwT0r1sjdwHhvpLapFI3t3CDtkRUA4dbJorpB0VIB5dx82WeD94K+w+fJ2vz8wPQzAdXZQ7/+nQLuBwJojfRkfkD79QQIUmi5B59MgHyQ3H+AHCiSZgrO9Fh+4HEFCHIyFZbfdSJlxwCB+Tkokm0iPpSdexjKRFWEMxVoXIl6CfRhTxo6x+GIBI1WHWs9+ScQjxIaV+FMpBHEIpGyAWnhd1tp4CJGjG01YUE3ylTBkwQJRhhKRyKlgQF1AUCXXVUuCWWXeaVJEpbooanmVl0FFYCbb56lWpl1PlQjaAbQqeZP3in5ZpHeAcCAn1yZxKBAATBQQUQ+SUQRaAEBACH5BAkHAIAALAAAAQAvAC4AAAj/AAEJHEiwoEAJM6SYkVMHT547ctJIuXHBoMWLGBHwMJPnj8ePID3uSTMDAMaTBgsksROyZUswKSKgnBljjsubH/nsSJHig4GZFglo6YOz6BmeSDUAJSjBTdGnRZAi/RBg6QWbT3HOcSF1alWUEuhk/dNnT56Gej5a6SqV6kkCa57mGeOjxIUGCBJciBGmjg22bU9qKYqHyYOTCSoAlqrUYouiWiQsDaBhMc+fBQvIucmHyFKCESx/MJiEc43PBQ1YlkmwY0s+N1AbDL2YIAMsLENKkW2xMmAGAz+kcLEkDdE/dRDwNhhg8WhAzaX+6JLHyXKLigFXVc12yITrzBcD6c/etTH4gr67VgAknC3m8wS5dx3dvutX+AOjzwe0+D5+6LUtZtJ/AgEQIGADEmggYPxpR6BA+nXFnoMPRjjVhO49CIh8gZHHmIbpSbUeA/0RaCFSwJ3I03r/eSjVV/XZh5+KPQ1EImDmgReiVMANtNp5tCEImmXvycZhV6wRFCOSvAXJ1nOpWZaCBv6dRJmURRK0I1sVVFlQAC6ylaNBS+JoQAABAAAAmgZs+SRKAZQp5ZzzecmcnHTO6RZQcebpZ092nuTmnx8uZwCefvoEn5OEJgkfAAwgOh8DCVbIQAUfxJhpBQwEelFAACH5BAkHAIAALAAAAAAvAC8AAAj/AAEJHEiwoEFAChQ0QCDgoMOHEAdOeKHFjJs7dTDCMXOFB4aIIA828DGmzp+TKFOe3JOGSIOQIAkYmaOyps07Tl7CPBjjjc2fNuv42EmQQJU+QJPW/KKA6AQ3SqOqnMMBZgA4UrOizFMCZIAPWKLu0WOnTh4+UcHACBDxQ4oUU37mMeODQ4cCCiaAqPHlzs8ubz9A1PD2bdyUdJh8fChBiM+UgAtrcGigcOHDfajoBFmACdo/XCy/NXDQregUVvQQISpQRp4uLk4LLhjhdOEQrAeGiG07QkHbb33nHlgbOEEGwCcPJ0jYNoOBpk+zXT4wAPDZ1m1XoF6wAnC2lW1P9ecuMPvp595PKyc/sLno7dEtk2Y/MLxowfELj6dv3rLg7/RVZxxwAAQoEAAD2laggQjaBgiABvZnGSD5vbUfexIGRqFt8wVon3+ApCfaevS5Z9l2yIkXYIZvPcdiCtvRJ6Jo01VoIYbXDZSieuyZaNlzAwGXgnDLFacgQUae1iFrH4pGJHRCPglTkvcd1OSIFz4UgI+iLcmckG9VkCVBAcxoG4kG2TiiAQEEAAAAbRrApWwRfQXmnXd+MGZBduLpp397GtTnn3jqydqchFqG5k4GqPnnB17mRiWhUlIHAAOO3sfAggYCEgADFXwQn6gVMBDoQQEBACH5BAUHAIAALAAAAQAvAC4AAAj/AAEJHEiwoMALOaqkmYMnT547c8xcyTHBoMWLGAG8SMPnj8ePID3qSeNDAcaTFiOk4BKyZcs6TBCgRGngQ4oUOPa43PlxTo2ZFzXcHEqGp9E/X2QCFRjA5tCbQ44afXNhadOnT+NI5VmHw8yrWIc++ZinTp07evpsrVP1pNOwN23M+fLiQoECCyaAyBEGz9E3BTAKhTu0QmCMDYzUMRrmogHCNzUEWNqgitEYFt+GjbCUIJCOLumYJKiSsIHOBV/o2emkIGTOqFODDqmHIAPCGmJbdNLSDhYGAzU/nay7YAE6HvukWeIixQemhCsUt5gkT5cfWCc/hkt8OsEHQ+AC7K8AN7d3g4OxShd+8/T5gtuxPmefovt76GGfE7Z/PwBhQIQBcB9BAPwX4IADFQgXgNwhiF9YgNDH33v+5RchXO4hGN9Tz5EXlnkIpveUdLc1OGCFYQGHonoIehgWcfTV1x9hzwlU4of3ifgUcAO9dl5pcAk4EJBhZRjbhljBRlCMKSjZGZHyWYQkVpJZpSNWRhJ0pXoTEhSAi7i5BdlQGhgQQAAAAHCmAVtGeRJYY8YJ2QddFgSnnHjeRKdVTOYpX52C+RkniEf2KecHWeoGpZ9OngcAA4YO9QEDQjoISAAMVPCBZptWwACgFgUEACH5BAUHAIAALA8AAQAgABcAAAiuAAEBCsCgwocPKVLUEQhICqAGDCNKjMgAYcKLKfhMFEhg40SMIPd4HCkRJEaRJFOavIiSpBYBHlcmbJlSwkaZGVNGvPBRpk6JECNi1GAgQAAABRpseKHlp8cAKaGkvOK0qtWrDGFi1ZlkK0Mifzbe6egVUFOJf/7wKAvIQZ60cNOaYQvISVy4fIKWfXv3Tw26Wvr+cciWheC5bDf06TuHbgM+ffPQLXBnj+XLdQICACH5BAkHAIAALAAAAQAwAC4AAAjeAAEJHEiwoMGBKVJ8+FCBQYCDECNKPJiwYsIPDABM3MhRoEWLWQA56UgS4seELuqUXGnwZIolBb+wLOmSzcybgE7+wHnzZBeJE3hCBBAggAENKfgIFRogCR2JXpZuTABFqVScMq5q3cq1q9evYA8mCcsRAVmOYc5O5AHRrFoQECmoBRT0oIe5CgD92cs3D4m5Be7w7ftXbQE8g/feuav2gp7Ef+bIVfsC8h8zbs+GsVxlLiA7lm94tjElzuA9FzwPHEJmz581qgvi4CI6tu3buHPr3s27t+/fwIMLhxgQACH5BAkHAIAALAAAAQAwAC4AAAj/AAEJHEiwoMAADCp8+JCiYYqFFRgEMEixokVAABgwdMix40MGAC6KNBjBo0mTEUaONLDxpEuHHwyorKjhpc2OGmYSDNDyps8PE2fy9EkUZlCRQ4sWxVIHw8ieJzUYCBAAAACqBmqetPLnDx0FF7W6rHCUYoAKHrl2/TPGooGXGspeDCAWS5+1XX1UhMoxpU6BJbPcxfsnD9iCJU/K/DvQgB7Ca6UYdOmX8UAafCAXPiyQQVTLBpto/mOEIN+GckELeKPZzcAAJyuApthDc58LAt+aTD0bwR3NegGh9ZhzNsUvmrUIPL3YeMEYmt80AHSat/ELmQnfcXrS+uwEjwnr3CEB6GRI5wUF/CbM50R5k+fRD1QPeY/77vIJNtgDeTz13fkNtEF2eNXRwX8eNZcfdJC5AdZwOAUokBfJdYZffg3goRkPB8UWIBCa8YHbchc6J4Ab0RHkmUnFOefEaEQURJlzPBCI1x0IIOaSgn8ZYCNekhl0WkOV6VSSWoTVkaNBukXlXUF0OTQFZBzSZBNZc0EoJV5eiDQkR1JRZRVWYnk05R9ycFZRUkr5ZEUdIyL1ZZsdkSfUnHQCZVmZdIJpHEt9wsQjaInRWSR6GeEJE0gS7pTQQhxBJBFjAQEAIfkECQcAgAAsAAABADAALgAACP8AAQkcSLCgwAAMKnz4kKJhioUVGAQwSLGiRUAAGDB0yLHjQwYALoo0GMGjSZMRRo40sPGkS4cfDKisqOGlzY4aZhIM0PKmzw8TZ/L0SRRmUJFDiyoFOrLnSQ0GAgQAAECqgZo2P4jE6rLCUYoBKtjMWdHASw1fLwbgalImRaccU+oUWPKkVpIu3c4VaPakXIIu/+6l67Igg6eDDbJtuKNLDoJwG6ZNHMChCyVn+PxxM7CyyQqJKVawYUXOn9N/+Fzge3JyaAJ1UMu+IVCsR7KhDX6RjbqKwMh6cxN8wft0GgSAIrvOfUFP8TkUALUWbrAAnuJ3PEg3GZI6wQJ3iuftIbHdY3fvAhdc5z2+fMfloSfswa5dOfqBIPo8jw78vkAexf1hRgGA2IaTf4CMEaBvgBxmEnx7JZBHgLQB4plHoKHHRIB7PDBQZClAOJMDExZnBkEO3uadFwH+wUNBgQlHRIt1EEhQXW2FVoN+ASbxVox73aBZgHQIQFFfT4k40AJS8BjgCxYthiGEATgRW4t/aCESiBxBJRVVVtU0ZItvGKkWlz51gWUdEqiUlFIO7eCkbHSsJhSaNqVRnBtt7iUlUUvwpgUBobEEZwou2HHaHC14h2NRWdyRhI3eZYQnTCFoh+BBCS3EEUQS7RUQACH5BAUHAIAALAAAAQAvAC4AAAj/AAEJHEiwoMAADCp8+JCiYYqFFRgEMEixokUADBg63MjxIQMAFkNSjNCxZMkIIlMa0GiypcMPBlJW1OCyJkcNMgkGYGmz54eJMnf2HPoSaEihRJP+FMnTpAYDAQIAABDVAM2aH0JebVnBKMUAFWripGjApQavR7eWjGmw6UaUOQeSNJm14Ny1cQuWNQl3YMu+eeW2JMjAaWCKajcyGOi2IdrDgALQPWiyAmSKYUtO3Nvx8WXJJRdnvnl5ZknLjdmW1lsya2PPpUFzzGoS9meTgEyCXF0QAG7dvAsWuLOnuPE6uTUHJ9iAz5/n0PMAer184IY+0KHPmY63OiAW2aGb0wE0euPY6lrCP5cCqLDy5Q3yqP9TI3Ll6k7m82kgsHEK23E5IJ964wnkXkfnlZbefDwQ9NdqRMz3xx0EEHRXR6oF9oJz8yXR1oOBEYHdfHQIYBBnJZ2VkwQLSviCaS51FdIDTuAh4XNahOSfeVBJVUADG7ygxYA3vmGiRUgNdQcfI974XB38iZSkTRw6+RwdF+Q0pUt7WPmcGxIElphJXVp5xZGBrVRTmRLO8eJqF3bEZnh1JFFhcBg1VuVzfJjBw53eRZbQQg3VgcccZlBxQ5Q5BQQAIfkECQcAgAAsAAABAC8ALwAACM0AAQkcSLCgwYMIEypcyLChw4cQI0qcSLGixYsYM2rcyLGjx48gQ4ocSbKkyZMoU6pcybKlS5MAUsicKdNkAJo0beKU+cGkgZ0pepbUALRCyZtAGZRMokdMEJwBSBaoM5DNExdBS0IxeIeL0pE0+BzUA6ClE5cIXlJMsDDJwi8VbdQZU2PDAgUNLpTwMWbklD+A9+C5E3GCRTmAEysmOUTx4pJkHD8WiYOP5Mkgu1zG/LGFGT2bTU6YAcXMmzqEAb1BWeBBBw8gOlAoMDEgACH5BAkHAIAALAAAAQAvAC8AAAj/AAEJHEiwoMAADCp8+JCiYYqFFRgEMEixokUADBg63MjxIQMAFkNSjNCxZMkIIlMa0GiypcMPBlJW1OCyJkcNMgkGYGmz54eJMnf2HPoSaEihRJP+FMnTpAYDAQIAABDVAM2aH0JebVnBKMUAFWripGjApQavR7eWjGmw6UaUOQeSNJm14Ny1cQuWNQl3YMu+eeW2JMjAaWCKajcyGOi2IdrDgALQPWiyAmSKYUtO3Nvx8WXJJRdnvnl5ZknLjdmW1lsya2PPpUFzzGoS9meTgEyCXF0QAG7dvHv/1hxcJ+7XxQfK3ugab3JAnJkDGr1xbPLEDS0XJl58ueLIlZNT398ItHEK23G9vxy4vaP10tgbLvbLd/XdjrsF3uc44nKJv22VhMUeSRx2Ax9gtEZWR1b08ccfWjSQUwJQ8PFgFx2pVpBaVjzoIR1MYBDSBUS44eGF1YWkUYcnepjHGESY0EEDD2BQghFj3NGihxg+JNJOWOy4Yx981JFHHkLuKAYM6B0kR5JQRukiCTk9kIaUWLb4hohxESCFhVlG2YcWCkC2golhCjlHDKsJQMSTaT54BxQSBlfADGPgIWUfeazhQ53PAfLAC1CE4cYcddhBxxppODFDB4GGJAACCBRQWkAAIfkECQcAgAAsAAABAC8ALwAACP8AAQkcSLCgwAAMKnz4kKJhioUVGAQwSLGiRQAMGDrcyPEhAwAWQ1KM0LFkyQgiUxrQaLKlww8GUlbU4LImRw0yCQZgabPnh4kyd/Yc+hJoSKFEk/4UydOkBgMBAgAAENUAzZofQl5tWcEoxQAVauKkaMClBq9Ht5aMabDpRpQ5B5I0mbXg3LVxC5Y1CXdgy7555bYkyMBpYIpqNzIY6LYh2sOAAtA9aLICZIphS07c2/HxZcklF2e+eXlmScuN2ZbWWzJrY8+lQXPMahL2Z5OATIJcXRAAbt28e//WHFwn7tfFB8re6BpvckCcmQMavXFs8sQNLRcmXny54sgcg4jz0QMlOfWNQBm6eMKmz58/dxYE9/5yIAMud97r/1MlOPaGiw2Ux3769ZHDand1tJtARhCoHx88XBYdR4ABUgAcDr7XRxKHJTgbRStkqJ8XF+QUwH8OqVbQFSK+lwcUE4SUwHkdWWeQAGu0+J4eZhBhAgYPKLDABjWMcYcNLtVlUQNy6LgfH3ngkcce+lnR0lIiTTCHkzrO4UJrthXUQI5ciqhER1jmJEAVfJTp4BmkQdbCG27u18cODcG0mgBCbFnnH2CkUGFpBNxQxoBO5mHGCws+18ALUIzxBh113FHHG2ZAEUOMz1VEwAMYeOBBBw8UAFlAACH5BAUHAIAALAAAAQAvAC4AAAj/AAEJHEiwoMAADCp8+JCiYYqFFRgEMEixokUADBg63MjxIQMAFkNSjNCxZMkIIlMa0GiypcMPBlJW1OCyJkcNMgkGYGmz54eJMnf2HPoSaEihRJP+FMnTpAYDAQIAABDVAM2aH0JebVnBKMUAFWripGjApQavR7eWjGmw6UaUOQeSNJm14Ny1cQuWNQl3YMu+eeW2JMjAaWCKajcyGOi2IdrDgALQPWiyAmSKYUtO3Nvx8WXJJRdnvnl5ZknLjdmW1lsya2PPpUFzzGoS9meTgEyCXF0QAO46e4ILv1OAd2/cef4oX86ngXGduOcsX95nw/OBsjdmNTN9OYvrAjlr1wdEpbtyLeABJW5ouYb5P3mcP8+uGFADPu+dXB/NESh383k4YBx9Lw3Ew3t/oMfbeg0tJhABdyBIxGp3dbSbQEkg2McLl4nHEWCACFCHhhMGVuFsFL2A4HkS5BQAgw6pVtAVK/6BBxQPHMVfSWNRJMAbNcKnxQsbNFAAVQFYZVNdFjUwYpB/9MHHHUrZNtAFdECpHB9ELSWTBEBCucdQXuYkgBZi9tRjYC9It+KYLsG0GgFJPGkenHxdRwAPZuA3HZcdffBRegI1cIMUZsyBRx0NQSRRXgEBACH5BAkHAIAALAAAAQAvAC4AAAi8AAEJHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHOlxRpcdJBGa+cPnjBIXKQdKyPOn5h85VmzEjGGzZ50CKaH0tDkmZpmhNWvEfIOUD4eYdZDmSRDzjlQFVaU2gHrwwtKDJYwe9BFTZdmzaNNu/KI2LZG2DXPAFUhlwdy7AotoMBAgAICzYlykGEy47A/ChWO2QZw45RPGjUXeEQw5ZhfIkUGCEPEB89kADCp86JwZYkAAIfkECQcAgAAsAAABAC8ALgAACP8AAQkcSLCgwAAMKnz4kKJhioUVGAQwSLGiRQAMGDrcyPEhAwAWQ1KM0LFkyQgiUxrQaLKlww8GUlbU4LImRw0yCQZgabPnh4kyd/Yc+hJoyAt50rggSvRnSARz/vxRalKDgQABAADAaoBmzQ8hv0iVSnVjBaMUA1SoiZNijbFjzyxNoQFtyABeTcYsSKAO3LFpgqDMOZCkSbAFk/wd2ycH4YIGWg4WSADP4j98aDw2aLgkwRyX/zjZTDEvRwYDzVymQ4C0wQCHBS7Yc9mIa4prS058cXnPhNuvTaKGctkM8NIlKwASu9jHcYORO4J1c9nE84KwpQOK+rfPhes6TQLh8vuXDwLwAwGIt7OYzwL0AtV7hrO4Dwf4gLJ3BJTmMgv8+m0EFnN/QYFfdByBxcRlb+BnmkPKrXAZHyCgF+BGqBHA3mJaoJdbR0BpcVkevz134UsDtRDaGNc96BBqB1F3mRQNANdZRyANRENofxBxG4IdTXZQf4tN4YKQOd2YIEUh6PHXFA7VlRNeLu1l0BFwQcnRWXd9WJVFAYQhlZYlWYWVVly5qF1IBJyBBVNN2UURBnAO5VRQPNUpnZwiqalnW6StpOdLVt6mJFFIAodRni198BF+ByW0kIAfRMSnRQEBACH5BAkHAIAALAAAAQAvAC4AAAj/AAEJHEiwoMAADCp8+JCiYYqFFRgEMEixokUADBg63MjxIQMAFkMaRMAkT5eOKDlGEMnyxZw/f+64SEnzoQGWFAl4gcnzSc2aGnASlPCGJ884P2t+mIjzAh2jPPsESUpzKUsJdaAaJTOTKkqrFgUU1Rq1iAYDAQIAAJDWgIakH0JqIcuTThIJIQNU+BmUYgu6f/pASSA0wFuaNwsKeEmWDw2hBCNUNWiEbp8YkAsaoLlyYIGsZIlkNig5JcEcdL2Mpni4I4OBZsjmabDaYICUcQE12EOWSW2Ke1FOjEFWz4LftlO+lkK2DHLWKCsAKkPWx3ODmzvGHQt1xPWCt7UD4gJtlM+F7wTDdwR0R+ts9AMBmG4PNQ8C+ALloxzvnjB+9RwBwh1PfHCAHyAAOhQXdVrVcGB2HMXlBFlmHNjaRtK9QFYdBcCXoEOvPZCHUXFMYYN06AXXEVOx7UHGEBsx9dyHDeUGyAtc4NBRX89duNFrA3H2XGkogTQQkR0lthqEHXVGkEYoOQkZkhFSxOSOMopkWE1KFuRjRxVkaZuKKfFIEZQ0nZXWWm19KV5eaHrlFVhwyiknnVrGaedXYrLk5p4NmZmZAXra+UGXtVEpp5TPYVToVx8deFBCC20EkUSZBQQAOw==) no-repeat center center;}.ppmodal.loading{min-height: 160px;}.ppmodal .pplogo{background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGoAAAAdCAYAAABCBvnuAAAON2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS41LWMwMTIgMS4xNDk2MDIsIDIwMTIvMTAvMTAtMTg6MTA6MjQgICAgICAgICI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpkYW09Imh0dHA6Ly93d3cuZGF5LmNvbS9kYW0vMS4wIgogICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIgogICAgeG1sbnM6UGF5UGFsPSJ3d3cucGF5cGFsLmNvbS9iYXNlL3YxIgogICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICBkYzpmb3JtYXQ9ImltYWdlL3BuZyIKICAgZGM6bW9kaWZpZWQ9IjIwMTQtMDUtMDZUMTU6NTg6MzctMDc6MDAiCiAgIGRhbTpzaXplPSIxMjc1IgogICBkYW06UGh5c2ljYWx3aWR0aGluaW5jaGVzPSItMS4wIgogICBkYW06ZXh0cmFjdGVkPSIyMDE0LTA1LTA2VDE1OjU4OjMwLTA3OjAwIgogICBkYW06c2hhMT0iODViZjgxYTJmMzFkYmYzMDA1ZGU2OTJiODFiYThjNjNlZmJmNDA0ZCIKICAgZGFtOk51bWJlcm9mdGV4dHVhbGNvbW1lbnRzPSIwIgogICBkYW06UHJvZ3Jlc3NpdmU9Im5vIgogICBkYW06RmlsZWZvcm1hdD0iUE5HIgogICBkYW06UGh5c2ljYWxoZWlnaHRpbmRwaT0iLTEiCiAgIGRhbTpDb21tZW50cz0iWE1MOmNvbS5hZG9iZS54bXA6ICZsdDs/eHBhY2tldCBiZWdpbj0mcXVvdDvvu78mcXVvdDsgaWQ9JnF1b3Q7VzVNME1wQ2VoaUh6cmVTek5UY3prYzlkJnF1b3Q7PyZndDsmI3hBOyZsdDt4OnhtcG1ldGEgeG1sbnM6eD0mcXVvdDthZG9iZTpuczptZXRhLyZxdW90OyB4OnhtcHRrPSZxdW90O0Fkb2JlIFhNUCBDb3JlIDUuNS1jMDEyIDEuMTQ5NjAyLCAyMDEyLzEwLzEwLTE4OjEwOjI0ICAgICAgICAmcXVvdDsmZ3Q7JiN4QTsgJmx0O3JkZjpSREYgeG1sbnM6cmRmPSZxdW90O2h0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMmcXVvdDsmZ3Q7JiN4QTsgICZsdDtyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSZxdW90OyZxdW90OyYjeEE7ICAgIHhtbG5zOmRjPSZxdW90O2h0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvJnF1b3Q7JiN4QTsgICAgeG1sbnM6ZGFtPSZxdW90O2h0dHA6Ly93d3cuZGF5LmNvbS9kYW0vMS4wJnF1b3Q7JiN4QTsgICAgeG1sbnM6dGlmZj0mcXVvdDtodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyZxdW90OyYjeEE7ICAgIHhtbG5zOlBheVBhbD0mcXVvdDt3d3cucGF5cGFsLmNvbS9iYXNlL3YxJnF1b3Q7JiN4QTsgICBkYzpmb3JtYXQ9JnF1b3Q7aW1hZ2UvcG5nJnF1b3Q7JiN4QTsgICBkYzptb2RpZmllZD0mcXVvdDsyMDE0LTA1LTA2VDE1OjU4OjM3LjkwOS0wNzowMCZxdW90OyYjeEE7ICAgZGFtOnNpemU9JnF1b3Q7MTI3NSZxdW90OyYjeEE7ICAgZGFtOlBoeXNpY2Fsd2lkdGhpbmluY2hlcz0mcXVvdDstMS4wJnF1b3Q7JiN4QTsgICBkYW06ZXh0cmFjdGVkPSZxdW90OzIwMTQtMDUtMDZUMTU6NTg6MzAuNDMyLTA3OjAwJnF1b3Q7JiN4QTsgICBkYW06c2hhMT0mcXVvdDs4NWJmODFhMmYzMWRiZjMwMDVkZTY5MmI4MWJhOGM2M2VmYmY0MDRkJnF1b3Q7JiN4QTsgICBkYW06TnVtYmVyb2Z0ZXh0dWFsY29tbWVudHM9JnF1b3Q7MCZxdW90OyYjeEE7ICAgZGFtOkZpbGVmb3JtYXQ9JnF1b3Q7UE5HJnF1b3Q7JiN4QTsgICBkYW06UHJvZ3Jlc3NpdmU9JnF1b3Q7bm8mcXVvdDsmI3hBOyAgIGRhbTpQaHlzaWNhbGhlaWdodGluZHBpPSZxdW90Oy0xJnF1b3Q7JiN4QTsgICBkYW06TUlNRXR5cGU9JnF1b3Q7aW1hZ2UvcG5nJnF1b3Q7JiN4QTsgICBkYW06TnVtYmVyb2ZpbWFnZXM9JnF1b3Q7MSZxdW90OyYjeEE7ICAgZGFtOkJpdHNwZXJwaXhlbD0mcXVvdDszMiZxdW90OyYjeEE7ICAgZGFtOlBoeXNpY2FsaGVpZ2h0aW5pbmNoZXM9JnF1b3Q7LTEuMCZxdW90OyYjeEE7ICAgZGFtOlBoeXNpY2Fsd2lkdGhpbmRwaT0mcXVvdDstMSZxdW90OyYjeEE7ICAgdGlmZjpJbWFnZUxlbmd0aD0mcXVvdDsyOSZxdW90OyYjeEE7ICAgdGlmZjpJbWFnZVdpZHRoPSZxdW90OzEwNiZxdW90OyYjeEE7ICAgUGF5UGFsOnN0YXR1cz0mcXVvdDtTb3VyY2VBcHByb3ZlZCZxdW90OyYjeEE7ICAgUGF5UGFsOnNvdXJjZU5vZGVQYXRoPSZxdW90Oy9jb250ZW50L2RhbS9QYXlQYWxEaWdpdGFsQXNzZXRzL3NwYXJ0YUltYWdlcy9HbG9iYWxJbWFnZXMvY2hlY2tvdXQvaGVybWVzL2xvZ29fdjMucG5nJnF1b3Q7JiN4QTsgICBQYXlQYWw6aXNTb3VyY2U9JnF1b3Q7dHJ1ZSZxdW90OyZndDsmI3hBOyAgICZsdDtkYzpsYW5ndWFnZSZndDsmI3hBOyAgICAmbHQ7cmRmOkJhZy8mZ3Q7JiN4QTsgICAmbHQ7L2RjOmxhbmd1YWdlJmd0OyYjeEE7ICAmbHQ7L3JkZjpEZXNjcmlwdGlvbiZndDsmI3hBOyAmbHQ7L3JkZjpSREYmZ3Q7JiN4QTsmbHQ7L3g6eG1wbWV0YSZndDsmI3hBOyZsdDs/eHBhY2tldCBlbmQ9JnF1b3Q7ciZxdW90Oz8mZ3Q7JiN4QTsiCiAgIGRhbTpNSU1FdHlwZT0iaW1hZ2UvcG5nIgogICBkYW06TnVtYmVyb2ZpbWFnZXM9IjEiCiAgIGRhbTpCaXRzcGVycGl4ZWw9IjMyIgogICBkYW06UGh5c2ljYWxoZWlnaHRpbmluY2hlcz0iLTEuMCIKICAgZGFtOlBoeXNpY2Fsd2lkdGhpbmRwaT0iLTEiCiAgIHRpZmY6SW1hZ2VMZW5ndGg9IjI5IgogICB0aWZmOkltYWdlV2lkdGg9IjEwNiIKICAgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3Mjg5NkM2OEU1MzExMUUxOUZDMTlFRTAyOEVGMjkzQyIKICAgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOkVGMjJBREYyMDkyMDY4MTE4RjYyQTdEMThDRTRDMEFBIgogICB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjcyODk2QzY3RTUzMTExRTE5RkMxOUVFMDI4RUYyOTNDIgogICBQYXlQYWw6c3RhdHVzPSJTb3VyY2VBcHByb3ZlZCIKICAgUGF5UGFsOnNvdXJjZU5vZGVQYXRoPSIvY29udGVudC9kYW0vUGF5UGFsRGlnaXRhbEFzc2V0cy9zcGFydGFJbWFnZXMvR2xvYmFsSW1hZ2VzL2NoZWNrb3V0L2hlcm1lcy9sb2dvLnBuZyIKICAgUGF5UGFsOmlzU291cmNlPSJ0cnVlIgogICB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzUuMSBNYWNpbnRvc2giPgogICA8eG1wTU06RGVyaXZlZEZyb20KICAgIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MkE4RThGODIzMjIxNjgxMThBNkRGRTg2OEI5RUI5MjgiCiAgICBzdFJlZjpkb2N1bWVudElEPSIwIi8+CiAgPC9yZGY6RGVzY3JpcHRpb24+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InIiPz7/o3JBAAAEwklEQVR4Ae3X7WuWfR3H8e85TYfNm+tm17IVKiV0qbmVrWwqnVhSYsUiC1JIWXkxsubSByVUiIOcFXMZzRvMHhRoElLWZQaZZWESpd2BmdOsmItsqSVt3sxP7wfHg4MPnDs4ThecF54HvH5/wO/NefL5xUvxq37Nu85DGe7jbziG96KAqFiHrj2FISjDCP6Er2Ep4v/kRSjl34hMHEDzrnqoDGcwvYJDrYLKcAg1iAl2C0oZzBuqCJXpQAWH6oTKtBkxgV4BmR/nDdUBlekepldoqP1QmS4hJtBKyOzNG2ovZC6iAc9gAToxAjm8uUJDnYXMETyN5/AG9EAlTEFMkM2Q6cgb6jRk9iLMVyC41goNdRMy7QjzMwju5YgJ8lXIFPOGGoRMB8LsgODmIVJejU34AvZjNz6EOgTehGLK6xCYjqJpQIyjCcWUliRSPQT3VoQ5DiFrkS3EFuxBP7rxbkzGJKxAMeVViMQZyNQjMiWRZkFwRYT5IWRuooDAK3EUjyCHf2EjZH6NwAbI/AFRwlrIjGJaclFymIVImYxByJxGJJrwE6iEAXwSMl9HJP4OpdxE5AnVCjnUI1I+ADl8A4G34J9QhjHIHEegAWOQeR5hGjEMmS2I5P9fGXO4Bjshh20IrMMolGEMMp9D4GnInM0bqh0yD9GHffgmfgOVsBTzcQcqU3fGr3Y7IqWAH0HmByggkkUlM4Q+HMQR/BlyuItnsNoD5LQWgWWQ2Z83VC9UpoMI/BQyd9GNZViCLtyGHNYjEhsgcx6R0gWZf6AhNSROQ2X6GOowCJkb6EILluLzeAA5LERgE2Q684Y6CZXhRdTibZC5g9cjTBFyaEYkZmAESnmE2Qgswihk1iAA2CXn0ItAJ2Quox5htkDmAV6GwB7IvCNvqOtQDgP4KAoI9ENmK6KEv8Aj1CJSjkHmBUzFbyHzZYs0C8rpl3gXIvFzyLwdAfdUxoP5FGQaEciWzGXB/Qp9iS/hM/gImlBApFyEzHxECUNQyjWEeR9kTuKLkPkdai1UKwR3Cn2J3diO9XgNImUS7kMp/0ENAu45yBxHJP4KpdxG5Am1BIKbgwAyDUKmEQH3RsicQJipuA2lPIDP/lEsQliodsgMowaBLM9COeZ0O2R2IlAHmV/kDfVhyNxB5HAFMl0IMxMXINODgDsEZfg4Ah6qN+8cNtMguCLCvBZDkFmHQAtkDucN1VNqYeXwbcjcRzdasBgvYACC24iAWwmN43solAh1spw5bAYgM4xPYDFa8GkMQ3DNCGyAzNa8ob4DmcOIHNqgx9CCgKvBDQhuCPWIEqGulzOHzQ6oTGOoRaAHMmvyhroCmW2IHOzxWdI9PIJMHaKEXgjuneNEqoPgViFymIGrUIYRyFxFJE5AZm7eUA8hU0TkNBPfgkq4gOWQ+SOihFr8HjJ7EOOEWgTBzUbkNA/noBK+jw9C5igicQk+Sgp5Q61AW0or4jEsxKfQjwP4LFpRQGAl2lIaESXsg8xFTM0INQmr0ZayHPEYlmMHDqAf27AAgSlYg7bEezATkWhCW8pcRC4cFYkLfz9k/ovnEU8cjko0B7cg04GoDNVQk3EOMt9FVI5qqMXwZXgZz1ZDVVVDVVVDPVH+B74slsxdvI/MAAAAAElFTkSuQmCC) no-repeat;position: relative;top: 33%;left: 38%;width: 106px;height: 29px;}.ppmodal .closeButton{width: 13px;height: 13px;padding: 8px;position: absolute;top: 4px;right: 4px;background: transparent url(https://www.paypalobjects.com/webstatic/checkout/hermes/mb_sprite.png) no-repeat center center;background-size: 13px;text-indent: -999em;-webkit-tap-highlight-color: rgba(0, 0, 0, 0.2);cursor: pointer;}</style></head><body><div><div class="ppmodal loading"><div class="pplogo"></div><div class="mask"></div></div></div></body></html>');
}catch(h){t="unable to write to minibrowser",console.log("unable to write to minibrowser")}return f=!0,f&&(q.intVal=setInterval(function(){return c&&c.closed?(clearInterval(q.intVal),f=!1,l()):void 0},500)),c}function p(){try{var a=window.event?window.event.currentTarget||window.event.target||window.event.srcElement:this;return window.event&&(event.ctrlKey||event.shiftKey||event.metaKey)?(console.log({status:"IC_RENDER_META_KEYPRESS"}),null):r.showMiniB===!1?null:(a&&a.form?a.form.target=r.name:a&&a.tagName&&"a"===a.tagName.toLowerCase()?a.target=r.name:a&&a.tagName&&("img"===a.tagName.toLowerCase()||"button"===a.tagName.toLowerCase())&&"a"===a.parentNode.tagName.toLowerCase()?a.parentNode.target=r.name:a&&a.tagName&&"button"===a.tagName.toLowerCase()&&"a"===a.parentNode.parentNode.tagName.toLowerCase()?a.parentNode.parentNode.target=r.name:this&&this.hasOwnProperty("target")&&"undefined"!=typeof this.target&&(this.target=r.name),document.querySelectorAll("#PPFrame").length||(m(),j(),i()),s=!0,o())}catch(b){console.log({status:"IC_RENDER_ERROR",error_msg:b},!0),t=b}}var q={},r={isSmartPhone:!1,isWebView:!1,currentAgent:getAgent(),showMiniB:!0,supportedAgents:{Chrome:27,IE:9,MSIE:9,Firefox:30,Safari:5.1,Opera:23},secureWindowmsg:e.instant("trans.step2.sipayMaskMessage"),oldIe:navigator.userAgent.match(/MSIE [87]\./i),loadingMsg:"Loading...",returnUrl:null,landingUrl:null,mbWidth:450,mbHeight:728,devMode:!1,name:"PPFrame"},s=!1,t=null,u=null;q.urlPrefix="",q.startFlow=this.startFlow=function(a){if(!q.win||(q.win.focus&&q.win.focus(),a)){a=a||r.landingUrl,a&&0===a.toLowerCase().indexOf("ec-")&&(a=q.urlPrefix+a),a&&(r.fromStartFlow=!0),a&&(a=a.replace(/\s+$/,""));try{u=n(a)}catch(b){console.log("EC Token is not passed in url passed by ajax response")}if(!h()||!r.showMiniB)return void(a?location.href=a:window.name=r.name);var c=r.win||p();c=c||window;try{c.name=c.name||r.name}catch(b){console.log("Mini browser window already opened and trying to change name")}a&&(c.location?c.location=a:c.src=a),r.win&&console.log({status:"IC_CLICK_OPEN_MB_SUCCESS"})}},this.initXO=function(){h()&&r.showMiniB&&(r.win=p())}}]);var witbookerControllers=angular.module("witbooker.controllers",[]);witbookerControllers.controller("StepOne",["$scope","$stateParams","Api","$rootScope","util","$location","$translate","constants","events","tmhDynamicLocale","$filter","$state","$http","$window","md5","$modal",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(b){function c(a,b,d){return a&&!a.hasOwnProperty("establishments")?"undefined"!=typeof a.contactInfo.latitude&&"undefined"!=typeof a.contactInfo.longitude&&(d.showMapButton||(d.showMapButton=!0),b[a.ticker]={establishment:a,lat:a.contactInfo.latitude,lon:a.contactInfo.longitude}):angular.forEach(a.establishments,function(a,e){c(a,b,d)}),b}var f=b.establishment;d.establishment=f,d.representation=b.representation,d.isChain=a.isChain=f&&f.hasOwnProperty("establishments")&&f.establishments.length>0,a.showMapButton=!1,a.util=e,a.pins=c(f,{},a),d.showExtraDesc=function(b,c,d){a.interceptClick(d),b.visualState=b.hasOwnProperty("visualState")?b.visualState:{showPanel:!0},b.visualState.showPanel=b.visualState.showPanel&&b.visualState.panelType!=c?b.visualState.showPanel:!b.visualState.showPanel,b.visualState.panelType=c},a.toggleAccordion=function(a){a.isOpen=a.hasOwnProperty("isOpen")?!a.isOpen:!0},r(d.establishment)}function r(a){var b=d.witbookerParams.representation.collapsedAccordionsConfiguration.split(":"),c=d.witbookerParams.representation.collapsedAccordionsConfiguration;d.witbookerParams.representation.showEstablishmentAccordionHeader="1"==b[0]||a.hasOwnProperty("establishments"),d.witbookerParams.representation.uncollapseAccommodation=!a.hasOwnProperty("establishments")&&("1:1"==c||"1:2"==c||"0:1"==c||"0:2"==c)||a.hasOwnProperty("establishments")&&("1:2"==c||"1:1"==c||"0:2"==c),d.witbookerParams.representation.uncollapseIventoryLIne="2"==b[1],e.setEstablishmentsProperties(a,{isOpen:d.witbookerParams.representation.uncollapseAccommodation}),e.setAccommodationsIsOpenProperty(a,d.witbookerParams.representation.maxLineNumbersBeforeCollapse,d.witbookerParams.representation.uncollapseIventoryLIne)}if(l&&l.params&&l.params.hasOwnProperty("error")&&("paypalError"===l.params.error||"sipayError"===l.params.error)){var s,t,u;u=l.params.error,s=["$scope","$modalInstance",function(a,b){a.closeInfo=function(){b.close()}}],a.message={body:"trans.error."+u},t=p.open({templateUrl:h.assetsDir+"partials/step_one/misc/genericModal.html",controller:s,scope:a})}a.currentState=l.current.name,a.$on(i.TRANSITION_TO_STEP2,function(a,b){var c=STEP2_URL.replace(new RegExp("TICKERPLACEHOLDER","g"),b.establishment).replace("LANGUAGEPLACEHOLDER",d.witbookerParams.representation.locale);"https:"!==window.location.protocol?(c=e.attachGetParams(c,{witif:0}),window.parent.location.href=c):b.establishment!==d.establishment.ticker?window.location.href=c:l.transitionTo("stepTwo",b)}),a.$on(i.REMOVED_FROM_CART,function(a,b){e.updateChildrenAndParentInventories(d.witbookerParams.regularParams.startDate,d.witbookerParams.regularParams.endDate,d.establishment,b,"+1",!0,function(a){a&&(angular.extend(d.affectedAccommodations,a),d.affectedAccommodations.counter=d.affectedAccommodations.counter?d.affectedAccommodations.counter+1:1)})}),a.viewButtoms=function(){a.radioModel="map","stepOne.list"==l.current.name&&(a.radioModel="list")},a.changeLanguage=function(a){g.use(a)},a.constants=h,a.interceptClick=function(a){a&&("A"==a.target.nodeName&&a.target.hasOwnProperty("href")&&window.open(a.target.href),a.preventDefault(),a.stopPropagation())},q(data),d.updateSessionAsync=function(a,b){m.post(UPDATE_SESSION_URL,a).success(function(){b()}).error(function(){})}}]),witbookerControllers.controller("StepTwo",["$scope","$stateParams","Api","$rootScope","util","$location","$translate","constants","events","tmhDynamicLocale","$filter","$state","$http","$window","md5","$modal","$interval","sipay",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){a.currentState=l.current.name;var s=l.params.establishment,t=new Date;a.year=t.getFullYear(),a.util=e,a.customerData={name:void 0,lastName:void 0,email:void 0,confirmationMail:void 0,address:void 0,country:void 0,phone:void 0,comments:void 0,receiveOffers:void 0,passport:void 0},a.paymentData={creditCardData:{ccholder:void 0,cckind:void 0,ccnumber:void 0,ccsecuritycode:void 0,ccvalidtomonth:void 0,ccvalidtoyear:void 0},ccvalidtomonth:void 0,acceptconditions:!1,tpv1:void 0,paymentType:void 0},a.activateWithDummyData=function(b){var c=!1;return"hoteldemo.com.v6"==s&&(35===b.keyCode&&(b.preventDefault(),b.shiftKey&&(c=a.fullWithDummieData(!0))),36===b.keyCode&&(b.preventDefault(),b.shiftKey&&(c=a.fullWithDummieData(!1)))),c},a.$on(i.REMOVED_FROM_CART,function(b,c){e.updateChildrenAndParentInventories(d.witbookerParams.regularParams.startDate,d.witbookerParams.regularParams.endDate,d.establishment,c,"+1",!0,function(a){a&&(angular.extend(d.affectedAccommodations,a),d.affectedAccommodations.counter=d.affectedAccommodations.counter?d.affectedAccommodations.counter+1:1)}),d.cart.reservations&&d.cart.reservations.length<=0&&a.goToStepOne()}),a.$on(i.SUBMIT_PAYMENT_DATA_FORM,function(b,c){a.form.$invalid||(c.paymentType==h.payment.type.paypal_ec?paypal.checkout.initXO():c.paymentType==h.payment.type.tctoken?r.initXO():e.addLoading(".mainStepContainer"),a.paymentData.paymentType=c.paymentType,m.post(STEP2_PROCESS_RESERVATION_URL,{customerData:a.customerData,paymentData:a.paymentData,establishment:{ticker:d.establishment.ticker}}).success(function(a){if(a.id){d.cart={reservations:[],processedReservations:{}};var b;b=c.paymentType==h.payment.type.pointOfSale?e.generateStep3URL(STEP3_TPV_URL,d.establishment.ticker,d.witbookerParams.representation.locale,a.id):e.generateStep3URL(STEP3_CONFIRMATION_URL,d.establishment.ticker,d.witbookerParams.representation.locale,a.id),c.paymentType!=h.payment.type.paypal_ec&&c.paymentType!=h.payment.type.tctoken&&(b=e.attachGetParams(b,e.createLegacyParamsObject(d.witbookerParams.representation)),n.location.href=b)}else{if(c.paymentType==h.payment.type.paypal_ec){var f=STEP2_URL.replace(new RegExp("TICKERPLACEHOLDER","g"),d.establishment.ticker).replace("LANGUAGEPLACEHOLDER",d.witbookerParams.representation.locale);m.post(STEP2_PAYPAL_EXPRESS_CHECKOUT,{ticker:d.establishment.ticker,cancelUrl:f}).success(function(a){function b(){c.closed&&(e.removeLoading(".mainStepContainer"),clearInterval(d))}paypal.checkout.startFlow(a.paypalRedirectUrl);var c=paypal.checkout.win,d=setInterval(b,500)}).error(function(a){e.removeLoading(".mainStepContainer"),alert("Unexpected Error")})}if(c.paymentType==h.payment.type.tctoken){var g=STEP2_SIPAY.replace(new RegExp("TICKERPLACEHOLDER","g"),d.establishment.ticker).replace("LANGUAGEPLACEHOLDER",d.witbookerParams.representation.locale);r.startFlow(g)}}}).error(function(){e.removeLoading(".mainStepContainer")}))}),d.intervalCount=0,m.get(SHOPPING_CART_DATA_URL,{params:{hotelTicker:s,includeServices:!0}}).success(function(b){b&&"[object Array]"===Object.prototype.toString.call(b.reservations)&&b.reservations.length>0?(d.reservationData=b.reservations,d.services=b.services,d.$broadcast(i.RESERVATION_DATA_UPDATE,b.reservations)):a.goToStepOne()}).error(function(){}),a.fullWithDummieData=function(b){return a.customerData={name:"Pepe",lastName:"Trueno",email:"m.carreno@witbooking.com",confirmationMail:"m.carreno@witbooking.com",address:"Aribau 240",country:{id:"AD",name:"Afganiston"},phone:"666777888",comments:"Test de reserva de witbooking",receiveOffers:"",passport:"77777777A"},a.paymentData={creditCardData:{ccholder:"Pepe Trueno",cckind:{id:"Visa",name:"Visa"},ccnumber:"4111111111111111",ccsecuritycode:"666",ccvalidtomonth:"12",ccvalidtoyear:"21"},acceptconditions:!0,tpv1:"",paymentType:null},b},fullWithDummieData=a.fullWithDummieData,a.goToStepOne=function(){l.transitionTo("stepOne.list",{allreservationsinvalid:!1})},d.$on(i.GO_TO_STEP1,function(a,b){l.transitionTo("stepOne.list",{allreservationsinvalid:!1})})}]);var fullWithDummieData;angular.module("witbooker.filters",[]).filter("interpolate",["version",function(a){return function(b){return String(b).replace(/\%VERSION\%/gm,a)}}]).filter("orderObjectBy",function(){return function(a,b){if(!angular.isObject(a))return a;var c=[],d=null;for(d in a)a.hasOwnProperty(d)&&c.push(a[d]);return c.sort(function(a,c){return a=parseInt(a[b],10),c=parseInt(c[b],10),a-c}),c}}).filter("currencyConverter",["currencySettings","$state","$rootScope",function(a,b,c){return function(d,e){var f=-1!=b.current.name.indexOf("stepOne")?c.witbookerParams.representation.step1WithoutTaxes:1,g=1;if(e){var h=e.additionalProperties.defaultCurrency,g=1/a.rates[h]*a.rates[a.currentCurrency];isNaN(g)&&(g=1)}else g=a.conversionRate;return d*g/f}}]).filter("integerDigits",["util",function(a){return function(b){return a.getIntegerDigits(b)}}]).filter("fractionalDigits",["util",function(a){return function(b){return a.getFractionalDigits(b)}}]),angular.module("witbooker.directives",[]).directive("customMarkup",["$rootScope",function(a){return{restrict:"AEC",scope:{markups:"=",position:"=",phase:"="},link:function(b,c,d){if(!a.customMarkupAdded[b.phase]||!a.customMarkupAdded[b.phase][b.position]){var e="";angular.forEach(b.markups,function(a,c){a.position===b.position&&(e+=a.code)}),c.html(e),a.customMarkupAdded[b.phase]||(a.customMarkupAdded[b.phase]={}),a.customMarkupAdded[b.phase][b.position]||(a.customMarkupAdded[b.phase][b.position]=!1)}}}}]).directive("witbookingAppVersion",["version",function(a){return function(b,c,d){c.text(a)}}]).directive("witbookingFrontEndMessages",["constants","util","$sce",function(a,b,c){var d={};return d[a.messages.type.success]="success",d[a.messages.type.notice]="warning",d[a.messages.type.info]="info",d[a.messages.type.error]="danger",{restrict:"AEC",scope:{messages:"=",establishment:"="},link:function(a,c){a.messageAlertClassDict=d,a.closeAlert=function(b){a.messages.splice(b,1)},a.$watch("establishment.allFiltered",function(){angular.forEach(a.messages,function(c,d){if(c.show=!0,c.style="",("BELOW_PERSONAL_INFO_STEP_2"==c.position||"TOP_METHOD_PAYMENT_STEP_2"==c.position)&&(c.style="messagesTwo"),c.unavailable&&!a.establishment.allFiltered&&(c.show=!1),c.hidden&&(c.show=!1),c.start&&c.end){var e=b.parseDate(c.start),f=b.parseDate(c.end),g=new Date;(e>g||g>f)&&(c.show=!1)}})})},templateUrl:a.assetsDir+"partials/step_one/messages.html"}}]).directive("witbookingModalMessages",["constants","util","$modal","$sce",function(a,b,c,d){return{restrict:"AEC",scope:{messages:"=",establishment:"="},link:function(e,f){var g=!1,h=function(){angular.forEach(e.messages,function(a,c){if(a.show=!0,a.style="",("BELOW_PERSONAL_INFO_STEP_2"===a.position||"TOP_METHOD_PAYMENT_STEP_2"===a.position)&&(a.style="messagesTwo"),a.unavailable&&!e.establishment.allFiltered&&(a.show=!1),a.hidden&&(a.show=!1),a.start&&a.end){var d=b.parseDate(a.start),f=b.parseDate(a.end),h=new Date;(d>h||h>f)&&(a.show=!1)}g=g||a.show}),g&&i()},i=function(){var b,f;b=["$scope","$modalInstance",function(a,b){a.ok=function(){b.close()}}],angular.forEach(e.messages,function(a,b){a.descriptionHtml=a.descriptionHtml?a.descriptionHtml:d.trustAsHtml(a.description)}),f=c.open({templateUrl:a.assetsDir+"partials/step_one/misc/modalMessage.html",controller:b,scope:e}),f.result.then(function(){e.messages=[]},function(){e.messages=[]})};e.$watch("establishment.allFiltered",function(a,b){a!==b&&h()}),e.$watch("messages.length",function(){e.messages&&e.messages.length>0&&(angular.forEach(e.messages,function(a,b){a.descriptionHtml=a.descriptionHtml?a.descriptionHtml:d.trustAsHtml(a.description),a.show=!0}),h())})},template:""}}]).directive("witbookingPromotions",["constants","util","$rootScope",function(a,b,c){return{restrict:"AEC",scope:{discounts:"=",toggleAccordion:"="},link:function(a,d){a.discountL=[],a.util=b,c.$watch("witbookerParams.representation.activePromoCodes",function(){a.givenDiscounts=c.witbookerParams.representation.activePromoCodes})},templateUrl:a.assetsDir+"partials/step_one/promotions_accordion.html"}}]).directive("witbookingEstablishment",["constants","$rootScope",function(a,b){return{restrict:"AEC",scope:{establishment:"=",representation:"=",witbookerParams:"=",util:"=",showExtraDesc:"="},link:function(b,c){b.constants=a,b.establishment.media&&b.establishment.media.sort(function(a,b){return a.order-b.order}),b.errorType=a.filters.closed,angular.forEach(b.establishment.inventoryLinesGrouped,function(c,d){angular.forEach(c.inventoryLine,function(c,d){for(var e in c.errorMessage){var f=c.errorMessage[e];if(f.failedFilter==a.filters.closed||f.failedFilter==a.filters.availability||f.failedFilter==a.filters.reservationClosed){b.errorType=a.filters.closed;break}b.errorType=a.filters.restricted}})})},templateUrl:a.assetsDir+"partials/step_one/establishment/hotel.html"}}]).directive("popoverTemplatePopup",["$http","$templateCache","$compile","$timeout","constants",function(a,b,c,d,e){return{restrict:"AEC",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&",compileScope:"&"},templateUrl:e.assetsDir+"partials/step_one/misc/popover.html",link:function(f,g,h){f.$watch("content",function(h){h&&(h==e.assetsDir+"partials/step_one/misc/reservation_button_popover.html"&&(f.background=e.popover.reservationButton.background),h==e.assetsDir+"partials/step_one/misc/discount_popover.html"&&(f.background=e.popover.discount.background),a.get(h,{cache:b}).then(function(a){var b=angular.element(g[0].querySelector(".popover-content"));b.children().remove(),b.append(c(a.data.trim())(f.$parent)),d(function(){f.$parent.$digest()})}))})}}}]).directive("popoverTemplate",["$tooltip",function(a){return a("popoverTemplate","popover","mouseenter")}]).directive("witbookingAccommodation",["constants","util","$rootScope",function(a,b,c){return{restrict:"AEC",scope:{accommodation:"=",representation:"=",witbookerParams:"=",establishment:"=",showExtraDesc:"="},link:function(d,e){d.util=b,d.constants=a;var f=c.$watch("affectedAccommodations",function(a,b,c){null!=a&&a.hasOwnProperty(d.accommodation.accommodation.ticker)&&(a[d.accommodation.accommodation.ticker]?(d.accommodation.accommodation.hiddenRate=d.accommodation.accommodation.cheapestRate,d.accommodation.accommodation.cheapestRate=null):d.accommodation.accommodation.cheapestRate=d.accommodation.accommodation.cheapestRate?d.accommodation.accommodation.cheapestRate:d.accommodation.accommodation.hiddenRate)},!0);d.$on("$destroy",function(){f()}),d.errorType=a.filters.closed,angular.forEach(d.accommodation.inventoryLine,function(b,c){for(var e in b.errorMessage){var f=b.errorMessage[e];if(f.failedFilter==a.filters.closed||f.failedFilter==a.filters.availability||f.failedFilter==a.filters.reservationClosed){d.errorType=a.filters.closed;break}d.errorType=a.filters.restricted}})},templateUrl:a.assetsDir+"partials/step_one/establishment/accommodation.html"}}]).directive("witbookingInventoryLine",["constants","util","$compile","$templateCache","$timeout","$rootScope","$window","$http","events","$modal",function(a,b,c,d,e,f,g,h,i,j){return{restrict:"AEC",scope:{representation:"=",witbookerParams:"=",establishment:"=",accommodation:"=",line:"=",showExtraDesc:"="},link:function(c,d,g){c.constants=a,c.inventoryLine=c.line,c.$watch("inventoryLine.availability",function(b,c,d){d.showRoomsLeftMessage=d.inventoryLine.availability<=f.witbookerParams.representation.numberOfRoomsLeftLimit;var e=function(a,b){for(var c=[],d=a;b>=d;d++)c.push({id:d,availability:d});return c};if(d.unitSelectorOptions=e(1,Math.min(d.inventoryLine.availability,f.witbookerParams.representation.maxBookableRooms)),d.inventoryLine.reservation={units:d.unitSelectorOptions[0],totalAmount:0,unitAmount:0},d.inventoryLine.errorMessage){d.inventoryLine.displayErrorMessages=[];var g=!1;angular.forEach(d.inventoryLine.errorMessage,function(b,c){if(!g)if(b.failedFilter==a.filters.closed||b.failedFilter==a.filters.availability||b.failedFilter==a.filters.reservationClosed)d.inventoryLine.displayErrorMessages=[{errorType:a.filters.closed,value:null}],g=!0,d.isLocked=!0;else if(b.failedFilter==a.filters.checkInCheckOut){if(!b.value.checkInDays[f.witbookerParams.regularParams.startDate.getDay()]){for(var e=[],h=0;h<b.value.checkInDays.length;h++)b.value.checkInDays[h]&&e.push(new Date(0,0,h));d.inventoryLine.displayErrorMessages.push({errorType:a.filters.checkIn,value:e})}if(!b.value.checkOutDays[f.witbookerParams.regularParams.endDate.getDay()]){for(var e=[],h=0;h<b.value.checkOutDays.length;h++)b.value.checkOutDays[h]&&e.push(new Date(0,0,h));d.inventoryLine.displayErrorMessages.push({errorType:a.filters.checkOut,value:e})}}else d.inventoryLine.displayErrorMessages.push({errorType:b.failedFilter,otherError:!0,value:b.value})})}}),c.util=b,c.constants=a,c.redirectToStep2=function(){$("#disableClick").addClass("loading");var d={id:c.inventoryLine.id,adults:f.witbookerParams.regularParams.occupants.adults,children:f.witbookerParams.regularParams.occupants.children,babies:f.witbookerParams.regularParams.occupants.babies,datein:b.formatDate(f.witbookerParams.regularParams.startDate,a.dateFormat),dateout:b.formatDate(f.witbookerParams.regularParams.endDate,a.dateFormat),selectnumrooms:c.inventoryLine.reservation.units.availability,prom:"undefined"!=typeof f.witbookerParams.regularParams.discountPromoCodes&&f.witbookerParams.representation.activePromoCodes.length>0?f.witbookerParams.representation.activePromoCodes.join(","):"",setconversion:f.witbookerParams.representation.currency,channel:f.witbookerParams.representation.channel?f.witbookerParams.representation.channel:"",tracking_id:f.witbookerParams.representation.tracking_id?f.witbookerParams.representation.tracking_id:""};f.witbookerParams.representation.view&&(d.view=f.witbookerParams.representation.view),f.witbookerParams.representation.iframeMode&&(d.witif=f.witbookerParams.representation.iframeMode?1:0),f.witbookerParams.representation.iframeResizeDomain&&(d.d=f.witbookerParams.representation.iframeResizeDomain),f.witbookerParams.representation.witaffiliate&&(d.witaffiliate=f.witbookerParams.representation.witaffiliate),f.witbookerParams.representation.affiliate&&(d.affiliate=f.witbookerParams.representation.affiliate),"undefined"!=typeof f.witbookerParams.representation.iframeMode&&f.witbookerParams.representation.iframeMode&&(d.witif=1);var g=b.generateLegacyBookingUrl(c.establishment,f.witbookerParams.representation.locale,d),k={inventoryLine:c.inventoryLine,accommodation:c.accommodation.accommodation,quantity:c.inventoryLine.reservation.units.availability,startDate:f.witbookerParams.regularParams.startDate,endDate:f.witbookerParams.regularParams.endDate,establishment:{ticker:c.establishment.ticker}},l=c.inventoryLine.condition.paymentTypes,m=!0;return angular.forEach(f.cart.reservations,function(d,e){if(l=b.intersectSimpleArrays(l,d.inventoryLine.condition.paymentTypes,function(a){return a.ticker}),!l||l.length<=0){m=!1,c.message={body:"trans.step1.incompatiblePaymentTypes"};var f=["$scope","$modalInstance",function(a,b){a.closeInfo=function(){b.close()}}];j.open({templateUrl:a.assetsDir+"partials/step_one/misc/genericModal.html",controller:f,scope:c})}}),m?void h.post(SHOPPING_CART_URL,{inventoryLine:c.inventoryLine.ticker,inventoryID:c.inventoryLine.id,quantity:c.inventoryLine.reservation.units.availability,startDate:b.formatDate(f.witbookerParams.regularParams.startDate,a.dateFormat),endDate:b.formatDate(f.witbookerParams.regularParams.endDate,a.dateFormat),establishment:{ticker:c.establishment.ticker},parentEstablishment:{ticker:f.establishment.ticker},next:g}).success(function(a){$("#disableClick").removeClass("loading"),k.id=a.id,f.$broadcast(i.ADDED_TO_CART,k,g),e(function(){var a=$(".reservationsList:last");a.hide(),"parentIFrame"in window?(window.parentIFrame.scrollTo(0,0),a.slideDown()):$("body").animate({scrollTop:0},700,function(){a.slideDown()})})}).error(function(){}):void $("#disableClick").removeClass("loading")}},templateUrl:a.assetsDir+"partials/step_one/establishment/inventoryLine.html"}}]).directive("witbookingBookingForm",["constants","util","Api","$rootScope","events","$filter","$parse","$state","$modal",function(a,b,c,d,e,f,g,h,i){return{restrict:"AEC",scope:{representation:"=",witbookerParams:"="},link:function(f,h,j){f.extraFilters={};var k=function(a,b){for(var c=[],d=a;b>=d;d++)c.push({id:d,availability:d});return c};d.externalData;var l=d.$watch("externalData",function(){if("undefined"!=typeof d.externalData&&"getAvailability"==d.externalData.actionType&&f.getAvailabilityExternalCall(d.externalData),"undefined"!=typeof d.externalData&&"getAvailabilityChart"==d.externalData.actionType){f.message={body:"trans.step2.modalCalendar"};var b=["$scope","$modalInstance",function(a,b){a.closeInfo=function(){return b.close(),!1},a.follow=function(){b.close(),f.getAvailabilityExternalCallChart(d.externalData)}}];i.open({templateUrl:a.assetsDir+"partials/step_two/misc/modalOkClose.html",controller:b,scope:f})}}),m=d.$on("$stateChangeSuccess",function(a,b,c,d,e){"stepTwo"==d.name&&"true"==c.allreservationsinvalid&&(f.getAvailability(),m())});f.$on("$destroy",function(){l()}),f.hideAgeIndicator=!1,d.witbookerParams.regularParams.occupants.restriction==a.occupant.restriction.TAKE_ALL_PEOPLE&&(f.hideAgeIndicator=!0),f.seniorSelectorOptions=k(0,witbookerParams.representation.maxSeniors),f.adultSelectorOptions=k(1,witbookerParams.representation.maxAdults),f.childSelectorOptions=k(0,witbookerParams.representation.maxChildren),f.teenagerSelectorOptions=k(0,witbookerParams.representation.maxTeenagers),f.babySelectorOptions=k(0,witbookerParams.representation.maxBabies);var n=function(a,b){for(var c=0;c<a.length;c++)if(a[c].availability==d.witbookerParams.regularParams.occupants[b])return a[c];return a[0]};f.seniors=n(f.seniorSelectorOptions,"seniors"),f.adults=n(f.adultSelectorOptions,"adults"),f.teenagers=n(f.teenagerSelectorOptions,"teenagers"),f.children=n(f.childSelectorOptions,"children"),f.babies=n(f.babySelectorOptions,"babies"),(-1==d.witbookerParams.regularParams.occupants.adults||d.witbookerParams.representation.allowsDisablingOccupationFilter)&&(f.adultSelectorOptions.push({id:"*",availability:"*"}),-1==d.witbookerParams.regularParams.occupants.adults&&(f.adults=f.adultSelectorOptions[f.adultSelectorOptions.length-1])),f.hideAdultSelector=!1,f.hideChildSelector=!1,f.hideBabySelector=!1,f.counterEntryDate=0,f.counterExitDate=0,d.witbookerParams.representation.maxAdults<=0&&(f.hideAdultSelector=!0,f.adults=f.adultSelectorOptions[0]),(d.witbookerParams.representation.maxChildren<=0||d.witbookerParams.regularParams.occupants.restriction==a.occupant.restriction.TAKE_ALL_PEOPLE)&&(f.hideChildSelector=!0,f.children=f.childSelectorOptions[0]),(d.witbookerParams.representation.maxBabies<=0||d.witbookerParams.regularParams.occupants.restriction!=a.occupant.restriction.TAKE_ADULT_CHILD_BABY&&d.witbookerParams.regularParams.occupants.restriction!=a.occupant.restriction.TAKE_ADULT_TEENAGER_CHILD_BABY&&d.witbookerParams.regularParams.occupants.restriction!=a.occupant.restriction.TAKE_SENIOR_ADULT_TEENAGER_CHILD_BABY)&&(f.hideBabySelector=!0,f.babies=f.babySelectorOptions[0]),(d.witbookerParams.representation.maxTeenagers<=0||d.witbookerParams.regularParams.occupants.restriction!=a.occupant.restriction.TAKE_ADULT_TEENAGER_CHILD&&d.witbookerParams.regularParams.occupants.restriction!=a.occupant.restriction.TAKE_ADULT_TEENAGER_CHILD_BABY&&d.witbookerParams.regularParams.occupants.restriction!=a.occupant.restriction.TAKE_SENIOR_ADULT_TEENAGER_CHILD_BABY)&&(f.hideTeenagerSelector=!0,f.teenagers=f.teenagerSelectorOptions[0]),(d.witbookerParams.representation.maxSeniors<=0||d.witbookerParams.regularParams.occupants.restriction!=a.occupant.restriction.TAKE_SENIOR_ADULT_TEENAGER_CHILD_BABY)&&(f.hideSeniorSelector=!0,f.seniors=f.seniorSelectorOptions[0]),f.adultMinAge=f.hideTeenagerSelector?witbookerParams.representation.childrenMaxAge+1:witbookerParams.representation.teenagerMaxAge+1,d.witbookerParams.regularParams.occupants.restriction==a.occupant.restriction.NONE&&(f.hideAdultSelector=!0,f.hideChildSelector=!0,f.hideBabySelector=!0,f.hideTeenagerSelector=!0,f.hideSeniorSelector=!0),d.witbookerParams.representation.filterGuestsByAge?(f.hideBabySelector=!0,f.hideTeenagerSelector=!0,f.hideSeniorSelector=!0):f.witbookerParams.regularParams.occupants.guestAges=[];var o=function(a,b){var c=[];c.push({id:a,text:"<"+a}),a++;for(var d=a;b>=d;d++)c.push({id:d,text:d});return c};if(d.witbookerParams.representation.filterGuestsByAge){var p=d.witbookerParams.representation.teenagerMaxAge,q=d.witbookerParams.representation.babyMinAge;f.guestAgesSelectorOptions=o(q,p),f.childrenFilterMinAge=q,f.childrenFilterMaxAge=p}d.witbookerParams.regularParams,d.witbookerParams.representation,d.witbookerParams.representation.filterGuestsByAge&&d.witbookerParams.regularParams.occupants.guestAges.length>0&&(f.children=f.childSelectorOptions[d.witbookerParams.regularParams.occupants.guestAges.length]),f.entryDate=b.formatDate(d.witbookerParams.regularParams.startDate,a.dateFormat),f.exitDate=b.formatDate(d.witbookerParams.regularParams.endDate,a.dateFormat);var r=g(h.find("#datepickerEntryDate").attr("ng-model")),s=g(h.find("#datepickerExitDate").attr("ng-model"));$(function(){$("#datepickerEntryDate").datepicker({regional:d.witbookerParams.representation.locale,dateFormat:"dd-mm-yy",minDate:0,onSelect:function(a,b){f.$apply(function(b){r.assign(b,a)})}}),$("#datepickerExitDate").datepicker({regional:d.witbookerParams.representation.locale,dateFormat:"dd-mm-yy",minDate:1,maxDate:d.witbookerParams.representation.maxBookableNights,onSelect:function(a,b){f.$apply(function(b){s.assign(b,a)})}}),"en"==d.witbookerParams.representation.locale?($("#datepickerEntryDate").datepicker("option",$.datepicker.regional[""]),$("#datepickerExitDate").datepicker("option",$.datepicker.regional[""])):($("#datepickerEntryDate").datepicker("option",$.datepicker.regional[d.witbookerParams.representation.locale]),$("#datepickerExitDate").datepicker("option",$.datepicker.regional[d.witbookerParams.representation.locale])),$("#datepickerEntryDate").datepicker("option","dateFormat","dd-mm-yy"),$("#datepickerExitDate").datepicker("option","dateFormat","dd-mm-yy")}),f.$watch("entryDate",function(){var c=b.parseDate(f.exitDate),e=b.parseDate(f.entryDate);e>=c&&(c=new Date(e.getTime()),c.setDate(c.getDate()+1),s.assign(f,b.formatDate(c,a.dateFormat)));var g=d.witbookerParams.representation.maxBookableNights,h=new Date(e.getTime());h.setDate(h.getDate()+1),$("#datepickerExitDate").datepicker("option","minDate",h);var i=new Date(e.getTime());i.setDate(i.getDate()+g),$("#datepickerExitDate").datepicker("option","maxDate",i),f.counterEntryDate>0&&$(".sendBookingForm").addClass("formChanged"),f.counterEntryDate++}),f.$watch("exitDate",function(){var c=b.parseDate(f.exitDate),d=b.parseDate(f.entryDate);d>=c&&(d=new Date(c.getTime()),d.setDate(d.getDate()-1),r.assign(f,b.formatDate(d,a.dateFormat))),f.counterExitDate>0&&($(".sendBookingForm").addClass("formChanged"),"undefined"!=typeof $(".sendBookingForm").data("disabledFormChanged")&&$(".sendBookingForm").data("disabledFormChanged")&&($(".sendBookingForm").removeClass("formChanged"),$(".sendBookingForm").data("disabledFormChanged",!1))),f.counterExitDate++}),f.formChanged=function(a){$(".sendBookingForm").addClass("formChanged")},f.formKidsChanged=function(){for(var a=0;a<f.children.availability;a++)"undefined"==typeof d.witbookerParams.regularParams.occupants.guestAges[a]&&(d.witbookerParams.regularParams.occupants.guestAges[a]=0);d.witbookerParams.regularParams.occupants.guestAges.splice(f.children.availability,Number.MAX_VALUE)},f.getAvailabilityExternalCall=function(a){$(".sendBookingForm").removeClass("formChanged");var f=$("#disableClick");f.addClass("loading"),d.witbookerParams.regularParams.startDate=b.parseDate(a.startDate),d.witbookerParams.regularParams.endDate=b.parseDate(a.endDate),d.witbookerParams.regularParams.occupants.adults=a.adults.availability?a.adults.availability:0,d.witbookerParams.regularParams.occupants.children=a.children.availability?a.children.availability:0,d.witbookerParams.regularParams.occupants.babies=a.babies.availability?a.babies.availability:0,d.witbookerParams.regularParams.occupants.teenagers=a.teenager.availability?a.teenagers.availability:0,d.witbookerParams.regularParams.occupants.seniors=a.senior.availability?a.seniors.availability:0,a.promoCode&&a.promoCode.length>0&&(d.witbookerParams.regularParams.inventoryPromoCodes=a.promoCode,d.witbookerParams.regularParams.discountPromoCodes=a.promoCode);var g=angular.copy(d.witbookerParams);g.regularParams.startDate=a.startDate,g.regularParams.endDate=a.endDate;var h=c.ARI.post(g,function(){d.$broadcast(e.UPDATE_AVAILABILITY,h),f.removeClass("loading")})},f.getAvailabilityExternalCallChart=function(i){$(".sendBookingForm").data("disabledFormChanged",!0);var j=$("#disableClick");j.addClass("loading");var k=(d.witbookerParams.regularParams.endDate-d.witbookerParams.regularParams.startDate)/864e5;d.witbookerParams.regularParams.startDate=b.parseDate(i.startDate),d.witbookerParams.regularParams.endDate=b.parseDate(i.startDate),d.witbookerParams.regularParams.endDate.setDate(b.parseDate(i.startDate).getDate()+k);var l=angular.copy(d.witbookerParams);l.regularParams.startDate=i.startDate,l.regularParams.endDate=b.formatDate(d.witbookerParams.regularParams.endDate,a.dateFormat);var m=g(h.find("#datepickerEntryDate").attr("ng-model")),n=g(h.find("#datepickerExitDate").attr("ng-model"));m.assign(f,l.regularParams.startDate),n.assign(f,l.regularParams.endDate);var o=c.ARI.post(l,function(){d.$broadcast(e.UPDATE_AVAILABILITY,o),j.removeClass("loading")})},f.util=b,f.getAvailability=function(){$(".sendBookingForm").removeClass("formChanged");var a=$("#disableClick");a.addClass("loading"),d.witbookerParams.regularParams.startDate=b.parseDate(this.entryDate),
d.witbookerParams.regularParams.endDate=b.parseDate(this.exitDate),d.witbookerParams.regularParams.occupants.adults=this.adults.availability,d.witbookerParams.regularParams.occupants.children=this.children.availability,d.witbookerParams.regularParams.occupants.babies=this.babies.availability,d.witbookerParams.regularParams.occupants.teenagers=this.teenagers.availability,d.witbookerParams.regularParams.occupants.seniors=this.seniors.availability;for(var f=0;f<d.witbookerParams.regularParams.occupants.guestAges.length;f++)d.witbookerParams.regularParams.occupants.guestAges[f]=parseInt(d.witbookerParams.regularParams.occupants.guestAges[f],10);this.promoCode&&this.promoCode.split(",").length>0&&(d.witbookerParams.regularParams.inventoryPromoCodes=b.removeDuplicatesFromSimpleArray(d.witbookerParams.representation.activePromoCodes.concat(this.promoCode.split(","))),d.witbookerParams.regularParams.discountPromoCodes=b.removeDuplicatesFromSimpleArray(d.witbookerParams.representation.activePromoCodes.concat(this.promoCode.split(",")))),d.witbookerParams.regularParams.newPromoCodes=this.promoCode?this.promoCode.split(","):[];var g=angular.copy(d.witbookerParams);g.regularParams.startDate=this.entryDate,g.regularParams.endDate=this.exitDate;var h=c.ARI.post(g,function(){d.$broadcast(e.UPDATE_AVAILABILITY,h),a.removeClass("loading")})},f.cleanFilters=function(){d.witbookerParams.regularParams.extra={},d.witbookerParams.representation.activeExtraFilters={},d.updateSessionAsync({regularParams:{extra:{il_like:[],il_equal:[]}},representation:{ticker:d.witbookerParams.representation.ticker}},function(){f.getAvailability()})},f.promotionCodeOpen=d.witbookerParams.representation.showPromoCodeInputField},templateUrl:a.assetsDir+"partials/step_one/booking_form.html"}}]).directive("witbookingInfoPanel",["$compile","$http","$templateCache","constants",function(a,b,c,d){var e=function(a){if(!a)return null;var e,f=d.assetsDir+"partials/step_one/misc/",g={};g[d.panel.type.carousel]="info_panel_carousel.html",g[d.panel.type.description]="info_panel_text.html";var h=f+g[a];return e=b.get(h,{cache:c})},f=function(b,c,f){b.constants=d,b.$watch("type",function(){if(b.type){var d=e(b.type);d.success(function(d){c.empty().append(a(d)(b))}),d.error(function(){console.log("error")})}})};return{restrict:"AEC",scope:{type:"=",establishment:"=",title:"="},link:f}}]).directive("witbookingCarousel",["$compile","$http","$templateCache","constants","util","$rootScope","events",function(a,b,c,d,e,f,g){return{transclude:!0,scope:{type:"=",establishment:"=",title:"="},controller:["$scope",function(a){var b=function(){a.constants=d,a.myInterval=5e8;var b=a.slides=[],c=!a.$parent.establishment.hasOwnProperty("inventoryLinesGrouped"),g=c?"accommodation":"hotel",h={width:"750",height:"500",png:!1};h=null,angular.forEach(a.$parent.establishment.media,function(c,d){b.push({image:e.generateImgUrl(a.$parent.$parent.$parent.establishment,a.$parent.establishment,g,c.path,h),title:c.name,text:c.description,close:f.showExtraDesc,elementType:a.$parent.establishment})})};b();var c=a.$on(g.CHANGE_LANGUAGE_DONE,function(){b()});a.$on("$destroy",function(){c()})}],templateUrl:d.assetsDir+"partials/step_one/misc/info_panel_carousel.html"}}]).directive("witbookingInfoPanelStatic",["$compile","$http","$templateCache","constants","$rootScope",function(a,b,c,d,e){return{require:"^?witCarousel",restrict:"AEC",transclude:!0,scope:{type:"=",establishment:"=",rootEstablishment:"=",title:"="},link:function(a,b,c){a.constants=d,a.close=e.showExtraDesc,a.elementType=a.establishment,a.isAdditionalInfoVisible=!1,a.toggleAdditionalInfo=function(){a.isAdditionalInfoVisible=!a.isAdditionalInfoVisible}},templateUrl:d.assetsDir+"partials/step_one/misc/info_panel.html"}}]).directive("witbookingMap",["$compile","$http","$templateCache","$window","$timeout","constants","$rootScope","$translate",function(a,b,c,d,e,f,g,h){return{restrict:"AEC",transclude:!0,scope:{type:"=",establishment:"=",title:"=",pins:"=",mapid:"="},link:function(a,b){var c=function(){var b={},c=new google.maps.LatLngBounds,d=function(){var d,e=new google.maps.Map(document.getElementById("map-canvas-"+a.mapid),b),f=new google.maps.InfoWindow,i=a.pins?a.pins:[{establishment:a.establishment,lat:a.establishment.contactInfo.latitude,lon:a.establishment.contactInfo.longitude}];if(angular.forEach(i,function(a,b){var i=new google.maps.LatLng(a.lat,a.lon);c.extend(i),d=new google.maps.Marker({position:i,map:e,title:a.establishment.name}),google.maps.event.addListener(d,"click",function(b){return function(){var c=document.createElement("div"),d=a.establishment.ticker?a.establishment.ticker:"",i=a.establishment.contactInfo.address?a.establishment.contactInfo.address:"",j=a.establishment.contactInfo.city?a.establishment.contactInfo.city:"",k=a.establishment.contactInfo.country?a.establishment.contactInfo.country:"",l=a.establishment.cheapestRate?h.instant("trans.step1.map.from")+" "+(a.establishment.cheapestRate?a.establishment.cheapestRate.toString().match(/^\d+(?:\.\d{0,2})?/):"")+" "+g.witbookerParams.representation.currency:"";f.setContent('<div class="info_content" style="min-width: 200px"><h3>'+a.establishment.name+"</h3><p>"+i+"</p><p>"+j+","+k+"</p><p><b>"+l+"</b></p><button onclick=\"$('#listStepOne').click();$('#"+d.trim()+'\').animate({ scrollTop: 0 }, 600);" title="'+h.instant("trans.step1.map.reservationButton")+'" class="btn btn-success"><span>'+h.instant("trans.step1.map.reservationButton")+'</span>&nbsp;<i class="sprite bookCart" alt="cart"></i></button></div>'),google.maps.event.addDomListener(c,"click",function(a){return function(){}}(b)),f.open(e,b)}}(d))}),Object.keys(i).length>1)e.fitBounds(c);else{var j=new google.maps.LatLng(i[Object.keys(i)[0]].lat,i[Object.keys(i)[0]].lon);e.setCenter(j),e.setZoom(15)}};e(function(){e(function(){d()},0)},0)};d.initialize=c,a.loadScript=function(){var a=document.createElement("script");a.type="text/javascript",a.src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&callback=initialize",document.body.appendChild(a)},"undefined"!=typeof google&&"undefined"!=typeof google.maps?c():a.loadScript()},templateUrl:f.assetsDir+"partials/step_one/establishment/map.html"}}]).directive("witbookingChart",["Api","util","constants","$timeout","$rootScope","$filter","$translate","events",function(a,b,c,d,e,f,g,h){return{restrict:"AEC",scope:{establishment:"=",inventoryLine:"=",chartid:"="},link:function(i,j){i.close=e.showExtraDesc,i.elementType=i.establishment,i.constants=c,i.isLoading=!0;var k=function(){var c=a.Chart.get({ticker:i.establishment.ticker,inventory:i.inventoryLine.ticker,numberOfMonths:12,currency:e.witbookerParams.representation.currency},function(){i.isLoading=!1;var a,h=[],j={},k={};i.priceTranslated=g.instant("trans.step1.price"),angular.forEach(c.rate,function(c,d){var e=b.parseDate(c.startDate),h=b.parseDate(c.endDate),l=[];do{"undefined"==typeof j[e.getMonth()+"-"+e.getFullYear()]&&(j[e.getMonth()+"-"+e.getFullYear()]=[["Da","Precio"]]),"undefined"==typeof k[e.getMonth()+"-"+e.getFullYear()]&&(k[e.getMonth()+"-"+e.getFullYear()]={minValue:0,maxValue:-1},a=k[e.getMonth()+"-"+e.getFullYear()]),a.maxValue=a.maxValue<c.value?c.value:a.maxValue;var m=f("date")(e,"dd MMMM yyyy").toUpperCase()+"\n"+(0==c.value?g.instant("trans.closed").toUpperCase():i.priceTranslated+" : "+f("number")(c.value,2)+"");if(l=[""+e.getDate(),0==c.value?a.maxValue:c.value,m,0==c.value?"silver":"",f("date")(e,"dd-MM-yyyy")],j[e.getMonth()+"-"+e.getFullYear()].push(l),e.getTime()==h.getTime())break;e.setDate(e.getDate()+1)}while(e.getTime()<=h.getTime())});var l=e.witbookerParams.regularParams,m=(e.witbookerParams.representation,0);angular.forEach(j,function(a,b){var c=b.split("-")[0],d=b.split("-")[1];l.startDate.getMonth()==c-1&&(m=h.length-1);var g=new Date(0,parseInt(c)+1,0);h.push({date:{month:"",year:d,monthname:f("date")(g,"MMMM")},values:a,coin:e.witbookerParams.representation.currencySymbol,minValue:k[b].minValue,maxValue:k[b].maxValue})}),c={current:m,data:h},d(function(){d(function(){c.wrapper=document.getElementById("chart-canvas-"+i.chartid),c.wrapper.innerHTML="",witPlotter(c)},0)},0)})};k();var l=i.$on(h.CHANGE_LANGUAGE_DONE,function(){k()});i.$on("$destroy",function(){l()})},templateUrl:c.assetsDir+"partials/step_one/misc/chart.html"}}]).directive("witbookingCart",["util","constants","$timeout","$rootScope","events","$http","$modal","$state",function(a,b,c,d,e,f,g,h){return{restrict:"AEC",scope:{type:"=",establishment:"=",title:"=",size:"="},link:function(c,h){c.constants=b,c.util=a,c.cart=d.cart,c.services={},c.witbookerParams=d.witbookerParams,c.goToStepOne=function(){d.$broadcast(e.GO_TO_STEP1,{establishment:d.establishment.ticker})},c.goToStepTwo=function(){d.$broadcast(e.TRANSITION_TO_STEP2,{establishment:d.establishment.ticker})},c.extrasFolded=d.witbookerParams.representation.extrasFolded;var i=d.$on(e.UPDATE_SERVICE_RATE,function(a,b){b.reservation.hasOwnProperty("serviceRate")||(b.reservation.serviceRate=0),b.reservation.serviceRate+=b.amount,c.cart.total+=b.amount});c.removeReservation=function(a){var b=c.cart.reservations[a];f.post(REMOVE_SHOPPING_CART_URL,{id:b.id,establishment:{ticker:b.establishment.ticker},origin:"java"}).success(function(f){b.serviceRate=b.serviceRate?b.serviceRate:0,c.cart.total-=b.rate+b.serviceRate,c.cart.reservations.splice(a,1),d.$broadcast(e.REMOVED_FROM_CART,b)}).error(function(){})};var j=(c.$on(e.ADDED_TO_CART,function(a,b,f){c.cart=d.cart,c.cart.total="undefined"==typeof c.cart.total?0:c.cart.total;var g=!1,h=0,i=null;angular.forEach(c.cart.reservations,function(a,c){g||a.id!=b.id||(g=!0,a.inventoryLine.services=b.inventoryLine.services,a.inventoryLine.condition=b.inventoryLine.condition,h=a.rate,i=a)}),b.rate=b.inventoryLine.totalRate*b.quantity,b.originalRate=b.inventoryLine.originalRate*b.quantity,g?(i.rate=b.rate,i.originalRate=b.originalRate,c.cart.total+=-h+b.rate):(d.cart.reservations.push(b),c.cart.total+=b.rate),d.$broadcast(e.UPDATE_INVENTORIES_BY_CART,b,f)}),function(f,h,i){c.services=d.services;var j=[];if("undefined"==typeof d.cart&&(d.cart={},d.cart.reservations=[]),angular.forEach(d.reservationData,function(b,c){b.startDate="[object Date]"!=Object.prototype.toString.call(b.startDate)?a.parseDate(b.startDate):b.startDate,b.endDate="[object Date]"!=Object.prototype.toString.call(b.endDate)?a.parseDate(b.endDate):b.endDate,0==b.inventoryLine.errorMessage.length?d.$broadcast(e.ADDED_TO_CART,b):j.push(b)}),j.length>0){c.deletedReservations=j,("undefined"==typeof d.reservationData||null==d.reservationData||0==d.reservationData.length||d.reservationData.length==c.deletedReservations.length)&&(c.allReservationsInvalid=!0);var k=function(){if(c.allReservationsInvalid){console.log("handled");var a=STEP1_URL.replace(new RegExp("TICKERPLACEHOLDER","g"),d.witbookerParams.representation.ticker).replace("LANGUAGEPLACEHOLDER",d.witbookerParams.representation.locale);window.location=a}},l=["$scope","$modalInstance",function(a,b){a.ok=function(){b.close()}}],m=g.open({templateUrl:b.assetsDir+"partials/step_one/misc/cartNotification.html",controller:l,scope:c});m.result.then(function(a){k()},function(){k()})}}),k=d.$on(e.RESERVATION_DATA_UPDATE,j);d.cartInfoProcessed||(j(),d.cartInfoProcessed=!0),c.$on("$destroy",function(){d.reservationData=[],k(),i()}),c.openInfo=function(a){c.info=a;var d=["$scope","$modalInstance",function(a,b){a.closeInfo=function(){b.close()}}];g.open({templateUrl:b.assetsDir+"partials/step_one/misc/cartInfo.html",controller:d,scope:c})}},templateUrl:b.assetsDir+"partials/step_one/shopping_cart.html"}}]).directive("witbookingDiscounts",["constants",function(a){return{restrict:"AEC",scope:{discounts:"="},link:function(a,b){},templateUrl:a.assetsDir+"partials/step_one/misc/info_discounts.html"}}]).directive("witbookingLocalization",["util","constants","$timeout","$translate","$rootScope","events","Api","$http","currencySettings",function(a,b,c,d,e,f,g,h,i){return{restrict:"AEC",scope:{languages:"=",currencies:"=",witbookerParams:"="},link:function(c,g){c.constants=b,c.changeLanguage=function(a,b){$("#disableClick").addClass("loading"),d.use(a),e.witbookerParams.representation.locale=a,e.$broadcast(f.CHANGE_LANGUAGE,a,b)},c.changeCurrency=function(b,c){$("#disableClick").addClass("loading");var d=e.witbookerParams.representation.currency;e.witbookerParams.representation.currency=b,e.witbookerParams.representation.currencySymbol=c,e.$broadcast(f.CHANGE_CURRENCY,{defaultCurrency:e.witbookerParams.representation.defaultCurrency,previousCurrency:d,newCurrency:b}),$("#disableClick").removeClass("loading");var g=a.attachGetParams(CURRENCY_CONVERSION_RATE,{previousCurrency:d,newCurrency:b,defaultCurrency:i.defaultCurrency,hotelTicker:e.establishment.ticker});h.get(g,{}).success(function(a){a.error&&console.log("There was an error in the conversion service")}).error(function(){})}},templateUrl:b.assetsDir+"partials/localized_menu.html"}}]).directive("fallbackSrc",function(){var a={link:function(a,b){b.bind("error",function(){angular.element(this).attr("src","/WitBooker/img/NoPhoto.jpg")})}};return a}).directive("witbookingAvailability",["$compile","$http","$templateCache","constants","util","$rootScope",function(a,b,c,d,e,f){return{scope:{establishment:"=",witbookerParams:"="},link:function(a,b){},templateUrl:d.assetsDir+"partials/step_one/availability.html"}}]).directive("witbookingErrorAlert",["$compile","$http","$templateCache","constants","util","$rootScope",function(a,b,c,d,e,f){return{scope:{errorMessage:"="},link:function(a,b){var c=a.errorMessage;(c.failedFilter==d.filters.occupationType||c.failedFilter.toLowerCase()==(d.filters.filterPrefix+d.filters.occupationType).toLowerCase())&&(a.constants=d,a.alert={errorType:d.filters.occupationType,value:{adults:c.value.occupants.adults,children:c.value.occupants.children,babies:c.value.occupants.babies},alertType:"warning",show:!0,close:function(){a.alert.show=!1}})},templateUrl:d.assetsDir+"partials/step_one/errorAlert.html"}}]).directive("witbookingService",["$compile","$http","$templateCache","constants","util","$rootScope","events","$modal",function(a,b,c,d,e,f,g,h){return{scope:{service:"=",reservation:"=",inventoryLine:"=",establishment:"="},link:function(a,c){a.util=e,a.isSelected=!1,"undefined"!=typeof a.reservation.establishment&&a.service.media.length>0&&(a.service.image=e.generateImgUrl(a.reservation.establishment,a.service,"extra",a.service.media[0].path,{width:"150"}),a.service.thumbnail=e.generateImgUrl(a.reservation.establishment,a.service,"extra",a.service.media[0].path,{width:"62"})),a.constants=d;var i=e.getIntegerDigits(a.reservation.endDate-a.reservation.startDate)/864e5;if("undefined"==typeof a.inventoryLine.selectedServices&&(a.inventoryLine.selectedServices={quantity:0}),a.updateReservation=function(a,c){b.post(UPDATE_CART_DATA_URL,{id:a.id,establishment:{ticker:a.establishment.ticker},service:[{ticker:c.ticker,availability:a.inventoryLine.selectedServices[c.ticker].units?a.inventoryLine.selectedServices[c.ticker].units.availability:-1,selected:a.inventoryLine.selectedServices[c.ticker].selected?a.inventoryLine.selectedServices[c.ticker].selected:!1}]}).success(function(a){console.log("SERVICE UPDATED "),console.log(a)}).error(function(a){console.log("SERVICE UPDATED FAIL "),console.log(a)})},a.service.type==d.serviceType.units){a.$watch("inventoryLine.selectedServices[service.ticker].units.availability",function(b,c){c!==b&&(a.inventoryLine.selectedServices[a.service.ticker].updated=!1,j(b,c,!0))});var j=function(b,c,h){a.rate=0,a.isSelected=a.inventoryLine.selectedServices[a.service.ticker].units.availability>0,a.inventoryLine.selectedServices[a.service.ticker].selected=a.isSelected,a.selectedMultiplier=a.isSelected?1:0;var j=e.calculateServiceRate(a.service,a.reservation.inventoryLine.capacity,a.reservation.quantity,c,i,d),k=e.calculateServiceRate(a.service,a.reservation.inventoryLine.capacity,a.reservation.quantity,b,i,d);a.rate=k,f.$broadcast(g.UPDATE_SERVICE_RATE,{reservation:a.reservation,amount:k-j}),(!a.inventoryLine.selectedServices[a.service.ticker].updated||h)&&c!=b&&a.updateReservation(a.reservation,a.service)};a.$on(g.UPDATE_SERVICE_QUANTITY,function(b,c,d){a.inventoryLine.selectedServices[a.service.ticker].updated=!1,j(c,d,!0)});var k=function(a,b){for(var c=[],d=a;b>=d;d++)c.push({id:d,availability:d});return c};a.unitSelectorOptions=k(0,a.service.maxUnits),a.inventoryLine.selectedServices.hasOwnProperty(a.service.ticker)||(a.inventoryLine.selectedServices[a.service.ticker]={service:a.service,units:null,selected:!1}),(null==a.inventoryLine.selectedServices[a.service.ticker].units||0==a.inventoryLine.selectedServices[a.service.ticker].units.availability)&&(a.inventoryLine.selectedServices[a.service.ticker].units=a.unitSelectorOptions[0]);for(var l=0;l<a.unitSelectorOptions.length;l++){if(a.reservation.selectedServices&&a.reservation.selectedServices.hasOwnProperty(a.service.ticker)&&null!=a.reservation.selectedServices[a.service.ticker].availability&&a.unitSelectorOptions[l].availability==a.reservation.selectedServices[a.service.ticker].availability){a.inventoryLine.selectedServices[a.service.ticker].units=a.unitSelectorOptions[l];break}if(null!=a.inventoryLine.selectedServices[a.service.ticker].units&&0!=a.unitSelectorOptions[l].availability&&a.unitSelectorOptions[l].availability==a.inventoryLine.selectedServices[a.service.ticker].units.availability){a.inventoryLine.selectedServices[a.service.ticker].units=a.unitSelectorOptions[l];break}}f.servicesProcessed.hasOwnProperty([a.reservation.id+a.service.ticker])||a.$broadcast(g.UPDATE_SERVICE_QUANTITY,a.inventoryLine.selectedServices[a.service.ticker].units.availability,0),f.servicesProcessed[a.reservation.id+a.service.ticker]={processed:!0},a.inventoryLine.selectedServices[a.service.ticker].updated=!0,a.rate=e.calculateServiceRate(a.service,a.reservation.inventoryLine.capacity,a.reservation.quantity,a.inventoryLine.selectedServices[a.service.ticker].units.availability,i,d),a.isSelected=a.inventoryLine.selectedServices[a.service.ticker].units.availability>0}else{a.$watch("inventoryLine.selectedServices[service.ticker].selected",function(b,c){c!=b&&(a.inventoryLine.selectedServices[a.service.ticker].updated=!1,j(b,c,!0))}),a.$on(g.UPDATE_SERVICE_SELECTION,function(b,c,d){a.inventoryLine.selectedServices[a.service.ticker].updated=!1,j(c,d,!0)}),a.inventoryLine.selectedServices.hasOwnProperty(a.service.ticker)||(a.inventoryLine.selectedServices[a.service.ticker]={selected:!1}),a.reservation.selectedServices&&a.reservation.selectedServices.hasOwnProperty(a.service.ticker)&&(a.inventoryLine.selectedServices[a.service.ticker].selected=a.reservation.selectedServices[a.service.ticker].selected),1==a.service.obligatory&&(a.inventoryLine.selectedServices[a.service.ticker]={selected:!0});var j=function(b,c,h){if(c==b&&0==a.service.obligatory)return void(a.rate=null==a.rate?0:a.rate);a.selectedMultiplier=a.inventoryLine.selectedServices[a.service.ticker].selected?1:0,a.isSelected=a.inventoryLine.selectedServices[a.service.ticker].selected;var j=e.calculateServiceRate(a.service,a.reservation.inventoryLine.capacity,a.reservation.quantity,0,i,d);j=a.isSelected?j:-j,a.rate=a.isSelected?j:0,f.$broadcast(g.UPDATE_SERVICE_RATE,{reservation:a.reservation,amount:j}),(!a.inventoryLine.selectedServices[a.service.ticker].updated||h)&&c!=b&&a.updateReservation(a.reservation,a.service)};a.inventoryLine.selectedServices[a.service.ticker].updated=!0,a.isSelected=a.inventoryLine.selectedServices[a.service.ticker].selected,a.isSelected?a.rate=e.calculateServiceRate(a.service,a.reservation.inventoryLine.capacity,a.reservation.quantity,0,i,d):a.rate=0,f.servicesProcessed.hasOwnProperty([a.reservation.id+a.service.ticker])||a.$broadcast(g.UPDATE_SERVICE_SELECTION,a.inventoryLine.selectedServices[a.service.ticker].selected,!1),f.servicesProcessed[a.reservation.id+a.service.ticker]={processed:!0}}a.dailyMultiplier=a.service.daily?i:1,a.openInfo=function(b){a.info=b,a.currency=f.witbookerParams.representation.currency;var c=["$scope","$modalInstance",function(a,b){a.closeInfo=function(){b.close()}}];h.open({templateUrl:d.assetsDir+"partials/step_one/misc/cartInfo.html",controller:c,scope:a})}},templateUrl:d.assetsDir+"partials/step_two/service_row.html"}}]).directive("witbookingFooter",["$compile","$http","$templateCache","constants","util","$rootScope","events",function(a,b,c,d,e,f,g){return{scope:{establishment:"=",witbookerParams:"="},link:function(a,b){var c=new Date;a.year=c.getFullYear(),a.releaseVersion=f.witbookerParams.representation.releaseVersion,a.iframeMode=f.witbookerParams.representation.iframeMode,a.showPromoCodeInputOnIframeMode=f.witbookerParams.representation.showPromoCodeInputOnIframeMode,a.$on(g.CHANGE_LANGUAGE,function(a,b,c){jQuery("#cookie-bar").remove(),jQuery.witCookiesLaw({language:f.witbookerParams.representation.language.code,url:{es:"/WitBooker/booking/cookies/cookie_es?ticker="+f.witbookerParams.representation.ticker,en:"/WitBooker/booking/cookies/cookie_en?ticker="+f.witbookerParams.representation.ticker}})}),jQuery("#cookie-bar").remove(),jQuery.witCookiesLaw({language:"undefined"!=typeof f.witbookerParams.representation.language.code?f.witbookerParams.representation.language.code:"es",url:{es:"/WitBooker/booking/cookies/cookie_es?ticker="+f.witbookerParams.representation.ticker,en:"/WitBooker/booking/cookies/cookie_en?ticker="+f.witbookerParams.representation.ticker}})},templateUrl:d.assetsDir+"partials/step_one/footer.html"}}]).directive("witbookingIframePromoCode",["constants","util","$rootScope","events",function(a,b,c,d){return{scope:{},link:function(a){a.iframePromoCode="",a.queryAvailability=function(){b.setGetParameter("promotionalcode",a.iframePromoCode)}},template:'<div class="input-group iframePromoCodeGroup" ><input type="text" class="form-control" ng-model="iframePromoCode"  placeholder="{{\'trans.promoCode\'|translate}}" ><span class="input-group-btn"><button class="btn btn-default" type="button" style="height: 34px" translate ng-click="queryAvailability()">trans.step2.validate</button></span></div>'}}]).directive("witbookingTrackingPixels",["constants","util","$rootScope","events",function(a,b,c,d){return{scope:{},link:function(a){a.isTripAdvisorActive="TripAdvisor"==c.witbookerParams.representation.channel?!0:!1},templateUrl:a.assetsDir+"partials/step_one/misc/tracking_pixels.html"}}]).directive("witbookingCustomerDataForm",["$compile","$http","$templateCache","constants","util","$rootScope",function(a,b,c,d,e,f){return{scope:{errorMessage:"=",customerData:"=",establishment:"=",form:"="},link:function(a,b){a.inventoryLinePaymentType=d.payment.type.creditCardOrTransfer,a.bookingFormCountry=f.witbookerParams.representation.bookingFormCountry,a.bookingFormPhone=f.witbookerParams.representation.bookingFormPhone,a.bookingFormDni=f.witbookerParams.representation.bookingFormDni,a.bookingFormAddress=f.witbookerParams.representation.bookingFormAddress,a.bookingFormRepeatEmail=f.witbookerParams.representation.bookingFormRepeatEmail,a.bookingFormArrivalTime=f.witbookerParams.representation.bookingFormArrivalTime,a.bookingFormNewsletter=f.witbookerParams.representation.bookingFormNewsletter,a.establishment=f.establishment,a.constants=d,a.countries=f.witbookerParams.representation.countries},templateUrl:d.assetsDir+"partials/step_two/customer_data_form.html"}}]).directive("witbookingPaymentDataForm",["$compile","$http","$templateCache","constants","util","$rootScope","events","$modal",function(a,b,c,d,e,f,g,h){return{scope:{errorMessage:"=",paymentData:"=",reservations:"=",establishment:"=",form:"="},link:function(a,b){a.establishment=f.establishment,a.constants=d,a.ptype,a.util=e;var c=function(b,c){a.goToStepOne=function(){f.$broadcast(g.GO_TO_STEP1,{establishment:f.establishment.ticker})};var d={};angular.forEach(a.reservations,function(a,b){if(0==b)angular.forEach(a.inventoryLine.condition.paymentTypes,function(a,b){d.hasOwnProperty(a.ticker)||(d[a.ticker]=[]),d[a.ticker].push(a)});else for(var c in d){var e=!1;angular.forEach(a.inventoryLine.condition.paymentTypes,function(a,b){c==a.ticker&&(d[a.ticker].push(a),e=!0)}),e||delete d[c]}}),a.availablePaymentTypes=[];for(var e in d)a.ptype||(a.ptype=e),a.availablePaymentTypes.push(e)},i=(f.$on(g.RESERVATION_DATA_UPDATE,c),f.$watch(function(){return a.reservations.length},c));a.$on("$destroy",function(){i()}),a.depositPercentage=0,a.depositAmount=0;var j=function(b){a.depositAmount=0,angular.forEach(a.reservations,function(c,d){var e=0;angular.forEach(c.inventoryLine.condition.paymentTypes,function(d,f){if(d.ticker==b){var g=c.serviceRate?c.serviceRate:0,h=c.inventoryLine.condition.earlyCharge&&c.inventoryLine.condition.earlyCharge>0?0:d.paymentPercentage/100*(g+c.rate),i=g+c.rate,j=c.inventoryLine.condition.payFirstNight&&c.inventoryLine.firstNightCost>0?c.inventoryLine.firstNightCost:0,k=c.inventoryLine.condition.earlyCharge&&c.inventoryLine.condition.earlyCharge>0?c.inventoryLine.condition.earlyCharge/100*i:0,l=c.inventoryLine.condition.minimumCharge&&c.inventoryLine.condition.minimumCharge>0&&c.inventoryLine.condition.minimumCharge<i?c.inventoryLine.condition.minimumCharge:0;e=Math.max(j,k,l),e=e>0?e:h,e*=c.quantity,a.depositAmount+=e}})})},k=f.$watch("cart.total",function(b,c){j(a.ptype),a.depositPercentage=a.depositAmount/f.cart.total*100,f.cart.depositPercentage=a.depositPercentage,f.cart.depositAmount=a.depositAmount});a.$on("$destroy",function(){k()}),a.$watch("ptype",function(b,c){b!==c&&(j(b),a.depositPercentage=a.depositAmount/f.cart.total*100,f.cart.depositPercentage=a.depositPercentage,f.cart.depositAmount=a.depositAmount)}),a.openInfo=function(){a.conditions={},angular.forEach(a.reservations,function(b,c){angular.forEach(b.inventoryLine.condition,function(c,d){"undefined"==typeof a.conditions[b.inventoryLine.condition.ticker]&&(a.conditions[b.inventoryLine.condition.ticker]=b.inventoryLine.condition)})});var b=["$scope","$modalInstance",function(a,b){a.closeInfo=function(){b.close()}}];a.isAdditionalInfoVisible=!1,a.toggleAdditionalInfo=function(){a.isAdditionalInfoVisible=!a.isAdditionalInfoVisible},h.open({templateUrl:d.assetsDir+"partials/step_one/misc/conditionsModal.html",controller:b,scope:a})},a.cart=f.cart,a.inventoryLinePaymentType=a.ptype,a.submitPaymentDataForm=function(){f.$broadcast(g.SUBMIT_PAYMENT_DATA_FORM,{paymentType:a.ptype})},a.witbookerParams=f.witbookerParams},templateUrl:d.assetsDir+"partials/step_two/payment_data_form.html"}}]).directive("witbookingPaymentTypeForm",["$compile","$http","$templateCache","constants","util","$rootScope","$sce",function(a,b,c,d,e,f,g){return{scope:{type:"=",paymentData:"=",form:"="},link:function(a,b){a.constants=d;for(var c=11,e=[],h=[],i=new Date,j=1;c>j;j++){var k=i.getFullYear().toString().substr(2,2);e.push({id:j,Value:k,Name:k}),i.setFullYear(i.getFullYear()+1)}a.years=e;for(var j=1;13>j;j++){var k=9>=j?"0"+j.toString():j.toString();h.push({Id:j,Value:k,Name:k})}a.months=h,a.creditCards=f.establishment.creditCardsAllowed;var l={Visa:/^4[0-9]{12}(?:[0-9]{3})?$/,Mastercard:/^5[1-5][0-9]{14}$/,American_Express:/^3[47][0-9]{13}$/,Carte_Bleu:/^[0-9]*$/,Diners:/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/,JCB:/^(?:2131|1800|35\\d{3})\\d{11}$/};a.ccPattern=l[a.creditCards[0].id],a.changePattern=function(b){a.ccPattern=l[b.id],a.form.numbercard.$setViewValue(a.form.numbercard.$viewValue)},a.bookingFormCcv=f.witbookerParams.representation.bookingFormCcv,a.paymentData.creditCardData.cckind=a.creditCards[0],f.establishment.transferData&&(a.transferData=f.establishment.transferData),a.witbookerParams=f.witbookerParams;var m=f.$watch("sipayIframe",function(b,c){b&&(a.sipayIframe=g.trustAsResourceUrl(f.sipayIframe))});a.$on("$destroy",function(){m()})},templateUrl:d.assetsDir+"partials/step_two/payment/payment_type_form.html"}}]).directive("witbookingPaymentTypeHeader",["$compile","$http","$templateCache","constants","util","$rootScope",function(a,b,c,d,e,f){return{scope:{type:"="},link:function(a,b){a.constants=d},templateUrl:d.assetsDir+"partials/step_two/payment/payment_type_header.html"}}]),function(a){a.cookieBar=function(b,c){if("cookies"==b)var d="cookies";else if("set"==b)var d="set";else var d=!1;var e={message:"We use cookies to track usage and preferences.",acceptButton:!0,acceptText:"I Understand",declineButton:!1,declineText:"Disable Cookies",policyButton:!1,policyText:"Privacy Policy",policyURL:"/privacy-policy/",autoEnable:!0,expireDays:365,forceShow:!1,effect:"slide",element:"body",append:!1,fixed:!1,zindex:"",redirect:String(window.location.href),domain:String(window.location.hostname)},b=a.extend(e,b),f=new Date;f.setTime(f.getTime()+24*b.expireDays*60*60*1e3),f=f.toGMTString();var g,h,i="cb-enabled={value}; expires="+f+"; path=/",j="",k=document.cookie.split("; ");for(g=0;g<k.length;g++)h=k[g].split("="),"cb-enabled"==h[0]&&(j=h[1]);if(""==j&&b.autoEnable&&(j="enabled",document.cookie=i.replace("{value}","enabled")),"cookies"==d)return"enabled"==j||"accepted"==j?!0:!1;if("set"==d&&("accepted"==c||"declined"==c))return document.cookie=i.replace("{value}",c),"accepted"==c?!0:!1;var l=b.message.replace("{policy_url}",b.policyURL);if(b.acceptButton)var m='<a href="" class="cb-enable">'+b.acceptText+"</a>";else var m="";if(b.declineButton)var n='<a href="" class="cb-disable">'+b.declineText+"</a>";else var n="";if(b.policyButton)var o='<a href="'+b.policyURL+'" target="_blanck" class="cb-policy">'+b.policyText+"</a>";else var o="";if(b.fixed)var p=' class="fixed"';else var p="";if(""!=b.zindex)var q=' style="z-index:'+b.zindex+';"';else var q="";(b.forceShow||"enabled"==j||""==j)&&(b.append?a(b.element).append('<div id="cookie-bar"'+p+q+"><p>"+l+m+n+o+"</p></div>"):a(b.element).prepend('<div id="cookie-bar"'+p+q+"><p>"+l+m+n+o+"</p></div>")),a("#cookie-bar .cb-enable").click(function(){return document.cookie=i.replace("{value}","accepted"),"enabled"==j||"accepted"==j?("slide"==b.effect?a("#cookie-bar").slideUp(300,function(){a("#cookie-bar").remove()}):"fade"==b.effect?a("#cookie-bar").fadeOut(300,function(){a("#cookie-bar").remove()}):a("#cookie-bar").hide(0,function(){a("#cookie-bar").remove()}),!1):void(window.location=b.currentLocation)}),a("#cookie-bar .cb-disable").click(function(){var c=new Date;for(c.setTime(c.getTime()-864e6),c=c.toGMTString(),k=document.cookie.split("; "),g=0;g<k.length;g++)h=k[g].split("="),h[0].indexOf("_")>=0?document.cookie=h[0]+"=0; expires="+c+"; domain="+b.domain.replace("www","")+"; path=/":document.cookie=h[0]+"=0; expires="+c+"; path=/";return document.cookie=i.replace("{value}","declined"),"enabled"!=j||"accepted"==j?("slide"==b.effect?a("#cookie-bar").slideUp(300,function(){a("#cookie-bar").remove()}):"fade"==b.effect?a("#cookie-bar").fadeOut(300,function(){a("#cookie-bar").remove()}):a("#cookie-bar").hide(0,function(){a("#cookie-bar").remove()}),!1):void(window.location=b.currentLocation)})}}(jQuery),function(a){a.witCookiesLaw=function(b){var c={language:"es",effect:"fade",expireDays:365,policyButton:!0,mensajeTxt:"Las cookies nos permiten ofrecer nuestros servicios. Al utilizar nuestros servicios, aceptas el uso que hacemos de las cookies.",aceptarTxt:"Aceptar",masInfoTxt:"Ms informacin",urlDefault:b.url.en},b=a.extend(c,b),d=b.urlDefault;switch(b.language){case"es":"undefined"!=typeof b.url.es&&(d=b.url.es);break;case"en":b.mensajeTxt="Cookies help us deliver our services. By using our services, you agree to our use of cookies.",b.aceptarTxt="Ok",b.masInfoTxt="Learn more";break;case"it":b.mensajeTxt="I cookie ci aiutano a fornire i nostri servizi. Utilizzando tali servizi, accetti l'utilizzo dei cookie.",b.aceptarTxt="Ok",b.masInfoTxt="Ulteriori informazioni","undefined"!=typeof b.url.it&&(d=b.url.it);break;case"fr":b.mensajeTxt="Les cookies assurent le bon fonctionnement de nos services. En utilisant ces derniers, vous acceptez l'utilisation des cookies.",b.aceptarTxt="Ok",b.masInfoTxt="En savoir plus",
"undefined"!=typeof b.url.fr&&(d=b.url.fr);break;case"ca":b.mensajeTxt="Les cookies ens permeten oferir els nostres serveis. En utilitzar els nostres serveis, acceptes l's que fem de les cookies.",b.aceptarTxt="Acceptar",b.masInfoTxt="Ms informaci","undefined"!=typeof b.url.fr&&(d=b.url.fr);break;case"de":b.mensajeTxt="Cookies helfen uns bei der Bereitstellung unserer Dienste. Durch die Nutzung unserer Dienste erklren Sie sich damit einverstanden, dass wir Cookies setzen.",b.aceptarTxt="Ok",b.masInfoTxt="Weitere Informationen","undefined"!=typeof b.url.de&&(d=b.url.de);break;case"nl":b.mensajeTxt="Cookies helpen ons bij het leveren van onze diensten. Door gebruik te maken van onze diensten, gaat u akkoord met ons gebruik van cookies.",b.aceptarTxt="Ok",b.masInfoTxt="Meer informatie","undefined"!=typeof b.url.nl&&(d=b.url.nl);break;case"ru":b.mensajeTxt="     .   ,      .",b.aceptarTxt="Ok",b.masInfoTxt=" ","undefined"!=typeof b.url.ru&&(d=b.url.ru);break;case"pt":b.mensajeTxt="Os cookies ajudam-nos a oferecer os nossos servios. Ao utilizar os nossos servios, concorda com a nossa utilizao de cookies.",b.aceptarTxt="Ok",b.masInfoTxt="Saiba mais","undefined"!=typeof b.url.pt&&(d=b.url.pt);break;default:b.mensajeTxt="Cookies help us deliver our services. By using our services, you agree to our use of cookies.",b.aceptarTxt="Ok",b.masInfoTxt="Learn more"}a.cookieBar({message:b.mensajeTxt,acceptText:b.aceptarTxt,policyButton:b.policyButton,policyText:b.masInfoTxt,policyURL:d,expireDays:b.expireDays,effect:b.effect})}}(jQuery),function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define(b):a.Spinner=b()}(this,function(){"use strict";function a(a,b){var c,d=document.createElement(a||"div");for(c in b)d[c]=b[c];return d}function b(a){for(var b=1,c=arguments.length;c>b;b++)a.appendChild(arguments[b]);return a}function c(a,b,c,d){var e=["opacity",b,~~(100*a),c,d].join("-"),f=.01+c/d*100,g=Math.max(1-(1-a)/b*(100-f),a),h=j.substring(0,j.indexOf("Animation")).toLowerCase(),i=h&&"-"+h+"-"||"";return l[e]||(m.insertRule("@"+i+"keyframes "+e+"{0%{opacity:"+g+"}"+f+"%{opacity:"+a+"}"+(f+.01)+"%{opacity:1}"+(f+b)%100+"%{opacity:"+a+"}100%{opacity:"+g+"}}",m.cssRules.length),l[e]=1),e}function d(a,b){var c,d,e=a.style;for(b=b.charAt(0).toUpperCase()+b.slice(1),d=0;d<k.length;d++)if(c=k[d]+b,void 0!==e[c])return c;return void 0!==e[b]?b:void 0}function e(a,b){for(var c in b)a.style[d(a,c)||c]=b[c];return a}function f(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)void 0===a[d]&&(a[d]=c[d])}return a}function g(a,b){return"string"==typeof a?a:a[b%a.length]}function h(a){this.opts=f(a||{},h.defaults,n)}function i(){function c(b,c){return a("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',c)}m.addRule(".spin-vml","behavior:url(#default#VML)"),h.prototype.lines=function(a,d){function f(){return e(c("group",{coordsize:k+" "+k,coordorigin:-j+" "+-j}),{width:k,height:k})}function h(a,h,i){b(m,b(e(f(),{rotation:360/d.lines*a+"deg",left:~~h}),b(e(c("roundrect",{arcsize:d.corners}),{width:j,height:d.width,left:d.radius,top:-d.width>>1,filter:i}),c("fill",{color:g(d.color,a),opacity:d.opacity}),c("stroke",{opacity:0}))))}var i,j=d.length+d.width,k=2*j,l=2*-(d.width+d.length)+"px",m=e(f(),{position:"absolute",top:l,left:l});if(d.shadow)for(i=1;i<=d.lines;i++)h(i,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(i=1;i<=d.lines;i++)h(i);return b(a,m)},h.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c))}}var j,k=["webkit","Moz","ms","O"],l={},m=function(){var c=a("style",{type:"text/css"});return b(document.getElementsByTagName("head")[0],c),c.sheet||c.styleSheet}(),n={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",position:"absolute"};h.defaults={},f(h.prototype,{spin:function(b){this.stop();var c=this,d=c.opts,f=c.el=e(a(0,{className:d.className}),{position:d.position,width:0,zIndex:d.zIndex});if(d.radius+d.length+d.width,e(f,{left:d.left,top:d.top}),b&&b.insertBefore(f,b.firstChild||null),f.setAttribute("role","progressbar"),c.lines(f,c.opts),!j){var g,h=0,i=(d.lines-1)*(1-d.direction)/2,k=d.fps,l=k/d.speed,m=(1-d.opacity)/(l*d.trail/100),n=l/d.lines;!function o(){h++;for(var a=0;a<d.lines;a++)g=Math.max(1-(h+(d.lines-a)*n)%l*m,d.opacity),c.opacity(f,a*d.direction+i,g,d);c.timeout=c.el&&setTimeout(o,~~(1e3/k))}()}return c},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0),this},lines:function(d,f){function h(b,c){return e(a(),{position:"absolute",width:f.length+f.width+"px",height:f.width+"px",background:b,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/f.lines*k+f.rotate)+"deg) translate("+f.radius+"px,0)",borderRadius:(f.corners*f.width>>1)+"px"})}for(var i,k=0,l=(f.lines-1)*(1-f.direction)/2;k<f.lines;k++)i=e(a(),{position:"absolute",top:1+~(f.width/2)+"px",transform:f.hwaccel?"translate3d(0,0,0)":"",opacity:f.opacity,animation:j&&c(f.opacity,f.trail,l+k*f.direction,f.lines)+" "+1/f.speed+"s linear infinite"}),f.shadow&&b(i,e(h("#000","0 0 4px #000"),{top:"2px"})),b(d,b(i,h(g(f.color,k),"0 0 1px rgba(0,0,0,.1)")));return d},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}});var o=e(a("group"),{behavior:"url(#default#VML)"});return!d(o,"transform")&&o.adj?i():j=d(o,"animation"),h}),angular.module("ngCacheBuster",[]).config(["$httpProvider",function(a){return a.interceptors.push("httpRequestInterceptorCacheBuster")}]).provider("httpRequestInterceptorCacheBuster",function(){this.matchlist=[/.*partials.*/,/.*views.*/],this.logRequests=!1,this.black=!1,this.setMatchlist=function(a,b){this.black="undefined"!=typeof b?b:!1,this.matchlist=a},this.setLogRequests=function(a){this.logRequests=a},this.$get=["$q","$log",function(a,b){var c=this.matchlist,d=this.logRequests,e=this.black;return d&&b.log("Blacklist? ",e),{request:function(f){for(var g=!e,h=0;h<c.length;h++)if(f.url.match(c[h])){g=e;break}if(g){var i=new Date;f.url=f.url.replace(/[?|&]cacheBuster=\d+/,""),f.url+=-1===f.url.indexOf("?")?"?":"&",f.url+="cacheBuster="+i.getTime()}if(d){var j="request.url ="+f.url;g?b.warn(j):b.info(j)}return f||a.when(f)}}}]});